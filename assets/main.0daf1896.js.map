{"version":3,"file":"main.0daf1896.js","sources":["../../node_modules/react-google-autocomplete/lib/utils.js","../../node_modules/@sentry/utils/esm/is.js","../../node_modules/@sentry/utils/esm/worldwide.js","../../node_modules/@sentry/utils/esm/browser.js","../../node_modules/@sentry/utils/esm/error.js","../../node_modules/@sentry/utils/esm/dsn.js","../../node_modules/@sentry/utils/esm/logger.js","../../node_modules/@sentry/utils/esm/string.js","../../node_modules/@sentry/utils/esm/object.js","../../node_modules/@sentry/utils/esm/buildPolyfills/_nullishCoalesce.js","../../node_modules/@sentry/utils/esm/buildPolyfills/_optionalChain.js","../../node_modules/@sentry/utils/esm/stacktrace.js","../../node_modules/@sentry/utils/esm/supports.js","../../node_modules/@sentry/utils/esm/instrument.js","../../node_modules/@sentry/utils/esm/memo.js","../../node_modules/@sentry/utils/esm/misc.js","../../node_modules/@sentry/utils/esm/env.js","../../node_modules/@sentry/utils/esm/node.js","../../node_modules/@sentry/utils/esm/normalize.js","../../node_modules/@sentry/utils/esm/syncpromise.js","../../node_modules/@sentry/utils/esm/promisebuffer.js","../../node_modules/@sentry/utils/esm/url.js","../../node_modules/@sentry/utils/esm/severity.js","../../node_modules/@sentry/utils/esm/time.js","../../node_modules/@sentry/utils/esm/tracing.js","../../node_modules/@sentry/utils/esm/envelope.js","../../node_modules/@sentry/utils/esm/clientreport.js","../../node_modules/@sentry/utils/esm/ratelimit.js","../../node_modules/@sentry/utils/esm/baggage.js","../../node_modules/@sentry/core/esm/session.js","../../node_modules/@sentry/core/esm/scope.js","../../node_modules/@sentry/core/esm/hub.js","../../node_modules/@sentry/core/esm/exports.js","../../node_modules/@sentry/core/esm/api.js","../../node_modules/@sentry/core/esm/envelope.js","../../node_modules/@sentry/core/esm/integration.js","../../node_modules/@sentry/core/esm/utils/prepareEvent.js","../../node_modules/@sentry/core/esm/baseclient.js","../../node_modules/@sentry/core/esm/sdk.js","../../node_modules/@sentry/core/esm/transports/base.js","../../node_modules/@sentry/core/esm/version.js","../../node_modules/@sentry/core/esm/integrations/functiontostring.js","../../node_modules/@sentry/core/esm/integrations/inboundfilters.js","../../node_modules/@sentry/browser/esm/helpers.js","../../node_modules/@sentry/browser/esm/eventbuilder.js","../../node_modules/@sentry/browser/esm/integrations/breadcrumbs.js","../../node_modules/@sentry/browser/esm/client.js","../../node_modules/@sentry/browser/esm/transports/utils.js","../../node_modules/@sentry/browser/esm/transports/fetch.js","../../node_modules/@sentry/browser/esm/transports/xhr.js","../../node_modules/@sentry/browser/esm/stack-parsers.js","../../node_modules/@sentry/browser/esm/integrations/globalhandlers.js","../../node_modules/@sentry/browser/esm/integrations/trycatch.js","../../node_modules/@sentry/browser/esm/integrations/linkederrors.js","../../node_modules/@sentry/browser/esm/integrations/httpcontext.js","../../node_modules/@sentry/browser/esm/integrations/dedupe.js","../../node_modules/@sentry/browser/esm/sdk.js","../../node_modules/@sentry/react/esm/sdk.js","../../node_modules/react-is/cjs/react-is.production.min.js","../../node_modules/react-is/index.js","../../node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","../../node_modules/@sentry/react/esm/errorboundary.js","../../node_modules/@sentry/tracing/esm/utils.js","../../node_modules/@sentry/tracing/esm/errors.js","../../node_modules/@sentry/tracing/esm/span.js","../../node_modules/@sentry/tracing/esm/transaction.js","../../node_modules/@sentry/tracing/esm/idletransaction.js","../../node_modules/@sentry/tracing/esm/hubextensions.js","../../node_modules/@sentry/tracing/esm/browser/types.js","../../node_modules/@sentry/tracing/esm/browser/backgroundtab.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/bindReporter.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/generateUniqueID.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/getNavigationEntry.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/getActivationStart.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/initMetric.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/observe.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/onHidden.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/getCLS.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/lib/getVisibilityWatcher.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/getFID.js","../../node_modules/@sentry/tracing/esm/browser/web-vitals/getLCP.js","../../node_modules/@sentry/tracing/esm/browser/metrics/utils.js","../../node_modules/@sentry/tracing/esm/browser/metrics/index.js","../../node_modules/@sentry/tracing/esm/browser/request.js","../../node_modules/@sentry/tracing/esm/browser/router.js","../../node_modules/@sentry/tracing/esm/browser/browsertracing.js","../../node_modules/@sentry/tracing/esm/index.js","../../src/components/map.jsx","../../node_modules/classnames/index.js","../../src/assets/icon-tab-arrow.svg","../../src/assets/icon-call.svg","../../src/assets/icon-bus.jsx","../../src/assets/icon-open-link.svg","../../src/components/bus-item-time.jsx","../../src/components/bus-item.jsx","../../src/components/sidebar.jsx","../../src/components/map-location-input.jsx","../../src/pages/initial.jsx","../../node_modules/lodash.debounce/index.js","../../node_modules/react-google-autocomplete/lib/constants.js","../../node_modules/react-google-autocomplete/lib/usePlacesAutocompleteService.js","../../src/assets/icon-back.svg","../../src/assets/icon-cross.svg","../../src/assets/icon-grey-pin.svg","../../src/assets/logo-google.svg","../../src/pages/search_text.jsx","../../src/assets/icon-marker.svg","../../src/pages/search_map.jsx","../../src/assets/illustration-error.svg","../../src/components/page-crash-error.jsx","../../src/main.jsx"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadGoogleMapScript = exports.isBrowser = void 0;\nvar isBrowser = typeof window !== \"undefined\" && window.document;\nexports.isBrowser = isBrowser;\n\nvar loadGoogleMapScript = function loadGoogleMapScript(googleMapsScriptBaseUrl, googleMapsScriptUrl) {\n  if (!isBrowser) return Promise.resolve();\n\n  if (typeof google !== \"undefined\") {\n    if (google.maps && google.maps.api) return Promise.resolve();\n  }\n\n  var scriptElements = document.querySelectorAll(\"script[src*=\\\"\".concat(googleMapsScriptBaseUrl, \"\\\"]\"));\n\n  if (scriptElements && scriptElements.length) {\n    return new Promise(function (resolve) {\n      // in case we already have a script on the page and it's loaded we resolve\n      if (typeof google !== \"undefined\") return resolve(); // otherwise we wait until it's loaded and resolve\n\n      scriptElements[0].addEventListener(\"load\", function () {\n        return resolve();\n      });\n    });\n  }\n\n  var el = document.createElement(\"script\");\n  el.src = googleMapsScriptUrl;\n  document.body.appendChild(el);\n  return new Promise(function (resolve) {\n    el.addEventListener(\"load\", function () {\n      return resolve();\n    });\n  });\n};\n\nexports.loadGoogleMapScript = loadGoogleMapScript;","// eslint-disable-next-line @typescript-eslint/unbound-method\nconst objectToString = Object.prototype.toString;\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {@link isError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isError(wat) {\n  switch (objectToString.call(wat)) {\n    case '[object Error]':\n    case '[object Exception]':\n    case '[object DOMException]':\n      return true;\n    default:\n      return isInstanceOf(wat, Error);\n  }\n}\n/**\n * Checks whether given value is an instance of the given built-in class.\n *\n * @param wat The value to be checked\n * @param className\n * @returns A boolean representing the result.\n */\nfunction isBuiltin(wat, className) {\n  return objectToString.call(wat) === `[object ${className}]`;\n}\n\n/**\n * Checks whether given value's type is ErrorEvent\n * {@link isErrorEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isErrorEvent(wat) {\n  return isBuiltin(wat, 'ErrorEvent');\n}\n\n/**\n * Checks whether given value's type is DOMError\n * {@link isDOMError}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMError(wat) {\n  return isBuiltin(wat, 'DOMError');\n}\n\n/**\n * Checks whether given value's type is DOMException\n * {@link isDOMException}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isDOMException(wat) {\n  return isBuiltin(wat, 'DOMException');\n}\n\n/**\n * Checks whether given value's type is a string\n * {@link isString}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isString(wat) {\n  return isBuiltin(wat, 'String');\n}\n\n/**\n * Checks whether given value is a primitive (undefined, null, number, boolean, string, bigint, symbol)\n * {@link isPrimitive}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPrimitive(wat) {\n  return wat === null || (typeof wat !== 'object' && typeof wat !== 'function');\n}\n\n/**\n * Checks whether given value's type is an object literal\n * {@link isPlainObject}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isPlainObject(wat) {\n  return isBuiltin(wat, 'Object');\n}\n\n/**\n * Checks whether given value's type is an Event instance\n * {@link isEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isEvent(wat) {\n  return typeof Event !== 'undefined' && isInstanceOf(wat, Event);\n}\n\n/**\n * Checks whether given value's type is an Element instance\n * {@link isElement}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isElement(wat) {\n  return typeof Element !== 'undefined' && isInstanceOf(wat, Element);\n}\n\n/**\n * Checks whether given value's type is an regexp\n * {@link isRegExp}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isRegExp(wat) {\n  return isBuiltin(wat, 'RegExp');\n}\n\n/**\n * Checks whether given value has a then function.\n * @param wat A value to be checked.\n */\nfunction isThenable(wat) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return Boolean(wat && wat.then && typeof wat.then === 'function');\n}\n\n/**\n * Checks whether given value's type is a SyntheticEvent\n * {@link isSyntheticEvent}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isSyntheticEvent(wat) {\n  return isPlainObject(wat) && 'nativeEvent' in wat && 'preventDefault' in wat && 'stopPropagation' in wat;\n}\n\n/**\n * Checks whether given value is NaN\n * {@link isNaN}.\n *\n * @param wat A value to be checked.\n * @returns A boolean representing the result.\n */\nfunction isNaN(wat) {\n  return typeof wat === 'number' && wat !== wat;\n}\n\n/**\n * Checks whether given value's type is an instance of provided constructor.\n * {@link isInstanceOf}.\n *\n * @param wat A value to be checked.\n * @param base A constructor to be used in a check.\n * @returns A boolean representing the result.\n */\nfunction isInstanceOf(wat, base) {\n  try {\n    return wat instanceof base;\n  } catch (_e) {\n    return false;\n  }\n}\n\nexport { isDOMError, isDOMException, isElement, isError, isErrorEvent, isEvent, isInstanceOf, isNaN, isPlainObject, isPrimitive, isRegExp, isString, isSyntheticEvent, isThenable };\n//# sourceMappingURL=is.js.map\n","/** Internal global with common properties and Sentry extensions  */\n\n// The code below for 'isGlobalObj' and 'GLOBAL_OBJ' was copied from core-js before modification\n// https://github.com/zloirock/core-js/blob/1b944df55282cdc99c90db5f49eb0b6eda2cc0a3/packages/core-js/internals/global.js\n// core-js has the following licence:\n//\n// Copyright (c) 2014-2022 Denis Pushkarev\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/** Returns 'obj' if it's the global object, otherwise returns undefined */\nfunction isGlobalObj(obj) {\n  return obj && obj.Math == Math ? obj : undefined;\n}\n\n/** Get's the global object for the current JavaScript runtime */\nconst GLOBAL_OBJ =\n  (typeof globalThis == 'object' && isGlobalObj(globalThis)) ||\n  // eslint-disable-next-line no-restricted-globals\n  (typeof window == 'object' && isGlobalObj(window)) ||\n  (typeof self == 'object' && isGlobalObj(self)) ||\n  (typeof global == 'object' && isGlobalObj(global)) ||\n  (function () {\n    return this;\n  })() ||\n  {};\n\n/**\n * @deprecated Use GLOBAL_OBJ instead or WINDOW from @sentry/browser. This will be removed in v8\n */\nfunction getGlobalObject() {\n  return GLOBAL_OBJ ;\n}\n\n/**\n * Returns a global singleton contained in the global `__SENTRY__` object.\n *\n * If the singleton doesn't already exist in `__SENTRY__`, it will be created using the given factory\n * function and added to the `__SENTRY__` object.\n *\n * @param name name of the global singleton on __SENTRY__\n * @param creator creator Factory function to create the singleton if it doesn't already exist on `__SENTRY__`\n * @param obj (Optional) The global object on which to look for `__SENTRY__`, if not `GLOBAL_OBJ`'s return value\n * @returns the singleton\n */\nfunction getGlobalSingleton(name, creator, obj) {\n  const gbl = (obj || GLOBAL_OBJ) ;\n  const __SENTRY__ = (gbl.__SENTRY__ = gbl.__SENTRY__ || {});\n  const singleton = __SENTRY__[name] || (__SENTRY__[name] = creator());\n  return singleton;\n}\n\nexport { GLOBAL_OBJ, getGlobalObject, getGlobalSingleton };\n//# sourceMappingURL=worldwide.js.map\n","import { isString } from './is.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\nconst DEFAULT_MAX_STRING_LENGTH = 80;\n\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nfunction htmlTreeAsString(\n  elem,\n  options = {},\n) {\n\n  // try/catch both:\n  // - accessing event.target (see getsentry/raven-js#838, #768)\n  // - `htmlTreeAsString` because it's complex, and just accessing the DOM incorrectly\n  // - can throw an exception in some circumstances.\n  try {\n    let currentElem = elem ;\n    const MAX_TRAVERSE_HEIGHT = 5;\n    const out = [];\n    let height = 0;\n    let len = 0;\n    const separator = ' > ';\n    const sepLength = separator.length;\n    let nextStr;\n    const keyAttrs = Array.isArray(options) ? options : options.keyAttrs;\n    const maxStringLength = (!Array.isArray(options) && options.maxStringLength) || DEFAULT_MAX_STRING_LENGTH;\n\n    while (currentElem && height++ < MAX_TRAVERSE_HEIGHT) {\n      nextStr = _htmlElementAsString(currentElem, keyAttrs);\n      // bail out if\n      // - nextStr is the 'html' element\n      // - the length of the string that would be created exceeds maxStringLength\n      //   (ignore this limit if we are on the first iteration)\n      if (nextStr === 'html' || (height > 1 && len + out.length * sepLength + nextStr.length >= maxStringLength)) {\n        break;\n      }\n\n      out.push(nextStr);\n\n      len += nextStr.length;\n      currentElem = currentElem.parentNode;\n    }\n\n    return out.reverse().join(separator);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n * @returns generated DOM path\n */\nfunction _htmlElementAsString(el, keyAttrs) {\n  const elem = el\n\n;\n\n  const out = [];\n  let className;\n  let classes;\n  let key;\n  let attr;\n  let i;\n\n  if (!elem || !elem.tagName) {\n    return '';\n  }\n\n  out.push(elem.tagName.toLowerCase());\n\n  // Pairs of attribute keys defined in `serializeAttribute` and their values on element.\n  const keyAttrPairs =\n    keyAttrs && keyAttrs.length\n      ? keyAttrs.filter(keyAttr => elem.getAttribute(keyAttr)).map(keyAttr => [keyAttr, elem.getAttribute(keyAttr)])\n      : null;\n\n  if (keyAttrPairs && keyAttrPairs.length) {\n    keyAttrPairs.forEach(keyAttrPair => {\n      out.push(`[${keyAttrPair[0]}=\"${keyAttrPair[1]}\"]`);\n    });\n  } else {\n    if (elem.id) {\n      out.push(`#${elem.id}`);\n    }\n\n    // eslint-disable-next-line prefer-const\n    className = elem.className;\n    if (className && isString(className)) {\n      classes = className.split(/\\s+/);\n      for (i = 0; i < classes.length; i++) {\n        out.push(`.${classes[i]}`);\n      }\n    }\n  }\n  const allowedAttrs = ['type', 'name', 'title', 'alt'];\n  for (i = 0; i < allowedAttrs.length; i++) {\n    key = allowedAttrs[i];\n    attr = elem.getAttribute(key);\n    if (attr) {\n      out.push(`[${key}=\"${attr}\"]`);\n    }\n  }\n  return out.join('');\n}\n\n/**\n * A safe form of location.href\n */\nfunction getLocationHref() {\n  try {\n    return WINDOW.document.location.href;\n  } catch (oO) {\n    return '';\n  }\n}\n\n/**\n * Gets a DOM element by using document.querySelector.\n *\n * This wrapper will first check for the existance of the function before\n * actually calling it so that we don't have to take care of this check,\n * every time we want to access the DOM.\n *\n * Reason: DOM/querySelector is not available in all environments.\n *\n * We have to cast to any because utils can be consumed by a variety of environments,\n * and we don't want to break TS users. If you know what element will be selected by\n * `document.querySelector`, specify it as part of the generic call. For example,\n * `const element = getDomElement<Element>('selector');`\n *\n * @param selector the selector string passed on to document.querySelector\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getDomElement(selector) {\n  if (WINDOW.document && WINDOW.document.querySelector) {\n    return WINDOW.document.querySelector(selector) ;\n  }\n  return null;\n}\n\nexport { getDomElement, getLocationHref, htmlTreeAsString };\n//# sourceMappingURL=browser.js.map\n","/** An error emitted by Sentry SDKs and related utilities. */\nclass SentryError extends Error {\n  /** Display name of this error instance. */\n\n   constructor( message, logLevel = 'warn') {\n    super(message);this.message = message;;\n\n    this.name = new.target.prototype.constructor.name;\n    // This sets the prototype to be `Error`, not `SentryError`. It's unclear why we do this, but commenting this line\n    // out causes various (seemingly totally unrelated) playwright tests consistently time out. FYI, this makes\n    // instances of `SentryError` fail `obj instanceof SentryError` checks.\n    Object.setPrototypeOf(this, new.target.prototype);\n    this.logLevel = logLevel;\n  }\n}\n\nexport { SentryError };\n//# sourceMappingURL=error.js.map\n","import { SentryError } from './error.js';\n\n/** Regular expression used to parse a Dsn. */\nconst DSN_REGEX = /^(?:(\\w+):)\\/\\/(?:(\\w+)(?::(\\w+)?)?@)([\\w.-]+)(?::(\\d+))?\\/(.+)/;\n\nfunction isValidProtocol(protocol) {\n  return protocol === 'http' || protocol === 'https';\n}\n\n/**\n * Renders the string representation of this Dsn.\n *\n * By default, this will render the public representation without the password\n * component. To get the deprecated private representation, set `withPassword`\n * to true.\n *\n * @param withPassword When set to true, the password will be included.\n */\nfunction dsnToString(dsn, withPassword = false) {\n  const { host, path, pass, port, projectId, protocol, publicKey } = dsn;\n  return (\n    `${protocol}://${publicKey}${withPassword && pass ? `:${pass}` : ''}` +\n    `@${host}${port ? `:${port}` : ''}/${path ? `${path}/` : path}${projectId}`\n  );\n}\n\n/**\n * Parses a Dsn from a given string.\n *\n * @param str A Dsn as string\n * @returns Dsn as DsnComponents\n */\nfunction dsnFromString(str) {\n  const match = DSN_REGEX.exec(str);\n\n  if (!match) {\n    throw new SentryError(`Invalid Sentry Dsn: ${str}`);\n  }\n\n  const [protocol, publicKey, pass = '', host, port = '', lastPath] = match.slice(1);\n  let path = '';\n  let projectId = lastPath;\n\n  const split = projectId.split('/');\n  if (split.length > 1) {\n    path = split.slice(0, -1).join('/');\n    projectId = split.pop() ;\n  }\n\n  if (projectId) {\n    const projectMatch = projectId.match(/^\\d+/);\n    if (projectMatch) {\n      projectId = projectMatch[0];\n    }\n  }\n\n  return dsnFromComponents({ host, pass, path, projectId, port, protocol: protocol , publicKey });\n}\n\nfunction dsnFromComponents(components) {\n  return {\n    protocol: components.protocol,\n    publicKey: components.publicKey || '',\n    pass: components.pass || '',\n    host: components.host,\n    port: components.port || '',\n    path: components.path || '',\n    projectId: components.projectId,\n  };\n}\n\nfunction validateDsn(dsn) {\n  if (!(typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n    return;\n  }\n\n  const { port, projectId, protocol } = dsn;\n\n  const requiredComponents = ['protocol', 'publicKey', 'host', 'projectId'];\n  requiredComponents.forEach(component => {\n    if (!dsn[component]) {\n      throw new SentryError(`Invalid Sentry Dsn: ${component} missing`);\n    }\n  });\n\n  if (!projectId.match(/^\\d+$/)) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid projectId ${projectId}`);\n  }\n\n  if (!isValidProtocol(protocol)) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid protocol ${protocol}`);\n  }\n\n  if (port && isNaN(parseInt(port, 10))) {\n    throw new SentryError(`Invalid Sentry Dsn: Invalid port ${port}`);\n  }\n\n  return true;\n}\n\n/** The Sentry Dsn, identifying a Sentry instance and project. */\nfunction makeDsn(from) {\n  const components = typeof from === 'string' ? dsnFromString(from) : dsnFromComponents(from);\n  validateDsn(components);\n  return components;\n}\n\nexport { dsnFromString, dsnToString, makeDsn };\n//# sourceMappingURL=dsn.js.map\n","import { GLOBAL_OBJ, getGlobalSingleton } from './worldwide.js';\n\n/** Prefix for logging strings */\nconst PREFIX = 'Sentry Logger ';\n\nconst CONSOLE_LEVELS = ['debug', 'info', 'warn', 'error', 'log', 'assert', 'trace'] ;\n\n/**\n * Temporarily disable sentry console instrumentations.\n *\n * @param callback The function to run against the original `console` messages\n * @returns The results of the callback\n */\nfunction consoleSandbox(callback) {\n  if (!('console' in GLOBAL_OBJ)) {\n    return callback();\n  }\n\n  const originalConsole = GLOBAL_OBJ.console ;\n  const wrappedLevels = {};\n\n  // Restore all wrapped console methods\n  CONSOLE_LEVELS.forEach(level => {\n    // TODO(v7): Remove this check as it's only needed for Node 6\n    const originalWrappedFunc =\n      originalConsole[level] && (originalConsole[level] ).__sentry_original__;\n    if (level in originalConsole && originalWrappedFunc) {\n      wrappedLevels[level] = originalConsole[level] ;\n      originalConsole[level] = originalWrappedFunc ;\n    }\n  });\n\n  try {\n    return callback();\n  } finally {\n    // Revert restoration to wrapped state\n    Object.keys(wrappedLevels).forEach(level => {\n      originalConsole[level] = wrappedLevels[level ];\n    });\n  }\n}\n\nfunction makeLogger() {\n  let enabled = false;\n  const logger = {\n    enable: () => {\n      enabled = true;\n    },\n    disable: () => {\n      enabled = false;\n    },\n  };\n\n  if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n    CONSOLE_LEVELS.forEach(name => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      logger[name] = (...args) => {\n        if (enabled) {\n          consoleSandbox(() => {\n            GLOBAL_OBJ.console[name](`${PREFIX}[${name}]:`, ...args);\n          });\n        }\n      };\n    });\n  } else {\n    CONSOLE_LEVELS.forEach(name => {\n      logger[name] = () => undefined;\n    });\n  }\n\n  return logger ;\n}\n\n// Ensure we only have a single logger instance, even if multiple versions of @sentry/utils are being used\nlet logger;\nif ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n  logger = getGlobalSingleton('logger', makeLogger);\n} else {\n  logger = makeLogger();\n}\n\nexport { CONSOLE_LEVELS, consoleSandbox, logger };\n//# sourceMappingURL=logger.js.map\n","import { isString, isRegExp } from './is.js';\n\n/**\n * Truncates given string to the maximum characters count\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string (0 = unlimited)\n * @returns string Encoded\n */\nfunction truncate(str, max = 0) {\n  if (typeof str !== 'string' || max === 0) {\n    return str;\n  }\n  return str.length <= max ? str : `${str.substr(0, max)}...`;\n}\n\n/**\n * This is basically just `trim_line` from\n * https://github.com/getsentry/sentry/blob/master/src/sentry/lang/javascript/processor.py#L67\n *\n * @param str An object that contains serializable values\n * @param max Maximum number of characters in truncated string\n * @returns string Encoded\n */\nfunction snipLine(line, colno) {\n  let newLine = line;\n  const lineLength = newLine.length;\n  if (lineLength <= 150) {\n    return newLine;\n  }\n  if (colno > lineLength) {\n    // eslint-disable-next-line no-param-reassign\n    colno = lineLength;\n  }\n\n  let start = Math.max(colno - 60, 0);\n  if (start < 5) {\n    start = 0;\n  }\n\n  let end = Math.min(start + 140, lineLength);\n  if (end > lineLength - 5) {\n    end = lineLength;\n  }\n  if (end === lineLength) {\n    start = Math.max(end - 140, 0);\n  }\n\n  newLine = newLine.slice(start, end);\n  if (start > 0) {\n    newLine = `'{snip} ${newLine}`;\n  }\n  if (end < lineLength) {\n    newLine += ' {snip}';\n  }\n\n  return newLine;\n}\n\n/**\n * Join values in array\n * @param input array of values to be joined together\n * @param delimiter string to be placed in-between values\n * @returns Joined values\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction safeJoin(input, delimiter) {\n  if (!Array.isArray(input)) {\n    return '';\n  }\n\n  const output = [];\n  // eslint-disable-next-line @typescript-eslint/prefer-for-of\n  for (let i = 0; i < input.length; i++) {\n    const value = input[i];\n    try {\n      output.push(String(value));\n    } catch (e) {\n      output.push('[value cannot be serialized]');\n    }\n  }\n\n  return output.join(delimiter);\n}\n\n/**\n * Checks if the given value matches a regex or string\n *\n * @param value The string to test\n * @param pattern Either a regex or a string against which `value` will be matched\n * @param requireExactStringMatch If true, `value` must match `pattern` exactly. If false, `value` will match\n * `pattern` if it contains `pattern`. Only applies to string-type patterns.\n */\nfunction isMatchingPattern(\n  value,\n  pattern,\n  requireExactStringMatch = false,\n) {\n  if (!isString(value)) {\n    return false;\n  }\n\n  if (isRegExp(pattern)) {\n    return pattern.test(value);\n  }\n  if (isString(pattern)) {\n    return requireExactStringMatch ? value === pattern : value.includes(pattern);\n  }\n\n  return false;\n}\n\n/**\n * Test the given string against an array of strings and regexes. By default, string matching is done on a\n * substring-inclusion basis rather than a strict equality basis\n *\n * @param testString The string to test\n * @param patterns The patterns against which to test the string\n * @param requireExactStringMatch If true, `testString` must match one of the given string patterns exactly in order to\n * count. If false, `testString` will match a string pattern if it contains that pattern.\n * @returns\n */\nfunction stringMatchesSomePattern(\n  testString,\n  patterns = [],\n  requireExactStringMatch = false,\n) {\n  return patterns.some(pattern => isMatchingPattern(testString, pattern, requireExactStringMatch));\n}\n\n/**\n * Given a string, escape characters which have meaning in the regex grammar, such that the result is safe to feed to\n * `new RegExp()`.\n *\n * Based on https://github.com/sindresorhus/escape-string-regexp. Vendored to a) reduce the size by skipping the runtime\n * type-checking, and b) ensure it gets down-compiled for old versions of Node (the published package only supports Node\n * 12+).\n *\n * @param regexString The string to escape\n * @returns An version of the string with all special regex characters escaped\n */\nfunction escapeStringForRegex(regexString) {\n  // escape the hyphen separately so we can also replace it with a unicode literal hyphen, to avoid the problems\n  // discussed in https://github.com/sindresorhus/escape-string-regexp/issues/20.\n  return regexString.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&').replace(/-/g, '\\\\x2d');\n}\n\nexport { escapeStringForRegex, isMatchingPattern, safeJoin, snipLine, stringMatchesSomePattern, truncate };\n//# sourceMappingURL=string.js.map\n","import { htmlTreeAsString } from './browser.js';\nimport { isError, isEvent, isInstanceOf, isElement, isPlainObject, isPrimitive } from './is.js';\nimport { truncate } from './string.js';\n\n/**\n * Replace a method in an object with a wrapped version of itself.\n *\n * @param source An object that contains a method to be wrapped.\n * @param name The name of the method to be wrapped.\n * @param replacementFactory A higher-order function that takes the original version of the given method and returns a\n * wrapped version. Note: The function returned by `replacementFactory` needs to be a non-arrow function, in order to\n * preserve the correct value of `this`, and the original method must be called using `origMethod.call(this, <other\n * args>)` or `origMethod.apply(this, [<other args>])` (rather than being called directly), again to preserve `this`.\n * @returns void\n */\nfunction fill(source, name, replacementFactory) {\n  if (!(name in source)) {\n    return;\n  }\n\n  const original = source[name] ;\n  const wrapped = replacementFactory(original) ;\n\n  // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work\n  // otherwise it'll throw \"TypeError: Object.defineProperties called on non-object\"\n  if (typeof wrapped === 'function') {\n    try {\n      markFunctionWrapped(wrapped, original);\n    } catch (_Oo) {\n      // This can throw if multiple fill happens on a global object like XMLHttpRequest\n      // Fixes https://github.com/getsentry/sentry-javascript/issues/2043\n    }\n  }\n\n  source[name] = wrapped;\n}\n\n/**\n * Defines a non-enumerable property on the given object.\n *\n * @param obj The object on which to set the property\n * @param name The name of the property to be set\n * @param value The value to which to set the property\n */\nfunction addNonEnumerableProperty(obj, name, value) {\n  Object.defineProperty(obj, name, {\n    // enumerable: false, // the default, so we can save on bundle size by not explicitly setting it\n    value: value,\n    writable: true,\n    configurable: true,\n  });\n}\n\n/**\n * Remembers the original function on the wrapped function and\n * patches up the prototype.\n *\n * @param wrapped the wrapper function\n * @param original the original function that gets wrapped\n */\nfunction markFunctionWrapped(wrapped, original) {\n  const proto = original.prototype || {};\n  wrapped.prototype = original.prototype = proto;\n  addNonEnumerableProperty(wrapped, '__sentry_original__', original);\n}\n\n/**\n * This extracts the original function if available.  See\n * `markFunctionWrapped` for more information.\n *\n * @param func the function to unwrap\n * @returns the unwrapped version of the function if available.\n */\nfunction getOriginalFunction(func) {\n  return func.__sentry_original__;\n}\n\n/**\n * Encodes given object into url-friendly format\n *\n * @param object An object that contains serializable values\n * @returns string Encoded\n */\nfunction urlEncode(object) {\n  return Object.keys(object)\n    .map(key => `${encodeURIComponent(key)}=${encodeURIComponent(object[key])}`)\n    .join('&');\n}\n\n/**\n * Transforms any `Error` or `Event` into a plain object with all of their enumerable properties, and some of their\n * non-enumerable properties attached.\n *\n * @param value Initial source that we have to transform in order for it to be usable by the serializer\n * @returns An Event or Error turned into an object - or the value argurment itself, when value is neither an Event nor\n *  an Error.\n */\nfunction convertToPlainObject(\n  value,\n)\n\n {\n  if (isError(value)) {\n    return {\n      message: value.message,\n      name: value.name,\n      stack: value.stack,\n      ...getOwnProperties(value),\n    };\n  } else if (isEvent(value)) {\n    const newObj\n\n = {\n      type: value.type,\n      target: serializeEventTarget(value.target),\n      currentTarget: serializeEventTarget(value.currentTarget),\n      ...getOwnProperties(value),\n    };\n\n    if (typeof CustomEvent !== 'undefined' && isInstanceOf(value, CustomEvent)) {\n      newObj.detail = value.detail;\n    }\n\n    return newObj;\n  } else {\n    return value;\n  }\n}\n\n/** Creates a string representation of the target of an `Event` object */\nfunction serializeEventTarget(target) {\n  try {\n    return isElement(target) ? htmlTreeAsString(target) : Object.prototype.toString.call(target);\n  } catch (_oO) {\n    return '<unknown>';\n  }\n}\n\n/** Filters out all but an object's own properties */\nfunction getOwnProperties(obj) {\n  if (typeof obj === 'object' && obj !== null) {\n    const extractedProps = {};\n    for (const property in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, property)) {\n        extractedProps[property] = (obj )[property];\n      }\n    }\n    return extractedProps;\n  } else {\n    return {};\n  }\n}\n\n/**\n * Given any captured exception, extract its keys and create a sorted\n * and truncated list that will be used inside the event message.\n * eg. `Non-error exception captured with keys: foo, bar, baz`\n */\nfunction extractExceptionKeysForMessage(exception, maxLength = 40) {\n  const keys = Object.keys(convertToPlainObject(exception));\n  keys.sort();\n\n  if (!keys.length) {\n    return '[object has no keys]';\n  }\n\n  if (keys[0].length >= maxLength) {\n    return truncate(keys[0], maxLength);\n  }\n\n  for (let includedKeys = keys.length; includedKeys > 0; includedKeys--) {\n    const serialized = keys.slice(0, includedKeys).join(', ');\n    if (serialized.length > maxLength) {\n      continue;\n    }\n    if (includedKeys === keys.length) {\n      return serialized;\n    }\n    return truncate(serialized, maxLength);\n  }\n\n  return '';\n}\n\n/**\n * Given any object, return a new object having removed all fields whose value was `undefined`.\n * Works recursively on objects and arrays.\n *\n * Attention: This function keeps circular references in the returned object.\n */\nfunction dropUndefinedKeys(inputValue) {\n  // This map keeps track of what already visited nodes map to.\n  // Our Set - based memoBuilder doesn't work here because we want to the output object to have the same circular\n  // references as the input object.\n  const memoizationMap = new Map();\n\n  // This function just proxies `_dropUndefinedKeys` to keep the `memoBuilder` out of this function's API\n  return _dropUndefinedKeys(inputValue, memoizationMap);\n}\n\nfunction _dropUndefinedKeys(inputValue, memoizationMap) {\n  if (isPlainObject(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the object it was mapped to in the new object\n    const memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    const returnValue = {};\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    for (const key of Object.keys(inputValue)) {\n      if (typeof inputValue[key] !== 'undefined') {\n        returnValue[key] = _dropUndefinedKeys(inputValue[key], memoizationMap);\n      }\n    }\n\n    return returnValue ;\n  }\n\n  if (Array.isArray(inputValue)) {\n    // If this node has already been visited due to a circular reference, return the array it was mapped to in the new object\n    const memoVal = memoizationMap.get(inputValue);\n    if (memoVal !== undefined) {\n      return memoVal ;\n    }\n\n    const returnValue = [];\n    // Store the mapping of this value in case we visit it again, in case of circular data\n    memoizationMap.set(inputValue, returnValue);\n\n    inputValue.forEach((item) => {\n      returnValue.push(_dropUndefinedKeys(item, memoizationMap));\n    });\n\n    return returnValue ;\n  }\n\n  return inputValue;\n}\n\n/**\n * Ensure that something is an object.\n *\n * Turns `undefined` and `null` into `String`s and all other primitives into instances of their respective wrapper\n * classes (String, Boolean, Number, etc.). Acts as the identity function on non-primitives.\n *\n * @param wat The subject of the objectification\n * @returns A version of `wat` which can safely be used with `Object` class methods\n */\nfunction objectify(wat) {\n  let objectified;\n  switch (true) {\n    case wat === undefined || wat === null:\n      objectified = new String(wat);\n      break;\n\n    // Though symbols and bigints do have wrapper classes (`Symbol` and `BigInt`, respectively), for whatever reason\n    // those classes don't have constructors which can be used with the `new` keyword. We therefore need to cast each as\n    // an object in order to wrap it.\n    case typeof wat === 'symbol' || typeof wat === 'bigint':\n      objectified = Object(wat);\n      break;\n\n    // this will catch the remaining primitives: `String`, `Number`, and `Boolean`\n    case isPrimitive(wat):\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      objectified = new (wat ).constructor(wat);\n      break;\n\n    // by process of elimination, at this point we know that `wat` must already be an object\n    default:\n      objectified = wat;\n      break;\n  }\n  return objectified;\n}\n\nexport { addNonEnumerableProperty, convertToPlainObject, dropUndefinedKeys, extractExceptionKeysForMessage, fill, getOriginalFunction, markFunctionWrapped, objectify, urlEncode };\n//# sourceMappingURL=object.js.map\n","/**\n * Polyfill for the nullish coalescing operator (`??`).\n *\n * Note that the RHS is wrapped in a function so that if it's a computed value, that evaluation won't happen unless the\n * LHS evaluates to a nullish value, to mimic the operator's short-circuiting behavior.\n *\n * Adapted from Sucrase (https://github.com/alangpierce/sucrase)\n *\n * @param lhs The value of the expression to the left of the `??`\n * @param rhsFn A function returning the value of the expression to the right of the `??`\n * @returns The LHS value, unless it's `null` or `undefined`, in which case, the RHS value\n */\nfunction _nullishCoalesce(lhs, rhsFn) {\n  // by checking for loose equality to `null`, we catch both `null` and `undefined`\n  return lhs != null ? lhs : rhsFn();\n}\n\n// Sucrase version:\n// function _nullishCoalesce(lhs, rhsFn) {\n//   if (lhs != null) {\n//     return lhs;\n//   } else {\n//     return rhsFn();\n//   }\n// }\n\nexport { _nullishCoalesce };\n//# sourceMappingURL=_nullishCoalesce.js.map\n","/**\n * Polyfill for the optional chain operator, `?.`, given previous conversion of the expression into an array of values,\n * descriptors, and functions.\n *\n * Adapted from Sucrase (https://github.com/alangpierce/sucrase)\n * See https://github.com/alangpierce/sucrase/blob/265887868966917f3b924ce38dfad01fbab1329f/src/transformers/OptionalChainingNullishTransformer.ts#L15\n *\n * @param ops Array result of expression conversion\n * @returns The value of the expression\n */\nfunction _optionalChain(ops) {\n  let lastAccessLHS = undefined;\n  let value = ops[0];\n  let i = 1;\n  while (i < ops.length) {\n    const op = ops[i] ;\n    const fn = ops[i + 1] ;\n    i += 2;\n    // by checking for loose equality to `null`, we catch both `null` and `undefined`\n    if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n      // really we're meaning to return `undefined` as an actual value here, but it saves bytes not to write it\n      return;\n    }\n    if (op === 'access' || op === 'optionalAccess') {\n      lastAccessLHS = value;\n      value = fn(value);\n    } else if (op === 'call' || op === 'optionalCall') {\n      value = fn((...args) => (value ).call(lastAccessLHS, ...args));\n      lastAccessLHS = undefined;\n    }\n  }\n  return value;\n}\n\n// Sucrase version\n// function _optionalChain(ops) {\n//   let lastAccessLHS = undefined;\n//   let value = ops[0];\n//   let i = 1;\n//   while (i < ops.length) {\n//     const op = ops[i];\n//     const fn = ops[i + 1];\n//     i += 2;\n//     if ((op === 'optionalAccess' || op === 'optionalCall') && value == null) {\n//       return undefined;\n//     }\n//     if (op === 'access' || op === 'optionalAccess') {\n//       lastAccessLHS = value;\n//       value = fn(value);\n//     } else if (op === 'call' || op === 'optionalCall') {\n//       value = fn((...args) => value.call(lastAccessLHS, ...args));\n//       lastAccessLHS = undefined;\n//     }\n//   }\n//   return value;\n// }\n\nexport { _optionalChain };\n//# sourceMappingURL=_optionalChain.js.map\n","import { _optionalChain } from './buildPolyfills';\n\nconst STACKTRACE_LIMIT = 50;\n\n/**\n * Creates a stack parser with the supplied line parsers\n *\n * StackFrames are returned in the correct order for Sentry Exception\n * frames and with Sentry SDK internal frames removed from the top and bottom\n *\n */\nfunction createStackParser(...parsers) {\n  const sortedParsers = parsers.sort((a, b) => a[0] - b[0]).map(p => p[1]);\n\n  return (stack, skipFirst = 0) => {\n    const frames = [];\n\n    for (const line of stack.split('\\n').slice(skipFirst)) {\n      // https://github.com/getsentry/sentry-javascript/issues/5459\n      // Remove webpack (error: *) wrappers\n      const cleanedLine = line.replace(/\\(error: (.*)\\)/, '$1');\n\n      for (const parser of sortedParsers) {\n        const frame = parser(cleanedLine);\n\n        if (frame) {\n          frames.push(frame);\n          break;\n        }\n      }\n    }\n\n    return stripSentryFramesAndReverse(frames);\n  };\n}\n\n/**\n * Gets a stack parser implementation from Options.stackParser\n * @see Options\n *\n * If options contains an array of line parsers, it is converted into a parser\n */\nfunction stackParserFromStackParserOptions(stackParser) {\n  if (Array.isArray(stackParser)) {\n    return createStackParser(...stackParser);\n  }\n  return stackParser;\n}\n\n/**\n * @hidden\n */\nfunction stripSentryFramesAndReverse(stack) {\n  if (!stack.length) {\n    return [];\n  }\n\n  let localStack = stack;\n\n  const firstFrameFunction = localStack[0].function || '';\n  const lastFrameFunction = localStack[localStack.length - 1].function || '';\n\n  // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)\n  if (firstFrameFunction.indexOf('captureMessage') !== -1 || firstFrameFunction.indexOf('captureException') !== -1) {\n    localStack = localStack.slice(1);\n  }\n\n  // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)\n  if (lastFrameFunction.indexOf('sentryWrapped') !== -1) {\n    localStack = localStack.slice(0, -1);\n  }\n\n  // The frame where the crash happened, should be the last entry in the array\n  return localStack\n    .slice(0, STACKTRACE_LIMIT)\n    .map(frame => ({\n      ...frame,\n      filename: frame.filename || localStack[0].filename,\n      function: frame.function || '?',\n    }))\n    .reverse();\n}\n\nconst defaultFunctionName = '<anonymous>';\n\n/**\n * Safely extract function name from itself\n */\nfunction getFunctionName(fn) {\n  try {\n    if (!fn || typeof fn !== 'function') {\n      return defaultFunctionName;\n    }\n    return fn.name || defaultFunctionName;\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    return defaultFunctionName;\n  }\n}\n\n// eslint-disable-next-line complexity\nfunction node(getModule) {\n  const FILENAME_MATCH = /^\\s*[-]{4,}$/;\n  const FULL_MATCH = /at (?:async )?(?:(.+?)\\s+\\()?(?:(.+):(\\d+):(\\d+)?|([^)]+))\\)?/;\n\n  // eslint-disable-next-line complexity\n  return (line) => {\n    if (line.match(FILENAME_MATCH)) {\n      return {\n        filename: line,\n      };\n    }\n\n    const lineMatch = line.match(FULL_MATCH);\n    if (!lineMatch) {\n      return undefined;\n    }\n\n    let object;\n    let method;\n    let functionName;\n    let typeName;\n    let methodName;\n\n    if (lineMatch[1]) {\n      functionName = lineMatch[1];\n\n      let methodStart = functionName.lastIndexOf('.');\n      if (functionName[methodStart - 1] === '.') {\n        methodStart--;\n      }\n\n      if (methodStart > 0) {\n        object = functionName.substr(0, methodStart);\n        method = functionName.substr(methodStart + 1);\n        const objectEnd = object.indexOf('.Module');\n        if (objectEnd > 0) {\n          functionName = functionName.substr(objectEnd + 1);\n          object = object.substr(0, objectEnd);\n        }\n      }\n      typeName = undefined;\n    }\n\n    if (method) {\n      typeName = object;\n      methodName = method;\n    }\n\n    if (method === '<anonymous>') {\n      methodName = undefined;\n      functionName = undefined;\n    }\n\n    if (functionName === undefined) {\n      methodName = methodName || '<anonymous>';\n      functionName = typeName ? `${typeName}.${methodName}` : methodName;\n    }\n\n    const filename = _optionalChain([lineMatch, 'access', _ => _[2], 'optionalAccess', _2 => _2.startsWith, 'call', _3 => _3('file://')]) ? lineMatch[2].substr(7) : lineMatch[2];\n    const isNative = lineMatch[5] === 'native';\n    const isInternal =\n      isNative || (filename && !filename.startsWith('/') && !filename.startsWith('.') && filename.indexOf(':\\\\') !== 1);\n\n    // in_app is all that's not an internal Node function or a module within node_modules\n    // note that isNative appears to return true even for node core libraries\n    // see https://github.com/getsentry/raven-node/issues/176\n    const in_app = !isInternal && filename !== undefined && !filename.includes('node_modules/');\n\n    return {\n      filename,\n      module: _optionalChain([getModule, 'optionalCall', _4 => _4(filename)]),\n      function: functionName,\n      lineno: parseInt(lineMatch[3], 10) || undefined,\n      colno: parseInt(lineMatch[4], 10) || undefined,\n      in_app,\n    };\n  };\n}\n\n/**\n * Node.js stack line parser\n *\n * This is in @sentry/utils so it can be used from the Electron SDK in the browser for when `nodeIntegration == true`.\n * This allows it to be used without referencing or importing any node specific code which causes bundlers to complain\n */\nfunction nodeStackLineParser(getModule) {\n  return [90, node(getModule)];\n}\n\nexport { createStackParser, getFunctionName, nodeStackLineParser, stackParserFromStackParserOptions, stripSentryFramesAndReverse };\n//# sourceMappingURL=stacktrace.js.map\n","import { logger } from './logger.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * Tells whether current environment supports ErrorEvent objects\n * {@link supportsErrorEvent}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsErrorEvent() {\n  try {\n    new ErrorEvent('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMError objects\n * {@link supportsDOMError}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMError() {\n  try {\n    // Chrome: VM89:1 Uncaught TypeError: Failed to construct 'DOMError':\n    // 1 argument required, but only 0 present.\n    // @ts-ignore It really needs 1 argument, not 0.\n    new DOMError('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports DOMException objects\n * {@link supportsDOMException}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsDOMException() {\n  try {\n    new DOMException('');\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports Fetch API\n * {@link supportsFetch}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsFetch() {\n  if (!('fetch' in WINDOW)) {\n    return false;\n  }\n\n  try {\n    new Headers();\n    new Request('http://www.example.com');\n    new Response();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * isNativeFetch checks if the given function is a native implementation of fetch()\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isNativeFetch(func) {\n  return func && /^function fetch\\(\\)\\s+\\{\\s+\\[native code\\]\\s+\\}$/.test(func.toString());\n}\n\n/**\n * Tells whether current environment supports Fetch API natively\n * {@link supportsNativeFetch}.\n *\n * @returns true if `window.fetch` is natively implemented, false otherwise\n */\nfunction supportsNativeFetch() {\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  // Fast path to avoid DOM I/O\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  if (isNativeFetch(WINDOW.fetch)) {\n    return true;\n  }\n\n  // window.fetch is implemented, but is polyfilled or already wrapped (e.g: by a chrome extension)\n  // so create a \"pure\" iframe to see if that has native fetch\n  let result = false;\n  const doc = WINDOW.document;\n  // eslint-disable-next-line deprecation/deprecation\n  if (doc && typeof (doc.createElement ) === 'function') {\n    try {\n      const sandbox = doc.createElement('iframe');\n      sandbox.hidden = true;\n      doc.head.appendChild(sandbox);\n      if (sandbox.contentWindow && sandbox.contentWindow.fetch) {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        result = isNativeFetch(sandbox.contentWindow.fetch);\n      }\n      doc.head.removeChild(sandbox);\n    } catch (err) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', err);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Tells whether current environment supports ReportingObserver API\n * {@link supportsReportingObserver}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReportingObserver() {\n  return 'ReportingObserver' in WINDOW;\n}\n\n/**\n * Tells whether current environment supports Referrer Policy API\n * {@link supportsReferrerPolicy}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsReferrerPolicy() {\n  // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default'\n  // (see https://caniuse.com/#feat=referrer-policy),\n  // it doesn't. And it throws an exception instead of ignoring this parameter...\n  // REF: https://github.com/getsentry/raven-js/issues/1233\n\n  if (!supportsFetch()) {\n    return false;\n  }\n\n  try {\n    new Request('_', {\n      referrerPolicy: 'origin' ,\n    });\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Tells whether current environment supports History API\n * {@link supportsHistory}.\n *\n * @returns Answer to the given question.\n */\nfunction supportsHistory() {\n  // NOTE: in Chrome App environment, touching history.pushState, *even inside\n  //       a try/catch block*, will cause Chrome to output an error to console.error\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const chrome = (WINDOW ).chrome;\n  const isChromePackagedApp = chrome && chrome.app && chrome.app.runtime;\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n  const hasHistoryApi = 'history' in WINDOW && !!WINDOW.history.pushState && !!WINDOW.history.replaceState;\n\n  return !isChromePackagedApp && hasHistoryApi;\n}\n\nexport { isNativeFetch, supportsDOMError, supportsDOMException, supportsErrorEvent, supportsFetch, supportsHistory, supportsNativeFetch, supportsReferrerPolicy, supportsReportingObserver };\n//# sourceMappingURL=supports.js.map\n","import { isInstanceOf, isString } from './is.js';\nimport { logger, CONSOLE_LEVELS } from './logger.js';\nimport { fill } from './object.js';\nimport { getFunctionName } from './stacktrace.js';\nimport { supportsNativeFetch, supportsHistory } from './supports.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * Instrument native APIs to call handlers that can be used to create breadcrumbs, APM spans etc.\n *  - Console API\n *  - Fetch API\n *  - XHR API\n *  - History API\n *  - DOM API (click/typing)\n *  - Error API\n *  - UnhandledRejection API\n */\n\nconst handlers = {};\nconst instrumented = {};\n\n/** Instruments given API */\nfunction instrument(type) {\n  if (instrumented[type]) {\n    return;\n  }\n\n  instrumented[type] = true;\n\n  switch (type) {\n    case 'console':\n      instrumentConsole();\n      break;\n    case 'dom':\n      instrumentDOM();\n      break;\n    case 'xhr':\n      instrumentXHR();\n      break;\n    case 'fetch':\n      instrumentFetch();\n      break;\n    case 'history':\n      instrumentHistory();\n      break;\n    case 'error':\n      instrumentError();\n      break;\n    case 'unhandledrejection':\n      instrumentUnhandledRejection();\n      break;\n    default:\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('unknown instrumentation type:', type);\n      return;\n  }\n}\n\n/**\n * Add handler that will be called when given type of instrumentation triggers.\n * Use at your own risk, this might break without changelog notice, only used internally.\n * @hidden\n */\nfunction addInstrumentationHandler(type, callback) {\n  handlers[type] = handlers[type] || [];\n  (handlers[type] ).push(callback);\n  instrument(type);\n}\n\n/** JSDoc */\nfunction triggerHandlers(type, data) {\n  if (!type || !handlers[type]) {\n    return;\n  }\n\n  for (const handler of handlers[type] || []) {\n    try {\n      handler(data);\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.error(\n          `Error while triggering instrumentation handler.\\nType: ${type}\\nName: ${getFunctionName(handler)}\\nError:`,\n          e,\n        );\n    }\n  }\n}\n\n/** JSDoc */\nfunction instrumentConsole() {\n  if (!('console' in WINDOW)) {\n    return;\n  }\n\n  CONSOLE_LEVELS.forEach(function (level) {\n    if (!(level in WINDOW.console)) {\n      return;\n    }\n\n    fill(WINDOW.console, level, function (originalConsoleMethod) {\n      return function (...args) {\n        triggerHandlers('console', { args, level });\n\n        // this fails for some browsers. :(\n        if (originalConsoleMethod) {\n          originalConsoleMethod.apply(WINDOW.console, args);\n        }\n      };\n    });\n  });\n}\n\n/** JSDoc */\nfunction instrumentFetch() {\n  if (!supportsNativeFetch()) {\n    return;\n  }\n\n  fill(WINDOW, 'fetch', function (originalFetch) {\n    return function (...args) {\n      const handlerData = {\n        args,\n        fetchData: {\n          method: getFetchMethod(args),\n          url: getFetchUrl(args),\n        },\n        startTimestamp: Date.now(),\n      };\n\n      triggerHandlers('fetch', {\n        ...handlerData,\n      });\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      return originalFetch.apply(WINDOW, args).then(\n        (response) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            response,\n          });\n          return response;\n        },\n        (error) => {\n          triggerHandlers('fetch', {\n            ...handlerData,\n            endTimestamp: Date.now(),\n            error,\n          });\n          // NOTE: If you are a Sentry user, and you are seeing this stack frame,\n          //       it means the sentry.javascript SDK caught an error invoking your application code.\n          //       This is expected behavior and NOT indicative of a bug with sentry.javascript.\n          throw error;\n        },\n      );\n    };\n  });\n}\n\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/** Extract `method` from fetch call arguments */\nfunction getFetchMethod(fetchArgs = []) {\n  if ('Request' in WINDOW && isInstanceOf(fetchArgs[0], Request) && fetchArgs[0].method) {\n    return String(fetchArgs[0].method).toUpperCase();\n  }\n  if (fetchArgs[1] && fetchArgs[1].method) {\n    return String(fetchArgs[1].method).toUpperCase();\n  }\n  return 'GET';\n}\n\n/** Extract `url` from fetch call arguments */\nfunction getFetchUrl(fetchArgs = []) {\n  if (typeof fetchArgs[0] === 'string') {\n    return fetchArgs[0];\n  }\n  if ('Request' in WINDOW && isInstanceOf(fetchArgs[0], Request)) {\n    return fetchArgs[0].url;\n  }\n  return String(fetchArgs[0]);\n}\n/* eslint-enable @typescript-eslint/no-unsafe-member-access */\n\n/** JSDoc */\nfunction instrumentXHR() {\n  if (!('XMLHttpRequest' in WINDOW)) {\n    return;\n  }\n\n  const xhrproto = XMLHttpRequest.prototype;\n\n  fill(xhrproto, 'open', function (originalOpen) {\n    return function ( ...args) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      const xhr = this;\n      const url = args[1];\n      const xhrInfo = (xhr.__sentry_xhr__ = {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        method: isString(args[0]) ? args[0].toUpperCase() : args[0],\n        url: args[1],\n      });\n\n      // if Sentry key appears in URL, don't capture it as a request\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      if (isString(url) && xhrInfo.method === 'POST' && url.match(/sentry_key/)) {\n        xhr.__sentry_own_request__ = true;\n      }\n\n      const onreadystatechangeHandler = function () {\n        if (xhr.readyState === 4) {\n          try {\n            // touching statusCode in some platforms throws\n            // an exception\n            xhrInfo.status_code = xhr.status;\n          } catch (e) {\n            /* do nothing */\n          }\n\n          triggerHandlers('xhr', {\n            args,\n            endTimestamp: Date.now(),\n            startTimestamp: Date.now(),\n            xhr,\n          });\n        }\n      };\n\n      if ('onreadystatechange' in xhr && typeof xhr.onreadystatechange === 'function') {\n        fill(xhr, 'onreadystatechange', function (original) {\n          return function (...readyStateArgs) {\n            onreadystatechangeHandler();\n            return original.apply(xhr, readyStateArgs);\n          };\n        });\n      } else {\n        xhr.addEventListener('readystatechange', onreadystatechangeHandler);\n      }\n\n      return originalOpen.apply(xhr, args);\n    };\n  });\n\n  fill(xhrproto, 'send', function (originalSend) {\n    return function ( ...args) {\n      if (this.__sentry_xhr__ && args[0] !== undefined) {\n        this.__sentry_xhr__.body = args[0];\n      }\n\n      triggerHandlers('xhr', {\n        args,\n        startTimestamp: Date.now(),\n        xhr: this,\n      });\n\n      return originalSend.apply(this, args);\n    };\n  });\n}\n\nlet lastHref;\n\n/** JSDoc */\nfunction instrumentHistory() {\n  if (!supportsHistory()) {\n    return;\n  }\n\n  const oldOnPopState = WINDOW.onpopstate;\n  WINDOW.onpopstate = function ( ...args) {\n    const to = WINDOW.location.href;\n    // keep track of the current URL state, as we always receive only the updated state\n    const from = lastHref;\n    lastHref = to;\n    triggerHandlers('history', {\n      from,\n      to,\n    });\n    if (oldOnPopState) {\n      // Apparently this can throw in Firefox when incorrectly implemented plugin is installed.\n      // https://github.com/getsentry/sentry-javascript/issues/3344\n      // https://github.com/bugsnag/bugsnag-js/issues/469\n      try {\n        return oldOnPopState.apply(this, args);\n      } catch (_oO) {\n        // no-empty\n      }\n    }\n  };\n\n  /** @hidden */\n  function historyReplacementFunction(originalHistoryFunction) {\n    return function ( ...args) {\n      const url = args.length > 2 ? args[2] : undefined;\n      if (url) {\n        // coerce to string (this is what pushState does)\n        const from = lastHref;\n        const to = String(url);\n        // keep track of the current URL state, as we always receive only the updated state\n        lastHref = to;\n        triggerHandlers('history', {\n          from,\n          to,\n        });\n      }\n      return originalHistoryFunction.apply(this, args);\n    };\n  }\n\n  fill(WINDOW.history, 'pushState', historyReplacementFunction);\n  fill(WINDOW.history, 'replaceState', historyReplacementFunction);\n}\n\nconst debounceDuration = 1000;\nlet debounceTimerID;\nlet lastCapturedEvent;\n\n/**\n * Decide whether the current event should finish the debounce of previously captured one.\n * @param previous previously captured event\n * @param current event to be captured\n */\nfunction shouldShortcircuitPreviousDebounce(previous, current) {\n  // If there was no previous event, it should always be swapped for the new one.\n  if (!previous) {\n    return true;\n  }\n\n  // If both events have different type, then user definitely performed two separate actions. e.g. click + keypress.\n  if (previous.type !== current.type) {\n    return true;\n  }\n\n  try {\n    // If both events have the same type, it's still possible that actions were performed on different targets.\n    // e.g. 2 clicks on different buttons.\n    if (previous.target !== current.target) {\n      return true;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  // If both events have the same type _and_ same `target` (an element which triggered an event, _not necessarily_\n  // to which an event listener was attached), we treat them as the same action, as we want to capture\n  // only one breadcrumb. e.g. multiple clicks on the same button, or typing inside a user input box.\n  return false;\n}\n\n/**\n * Decide whether an event should be captured.\n * @param event event to be captured\n */\nfunction shouldSkipDOMEvent(event) {\n  // We are only interested in filtering `keypress` events for now.\n  if (event.type !== 'keypress') {\n    return false;\n  }\n\n  try {\n    const target = event.target ;\n\n    if (!target || !target.tagName) {\n      return true;\n    }\n\n    // Only consider keypress events on actual input elements. This will disregard keypresses targeting body\n    // e.g.tabbing through elements, hotkeys, etc.\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n      return false;\n    }\n  } catch (e) {\n    // just accessing `target` property can throw an exception in some rare circumstances\n    // see: https://github.com/getsentry/sentry-javascript/issues/838\n  }\n\n  return true;\n}\n\n/**\n * Wraps addEventListener to capture UI breadcrumbs\n * @param handler function that will be triggered\n * @param globalListener indicates whether event was captured by the global event listener\n * @returns wrapped breadcrumb events handler\n * @hidden\n */\nfunction makeDOMEventHandler(handler, globalListener = false) {\n  return (event) => {\n    // It's possible this handler might trigger multiple times for the same\n    // event (e.g. event propagation through node ancestors).\n    // Ignore if we've already captured that event.\n    if (!event || lastCapturedEvent === event) {\n      return;\n    }\n\n    // We always want to skip _some_ events.\n    if (shouldSkipDOMEvent(event)) {\n      return;\n    }\n\n    const name = event.type === 'keypress' ? 'input' : event.type;\n\n    // If there is no debounce timer, it means that we can safely capture the new event and store it for future comparisons.\n    if (debounceTimerID === undefined) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n    // If there is a debounce awaiting, see if the new event is different enough to treat it as a unique one.\n    // If that's the case, emit the previous event and store locally the newly-captured DOM event.\n    else if (shouldShortcircuitPreviousDebounce(lastCapturedEvent, event)) {\n      handler({\n        event: event,\n        name,\n        global: globalListener,\n      });\n      lastCapturedEvent = event;\n    }\n\n    // Start a new debounce timer that will prevent us from capturing multiple events that should be grouped together.\n    clearTimeout(debounceTimerID);\n    debounceTimerID = WINDOW.setTimeout(() => {\n      debounceTimerID = undefined;\n    }, debounceDuration);\n  };\n}\n\n/** JSDoc */\nfunction instrumentDOM() {\n  if (!('document' in WINDOW)) {\n    return;\n  }\n\n  // Make it so that any click or keypress that is unhandled / bubbled up all the way to the document triggers our dom\n  // handlers. (Normally we have only one, which captures a breadcrumb for each click or keypress.) Do this before\n  // we instrument `addEventListener` so that we don't end up attaching this handler twice.\n  const triggerDOMHandler = triggerHandlers.bind(null, 'dom');\n  const globalDOMEventHandler = makeDOMEventHandler(triggerDOMHandler, true);\n  WINDOW.document.addEventListener('click', globalDOMEventHandler, false);\n  WINDOW.document.addEventListener('keypress', globalDOMEventHandler, false);\n\n  // After hooking into click and keypress events bubbled up to `document`, we also hook into user-handled\n  // clicks & keypresses, by adding an event listener of our own to any element to which they add a listener. That\n  // way, whenever one of their handlers is triggered, ours will be, too. (This is needed because their handler\n  // could potentially prevent the event from bubbling up to our global listeners. This way, our handler are still\n  // guaranteed to fire at least once.)\n  ['EventTarget', 'Node'].forEach((target) => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    const proto = (WINDOW )[target] && (WINDOW )[target].prototype;\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, no-prototype-builtins\n    if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n      return;\n    }\n\n    fill(proto, 'addEventListener', function (originalAddEventListener) {\n      return function (\n\n        type,\n        listener,\n        options,\n      ) {\n        if (type === 'click' || type == 'keypress') {\n          try {\n            const el = this ;\n            const handlers = (el.__sentry_instrumentation_handlers__ = el.__sentry_instrumentation_handlers__ || {});\n            const handlerForType = (handlers[type] = handlers[type] || { refCount: 0 });\n\n            if (!handlerForType.handler) {\n              const handler = makeDOMEventHandler(triggerDOMHandler);\n              handlerForType.handler = handler;\n              originalAddEventListener.call(this, type, handler, options);\n            }\n\n            handlerForType.refCount++;\n          } catch (e) {\n            // Accessing dom properties is always fragile.\n            // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n          }\n        }\n\n        return originalAddEventListener.call(this, type, listener, options);\n      };\n    });\n\n    fill(\n      proto,\n      'removeEventListener',\n      function (originalRemoveEventListener) {\n        return function (\n\n          type,\n          listener,\n          options,\n        ) {\n          if (type === 'click' || type == 'keypress') {\n            try {\n              const el = this ;\n              const handlers = el.__sentry_instrumentation_handlers__ || {};\n              const handlerForType = handlers[type];\n\n              if (handlerForType) {\n                handlerForType.refCount--;\n                // If there are no longer any custom handlers of the current type on this element, we can remove ours, too.\n                if (handlerForType.refCount <= 0) {\n                  originalRemoveEventListener.call(this, type, handlerForType.handler, options);\n                  handlerForType.handler = undefined;\n                  delete handlers[type]; // eslint-disable-line @typescript-eslint/no-dynamic-delete\n                }\n\n                // If there are no longer any custom handlers of any type on this element, cleanup everything.\n                if (Object.keys(handlers).length === 0) {\n                  delete el.__sentry_instrumentation_handlers__;\n                }\n              }\n            } catch (e) {\n              // Accessing dom properties is always fragile.\n              // Also allows us to skip `addEventListenrs` calls with no proper `this` context.\n            }\n          }\n\n          return originalRemoveEventListener.call(this, type, listener, options);\n        };\n      },\n    );\n  });\n}\n\nlet _oldOnErrorHandler = null;\n/** JSDoc */\nfunction instrumentError() {\n  _oldOnErrorHandler = WINDOW.onerror;\n\n  WINDOW.onerror = function (msg, url, line, column, error) {\n    triggerHandlers('error', {\n      column,\n      error,\n      line,\n      msg,\n      url,\n    });\n\n    if (_oldOnErrorHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnErrorHandler.apply(this, arguments);\n    }\n\n    return false;\n  };\n}\n\nlet _oldOnUnhandledRejectionHandler = null;\n/** JSDoc */\nfunction instrumentUnhandledRejection() {\n  _oldOnUnhandledRejectionHandler = WINDOW.onunhandledrejection;\n\n  WINDOW.onunhandledrejection = function (e) {\n    triggerHandlers('unhandledrejection', e);\n\n    if (_oldOnUnhandledRejectionHandler) {\n      // eslint-disable-next-line prefer-rest-params\n      return _oldOnUnhandledRejectionHandler.apply(this, arguments);\n    }\n\n    return true;\n  };\n}\n\nexport { addInstrumentationHandler };\n//# sourceMappingURL=instrument.js.map\n","/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Helper to decycle json objects\n */\nfunction memoBuilder() {\n  const hasWeakSet = typeof WeakSet === 'function';\n  const inner = hasWeakSet ? new WeakSet() : [];\n  function memoize(obj) {\n    if (hasWeakSet) {\n      if (inner.has(obj)) {\n        return true;\n      }\n      inner.add(obj);\n      return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/prefer-for-of\n    for (let i = 0; i < inner.length; i++) {\n      const value = inner[i];\n      if (value === obj) {\n        return true;\n      }\n    }\n    inner.push(obj);\n    return false;\n  }\n\n  function unmemoize(obj) {\n    if (hasWeakSet) {\n      inner.delete(obj);\n    } else {\n      for (let i = 0; i < inner.length; i++) {\n        if (inner[i] === obj) {\n          inner.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n  return [memoize, unmemoize];\n}\n\nexport { memoBuilder };\n//# sourceMappingURL=memo.js.map\n","import { addNonEnumerableProperty } from './object.js';\nimport { snipLine } from './string.js';\nimport { GLOBAL_OBJ } from './worldwide.js';\n\n/**\n * UUID4 generator\n *\n * @returns string Generated UUID4.\n */\nfunction uuid4() {\n  const gbl = GLOBAL_OBJ ;\n  const crypto = gbl.crypto || gbl.msCrypto;\n\n  if (crypto && crypto.randomUUID) {\n    return crypto.randomUUID().replace(/-/g, '');\n  }\n\n  const getRandomByte =\n    crypto && crypto.getRandomValues ? () => crypto.getRandomValues(new Uint8Array(1))[0] : () => Math.random() * 16;\n\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n  // Concatenating the following numbers as strings results in '10000000100040008000100000000000'\n  return (([1e7] ) + 1e3 + 4e3 + 8e3 + 1e11).replace(/[018]/g, c =>\n    // eslint-disable-next-line no-bitwise\n    ((c ) ^ ((getRandomByte() & 15) >> ((c ) / 4))).toString(16),\n  );\n}\n\nfunction getFirstException(event) {\n  return event.exception && event.exception.values ? event.exception.values[0] : undefined;\n}\n\n/**\n * Extracts either message or type+value from an event that can be used for user-facing logs\n * @returns event's description\n */\nfunction getEventDescription(event) {\n  const { message, event_id: eventId } = event;\n  if (message) {\n    return message;\n  }\n\n  const firstException = getFirstException(event);\n  if (firstException) {\n    if (firstException.type && firstException.value) {\n      return `${firstException.type}: ${firstException.value}`;\n    }\n    return firstException.type || firstException.value || eventId || '<unknown>';\n  }\n  return eventId || '<unknown>';\n}\n\n/**\n * Adds exception values, type and value to an synthetic Exception.\n * @param event The event to modify.\n * @param value Value of the exception.\n * @param type Type of the exception.\n * @hidden\n */\nfunction addExceptionTypeValue(event, value, type) {\n  const exception = (event.exception = event.exception || {});\n  const values = (exception.values = exception.values || []);\n  const firstException = (values[0] = values[0] || {});\n  if (!firstException.value) {\n    firstException.value = value || '';\n  }\n  if (!firstException.type) {\n    firstException.type = type || 'Error';\n  }\n}\n\n/**\n * Adds exception mechanism data to a given event. Uses defaults if the second parameter is not passed.\n *\n * @param event The event to modify.\n * @param newMechanism Mechanism data to add to the event.\n * @hidden\n */\nfunction addExceptionMechanism(event, newMechanism) {\n  const firstException = getFirstException(event);\n  if (!firstException) {\n    return;\n  }\n\n  const defaultMechanism = { type: 'generic', handled: true };\n  const currentMechanism = firstException.mechanism;\n  firstException.mechanism = { ...defaultMechanism, ...currentMechanism, ...newMechanism };\n\n  if (newMechanism && 'data' in newMechanism) {\n    const mergedData = { ...(currentMechanism && currentMechanism.data), ...newMechanism.data };\n    firstException.mechanism.data = mergedData;\n  }\n}\n\n// https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string\nconst SEMVER_REGEXP =\n  /^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n\n/**\n * Represents Semantic Versioning object\n */\n\n/**\n * Parses input into a SemVer interface\n * @param input string representation of a semver version\n */\nfunction parseSemver(input) {\n  const match = input.match(SEMVER_REGEXP) || [];\n  const major = parseInt(match[1], 10);\n  const minor = parseInt(match[2], 10);\n  const patch = parseInt(match[3], 10);\n  return {\n    buildmetadata: match[5],\n    major: isNaN(major) ? undefined : major,\n    minor: isNaN(minor) ? undefined : minor,\n    patch: isNaN(patch) ? undefined : patch,\n    prerelease: match[4],\n  };\n}\n\n/**\n * This function adds context (pre/post/line) lines to the provided frame\n *\n * @param lines string[] containing all lines\n * @param frame StackFrame that will be mutated\n * @param linesOfContext number of context lines we want to add pre/post\n */\nfunction addContextToFrame(lines, frame, linesOfContext = 5) {\n  // When there is no line number in the frame, attaching context is nonsensical and will even break grouping\n  if (frame.lineno === undefined) {\n    return;\n  }\n\n  const maxLines = lines.length;\n  const sourceLine = Math.max(Math.min(maxLines, frame.lineno - 1), 0);\n\n  frame.pre_context = lines\n    .slice(Math.max(0, sourceLine - linesOfContext), sourceLine)\n    .map((line) => snipLine(line, 0));\n\n  frame.context_line = snipLine(lines[Math.min(maxLines - 1, sourceLine)], frame.colno || 0);\n\n  frame.post_context = lines\n    .slice(Math.min(sourceLine + 1, maxLines), sourceLine + 1 + linesOfContext)\n    .map((line) => snipLine(line, 0));\n}\n\n/**\n * Checks whether or not we've already captured the given exception (note: not an identical exception - the very object\n * in question), and marks it captured if not.\n *\n * This is useful because it's possible for an error to get captured by more than one mechanism. After we intercept and\n * record an error, we rethrow it (assuming we've intercepted it before it's reached the top-level global handlers), so\n * that we don't interfere with whatever effects the error might have had were the SDK not there. At that point, because\n * the error has been rethrown, it's possible for it to bubble up to some other code we've instrumented. If it's not\n * caught after that, it will bubble all the way up to the global handlers (which of course we also instrument). This\n * function helps us ensure that even if we encounter the same error more than once, we only record it the first time we\n * see it.\n *\n * Note: It will ignore primitives (always return `false` and not mark them as seen), as properties can't be set on\n * them. {@link: Object.objectify} can be used on exceptions to convert any that are primitives into their equivalent\n * object wrapper forms so that this check will always work. However, because we need to flag the exact object which\n * will get rethrown, and because that rethrowing happens outside of the event processing pipeline, the objectification\n * must be done before the exception captured.\n *\n * @param A thrown exception to check or flag as having been seen\n * @returns `true` if the exception has already been captured, `false` if not (with the side effect of marking it seen)\n */\nfunction checkOrSetAlreadyCaught(exception) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (exception && (exception ).__sentry_captured__) {\n    return true;\n  }\n\n  try {\n    // set it this way rather than by assignment so that it's not ennumerable and therefore isn't recorded by the\n    // `ExtraErrorData` integration\n    addNonEnumerableProperty(exception , '__sentry_captured__', true);\n  } catch (err) {\n    // `exception` is a primitive, so we can't mark it seen\n  }\n\n  return false;\n}\n\n/**\n * Checks whether the given input is already an array, and if it isn't, wraps it in one.\n *\n * @param maybeArray Input to turn into an array, if necessary\n * @returns The input, if already an array, or an array with the input as the only element, if not\n */\nfunction arrayify(maybeArray) {\n  return Array.isArray(maybeArray) ? maybeArray : [maybeArray];\n}\n\nexport { addContextToFrame, addExceptionMechanism, addExceptionTypeValue, arrayify, checkOrSetAlreadyCaught, getEventDescription, parseSemver, uuid4 };\n//# sourceMappingURL=misc.js.map\n","/*\n * This module exists for optimizations in the build process through rollup and terser.  We define some global\n * constants, which can be overridden during build. By guarding certain pieces of code with functions that return these\n * constants, we can control whether or not they appear in the final bundle. (Any code guarded by a false condition will\n * never run, and will hence be dropped during treeshaking.) The two primary uses for this are stripping out calls to\n * `logger` and preventing node-related code from appearing in browser bundles.\n *\n * Attention:\n * This file should not be used to define constants/flags that are intended to be used for tree-shaking conducted by\n * users. These fags should live in their respective packages, as we identified user tooling (specifically webpack)\n * having issues tree-shaking these constants across package boundaries.\n * An example for this is the __SENTRY_DEBUG__ constant. It is declared in each package individually because we want\n * users to be able to shake away expressions that it guards.\n */\n\n/**\n * Figures out if we're building a browser bundle.\n *\n * @returns true if this is a browser bundle build.\n */\nfunction isBrowserBundle() {\n  return typeof __SENTRY_BROWSER_BUNDLE__ !== 'undefined' && !!__SENTRY_BROWSER_BUNDLE__;\n}\n\nexport { isBrowserBundle };\n//# sourceMappingURL=env.js.map\n","import { isBrowserBundle } from './env.js';\n\n/**\n * NOTE: In order to avoid circular dependencies, if you add a function to this module and it needs to print something,\n * you must either a) use `console.log` rather than the logger, or b) put your function elsewhere.\n */\n\n/**\n * Checks whether we're in the Node.js or Browser environment\n *\n * @returns Answer to given question\n */\nfunction isNodeEnv() {\n  // explicitly check for browser bundles as those can be optimized statically\n  // by terser/rollup.\n  return (\n    !isBrowserBundle() &&\n    Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]'\n  );\n}\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param request The module path to resolve\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types, @typescript-eslint/no-explicit-any\nfunction dynamicRequire(mod, request) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return mod.require(request);\n}\n\n/**\n * Helper for dynamically loading module that should work with linked dependencies.\n * The problem is that we _should_ be using `require(require.resolve(moduleName, { paths: [cwd()] }))`\n * However it's _not possible_ to do that with Webpack, as it has to know all the dependencies during\n * build time. `require.resolve` is also not available in any other way, so we cannot create,\n * a fake helper like we do with `dynamicRequire`.\n *\n * We always prefer to use local package, thus the value is not returned early from each `try/catch` block.\n * That is to mimic the behavior of `require.resolve` exactly.\n *\n * @param moduleName module name to require\n * @returns possibly required module\n */\nfunction loadModule(moduleName) {\n  let mod;\n\n  try {\n    mod = dynamicRequire(module, moduleName);\n  } catch (e) {\n    // no-empty\n  }\n\n  try {\n    const { cwd } = dynamicRequire(module, 'process');\n    mod = dynamicRequire(module, `${cwd()}/node_modules/${moduleName}`) ;\n  } catch (e) {\n    // no-empty\n  }\n\n  return mod;\n}\n\nexport { dynamicRequire, isNodeEnv, loadModule };\n//# sourceMappingURL=node.js.map\n","import { isNaN, isSyntheticEvent } from './is.js';\nimport { memoBuilder } from './memo.js';\nimport { convertToPlainObject } from './object.js';\nimport { getFunctionName } from './stacktrace.js';\n\n/**\n * Recursively normalizes the given object.\n *\n * - Creates a copy to prevent original input mutation\n * - Skips non-enumerable properties\n * - When stringifying, calls `toJSON` if implemented\n * - Removes circular references\n * - Translates non-serializable values (`undefined`/`NaN`/functions) to serializable format\n * - Translates known global objects/classes to a string representations\n * - Takes care of `Error` object serialization\n * - Optionally limits depth of final output\n * - Optionally limits number of properties/elements included in any single object/array\n *\n * @param input The object to be normalized.\n * @param depth The max depth to which to normalize the object. (Anything deeper stringified whole.)\n * @param maxProperties The max number of elements or properties to be included in any single array or\n * object in the normallized output.\n * @returns A normalized version of the object, or `\"**non-serializable**\"` if any errors are thrown during normalization.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction normalize(input, depth = +Infinity, maxProperties = +Infinity) {\n  try {\n    // since we're at the outermost level, we don't provide a key\n    return visit('', input, depth, maxProperties);\n  } catch (err) {\n    return { ERROR: `**non-serializable** (${err})` };\n  }\n}\n\n/** JSDoc */\nfunction normalizeToSize(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  object,\n  // Default Node.js REPL depth\n  depth = 3,\n  // 100kB, as 200kB is max payload size, so half sounds reasonable\n  maxSize = 100 * 1024,\n) {\n  const normalized = normalize(object, depth);\n\n  if (jsonSize(normalized) > maxSize) {\n    return normalizeToSize(object, depth - 1, maxSize);\n  }\n\n  return normalized ;\n}\n\n/**\n * Visits a node to perform normalization on it\n *\n * @param key The key corresponding to the given node\n * @param value The node to be visited\n * @param depth Optional number indicating the maximum recursion depth\n * @param maxProperties Optional maximum number of properties/elements included in any single object/array\n * @param memo Optional Memo class handling decycling\n */\nfunction visit(\n  key,\n  value,\n  depth = +Infinity,\n  maxProperties = +Infinity,\n  memo = memoBuilder(),\n) {\n  const [memoize, unmemoize] = memo;\n\n  // Get the simple cases out of the way first\n  if (value === null || (['number', 'boolean', 'string'].includes(typeof value) && !isNaN(value))) {\n    return value ;\n  }\n\n  const stringified = stringifyValue(key, value);\n\n  // Anything we could potentially dig into more (objects or arrays) will have come back as `\"[object XXXX]\"`.\n  // Everything else will have already been serialized, so if we don't see that pattern, we're done.\n  if (!stringified.startsWith('[object ')) {\n    return stringified;\n  }\n\n  // From here on, we can assert that `value` is either an object or an array.\n\n  // Do not normalize objects that we know have already been normalized. As a general rule, the\n  // \"__sentry_skip_normalization__\" property should only be used sparingly and only should only be set on objects that\n  // have already been normalized.\n  if ((value )['__sentry_skip_normalization__']) {\n    return value ;\n  }\n\n  // We're also done if we've reached the max depth\n  if (depth === 0) {\n    // At this point we know `serialized` is a string of the form `\"[object XXXX]\"`. Clean it up so it's just `\"[XXXX]\"`.\n    return stringified.replace('object ', '');\n  }\n\n  // If we've already visited this branch, bail out, as it's circular reference. If not, note that we're seeing it now.\n  if (memoize(value)) {\n    return '[Circular ~]';\n  }\n\n  // If the value has a `toJSON` method, we call it to extract more information\n  const valueWithToJSON = value ;\n  if (valueWithToJSON && typeof valueWithToJSON.toJSON === 'function') {\n    try {\n      const jsonValue = valueWithToJSON.toJSON();\n      // We need to normalize the return value of `.toJSON()` in case it has circular references\n      return visit('', jsonValue, depth - 1, maxProperties, memo);\n    } catch (err) {\n      // pass (The built-in `toJSON` failed, but we can still try to do it ourselves)\n    }\n  }\n\n  // At this point we know we either have an object or an array, we haven't seen it before, and we're going to recurse\n  // because we haven't yet reached the max depth. Create an accumulator to hold the results of visiting each\n  // property/entry, and keep track of the number of items we add to it.\n  const normalized = (Array.isArray(value) ? [] : {}) ;\n  let numAdded = 0;\n\n  // Before we begin, convert`Error` and`Event` instances into plain objects, since some of each of their relevant\n  // properties are non-enumerable and otherwise would get missed.\n  const visitable = convertToPlainObject(value );\n\n  for (const visitKey in visitable) {\n    // Avoid iterating over fields in the prototype if they've somehow been exposed to enumeration.\n    if (!Object.prototype.hasOwnProperty.call(visitable, visitKey)) {\n      continue;\n    }\n\n    if (numAdded >= maxProperties) {\n      normalized[visitKey] = '[MaxProperties ~]';\n      break;\n    }\n\n    // Recursively visit all the child nodes\n    const visitValue = visitable[visitKey];\n    normalized[visitKey] = visit(visitKey, visitValue, depth - 1, maxProperties, memo);\n\n    numAdded++;\n  }\n\n  // Once we've visited all the branches, remove the parent from memo storage\n  unmemoize(value);\n\n  // Return accumulated values\n  return normalized;\n}\n\n/**\n * Stringify the given value. Handles various known special values and types.\n *\n * Not meant to be used on simple primitives which already have a string representation, as it will, for example, turn\n * the number 1231 into \"[Object Number]\", nor on `null`, as it will throw.\n *\n * @param value The value to stringify\n * @returns A stringified representation of the given value\n */\nfunction stringifyValue(\n  key,\n  // this type is a tiny bit of a cheat, since this function does handle NaN (which is technically a number), but for\n  // our internal use, it'll do\n  value,\n) {\n  try {\n    if (key === 'domain' && value && typeof value === 'object' && (value )._events) {\n      return '[Domain]';\n    }\n\n    if (key === 'domainEmitter') {\n      return '[DomainEmitter]';\n    }\n\n    // It's safe to use `global`, `window`, and `document` here in this manner, as we are asserting using `typeof` first\n    // which won't throw if they are not present.\n\n    if (typeof global !== 'undefined' && value === global) {\n      return '[Global]';\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    if (typeof window !== 'undefined' && value === window) {\n      return '[Window]';\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    if (typeof document !== 'undefined' && value === document) {\n      return '[Document]';\n    }\n\n    // React's SyntheticEvent thingy\n    if (isSyntheticEvent(value)) {\n      return '[SyntheticEvent]';\n    }\n\n    if (typeof value === 'number' && value !== value) {\n      return '[NaN]';\n    }\n\n    // this catches `undefined` (but not `null`, which is a primitive and can be serialized on its own)\n    if (value === void 0) {\n      return '[undefined]';\n    }\n\n    if (typeof value === 'function') {\n      return `[Function: ${getFunctionName(value)}]`;\n    }\n\n    if (typeof value === 'symbol') {\n      return `[${String(value)}]`;\n    }\n\n    // stringified BigInts are indistinguishable from regular numbers, so we need to label them to avoid confusion\n    if (typeof value === 'bigint') {\n      return `[BigInt: ${String(value)}]`;\n    }\n\n    // Now that we've knocked out all the special cases and the primitives, all we have left are objects. Simply casting\n    // them to strings means that instances of classes which haven't defined their `toStringTag` will just come out as\n    // `\"[object Object]\"`. If we instead look at the constructor's name (which is the same as the name of the class),\n    // we can make sure that only plain objects come out that way.\n    return `[object ${(Object.getPrototypeOf(value) ).constructor.name}]`;\n  } catch (err) {\n    return `**non-serializable** (${err})`;\n  }\n}\n\n/** Calculates bytes size of input string */\nfunction utf8Length(value) {\n  // eslint-disable-next-line no-bitwise\n  return ~-encodeURI(value).split(/%..|./).length;\n}\n\n/** Calculates bytes size of input object */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction jsonSize(value) {\n  return utf8Length(JSON.stringify(value));\n}\n\nexport { normalize, normalizeToSize, visit as walk };\n//# sourceMappingURL=normalize.js.map\n","import { isThenable } from './is.js';\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n\n/** SyncPromise internal states */\nvar States; (function (States) {\n  /** Pending */\n  const PENDING = 0; States[States[\"PENDING\"] = PENDING] = \"PENDING\";\n  /** Resolved / OK */\n  const RESOLVED = 1; States[States[\"RESOLVED\"] = RESOLVED] = \"RESOLVED\";\n  /** Rejected / Error */\n  const REJECTED = 2; States[States[\"REJECTED\"] = REJECTED] = \"REJECTED\";\n})(States || (States = {}));\n\n// Overloads so we can call resolvedSyncPromise without arguments and generic argument\n\n/**\n * Creates a resolved sync promise.\n *\n * @param value the value to resolve the promise with\n * @returns the resolved sync promise\n */\nfunction resolvedSyncPromise(value) {\n  return new SyncPromise(resolve => {\n    resolve(value);\n  });\n}\n\n/**\n * Creates a rejected sync promise.\n *\n * @param value the value to reject the promise with\n * @returns the rejected sync promise\n */\nfunction rejectedSyncPromise(reason) {\n  return new SyncPromise((_, reject) => {\n    reject(reason);\n  });\n}\n\n/**\n * Thenable class that behaves like a Promise and follows it's interface\n * but is not async internally\n */\nclass SyncPromise {\n   __init() {this._state = States.PENDING;}\n   __init2() {this._handlers = [];}\n\n   constructor(\n    executor,\n  ) {;SyncPromise.prototype.__init.call(this);SyncPromise.prototype.__init2.call(this);SyncPromise.prototype.__init3.call(this);SyncPromise.prototype.__init4.call(this);SyncPromise.prototype.__init5.call(this);SyncPromise.prototype.__init6.call(this);\n    try {\n      executor(this._resolve, this._reject);\n    } catch (e) {\n      this._reject(e);\n    }\n  }\n\n  /** JSDoc */\n   then(\n    onfulfilled,\n    onrejected,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      this._handlers.push([\n        false,\n        result => {\n          if (!onfulfilled) {\n            // TODO: \\_()_/\n            // TODO: FIXME\n            resolve(result );\n          } else {\n            try {\n              resolve(onfulfilled(result));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n        reason => {\n          if (!onrejected) {\n            reject(reason);\n          } else {\n            try {\n              resolve(onrejected(reason));\n            } catch (e) {\n              reject(e);\n            }\n          }\n        },\n      ]);\n      this._executeHandlers();\n    });\n  }\n\n  /** JSDoc */\n   catch(\n    onrejected,\n  ) {\n    return this.then(val => val, onrejected);\n  }\n\n  /** JSDoc */\n   finally(onfinally) {\n    return new SyncPromise((resolve, reject) => {\n      let val;\n      let isRejected;\n\n      return this.then(\n        value => {\n          isRejected = false;\n          val = value;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n        reason => {\n          isRejected = true;\n          val = reason;\n          if (onfinally) {\n            onfinally();\n          }\n        },\n      ).then(() => {\n        if (isRejected) {\n          reject(val);\n          return;\n        }\n\n        resolve(val );\n      });\n    });\n  }\n\n  /** JSDoc */\n    __init3() {this._resolve = (value) => {\n    this._setResult(States.RESOLVED, value);\n  };}\n\n  /** JSDoc */\n    __init4() {this._reject = (reason) => {\n    this._setResult(States.REJECTED, reason);\n  };}\n\n  /** JSDoc */\n    __init5() {this._setResult = (state, value) => {\n    if (this._state !== States.PENDING) {\n      return;\n    }\n\n    if (isThenable(value)) {\n      void (value ).then(this._resolve, this._reject);\n      return;\n    }\n\n    this._state = state;\n    this._value = value;\n\n    this._executeHandlers();\n  };}\n\n  /** JSDoc */\n    __init6() {this._executeHandlers = () => {\n    if (this._state === States.PENDING) {\n      return;\n    }\n\n    const cachedHandlers = this._handlers.slice();\n    this._handlers = [];\n\n    cachedHandlers.forEach(handler => {\n      if (handler[0]) {\n        return;\n      }\n\n      if (this._state === States.RESOLVED) {\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        handler[1](this._value );\n      }\n\n      if (this._state === States.REJECTED) {\n        handler[2](this._value);\n      }\n\n      handler[0] = true;\n    });\n  };}\n}\n\nexport { SyncPromise, rejectedSyncPromise, resolvedSyncPromise };\n//# sourceMappingURL=syncpromise.js.map\n","import { SentryError } from './error.js';\nimport { rejectedSyncPromise, SyncPromise, resolvedSyncPromise } from './syncpromise.js';\n\n/**\n * Creates an new PromiseBuffer object with the specified limit\n * @param limit max number of promises that can be stored in the buffer\n */\nfunction makePromiseBuffer(limit) {\n  const buffer = [];\n\n  function isReady() {\n    return limit === undefined || buffer.length < limit;\n  }\n\n  /**\n   * Remove a promise from the queue.\n   *\n   * @param task Can be any PromiseLike<T>\n   * @returns Removed promise.\n   */\n  function remove(task) {\n    return buffer.splice(buffer.indexOf(task), 1)[0];\n  }\n\n  /**\n   * Add a promise (representing an in-flight action) to the queue, and set it to remove itself on fulfillment.\n   *\n   * @param taskProducer A function producing any PromiseLike<T>; In previous versions this used to be `task:\n   *        PromiseLike<T>`, but under that model, Promises were instantly created on the call-site and their executor\n   *        functions therefore ran immediately. Thus, even if the buffer was full, the action still happened. By\n   *        requiring the promise to be wrapped in a function, we can defer promise creation until after the buffer\n   *        limit check.\n   * @returns The original promise.\n   */\n  function add(taskProducer) {\n    if (!isReady()) {\n      return rejectedSyncPromise(new SentryError('Not adding Promise because buffer limit was reached.'));\n    }\n\n    // start the task and add its promise to the queue\n    const task = taskProducer();\n    if (buffer.indexOf(task) === -1) {\n      buffer.push(task);\n    }\n    void task\n      .then(() => remove(task))\n      // Use `then(null, rejectionHandler)` rather than `catch(rejectionHandler)` so that we can use `PromiseLike`\n      // rather than `Promise`. `PromiseLike` doesn't have a `.catch` method, making its polyfill smaller. (ES5 didn't\n      // have promises, so TS has to polyfill when down-compiling.)\n      .then(null, () =>\n        remove(task).then(null, () => {\n          // We have to add another catch here because `remove()` starts a new promise chain.\n        }),\n      );\n    return task;\n  }\n\n  /**\n   * Wait for all promises in the queue to resolve or for timeout to expire, whichever comes first.\n   *\n   * @param timeout The time, in ms, after which to resolve to `false` if the queue is still non-empty. Passing `0` (or\n   * not passing anything) will make the promise wait as long as it takes for the queue to drain before resolving to\n   * `true`.\n   * @returns A promise which will resolve to `true` if the queue is already empty or drains before the timeout, and\n   * `false` otherwise\n   */\n  function drain(timeout) {\n    return new SyncPromise((resolve, reject) => {\n      let counter = buffer.length;\n\n      if (!counter) {\n        return resolve(true);\n      }\n\n      // wait for `timeout` ms and then resolve to `false` (if not cancelled first)\n      const capturedSetTimeout = setTimeout(() => {\n        if (timeout && timeout > 0) {\n          resolve(false);\n        }\n      }, timeout);\n\n      // if all promises resolve in time, cancel the timer and resolve to `true`\n      buffer.forEach(item => {\n        void resolvedSyncPromise(item).then(() => {\n          if (!--counter) {\n            clearTimeout(capturedSetTimeout);\n            resolve(true);\n          }\n        }, reject);\n      });\n    });\n  }\n\n  return {\n    $: buffer,\n    add,\n    drain,\n  };\n}\n\nexport { makePromiseBuffer };\n//# sourceMappingURL=promisebuffer.js.map\n","/**\n * Parses string form of URL into an object\n * // borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n * // intentionally using regex and not <a/> href parsing trick because React Native and other\n * // environments where DOM might not be available\n * @returns parsed URL object\n */\nfunction parseUrl(url)\n\n {\n  if (!url) {\n    return {};\n  }\n\n  const match = url.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/);\n\n  if (!match) {\n    return {};\n  }\n\n  // coerce to undefined values to empty string so we don't get 'undefined'\n  const query = match[6] || '';\n  const fragment = match[8] || '';\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment, // everything minus origin\n  };\n}\n\n/**\n * Strip the query string and fragment off of a given URL or path (if present)\n *\n * @param urlPath Full URL or path, including possible query string and/or fragment\n * @returns URL or path without query string or fragment\n */\nfunction stripUrlQueryAndFragment(urlPath) {\n  // eslint-disable-next-line no-useless-escape\n  return urlPath.split(/[\\?#]/, 1)[0];\n}\n\n/**\n * Returns number of URL segments of a passed string URL.\n */\nfunction getNumberOfUrlSegments(url) {\n  // split at '/' or at '\\/' to split regex urls correctly\n  return url.split(/\\\\?\\//).filter(s => s.length > 0 && s !== ',').length;\n}\n\nexport { getNumberOfUrlSegments, parseUrl, stripUrlQueryAndFragment };\n//# sourceMappingURL=url.js.map\n","// Note: Ideally the `SeverityLevel` type would be derived from `validSeverityLevels`, but that would mean either\n//\n// a) moving `validSeverityLevels` to `@sentry/types`,\n// b) moving the`SeverityLevel` type here, or\n// c) importing `validSeverityLevels` from here into `@sentry/types`.\n//\n// Option A would make `@sentry/types` a runtime dependency of `@sentry/utils` (not good), and options B and C would\n// create a circular dependency between `@sentry/types` and `@sentry/utils` (also not good). So a TODO accompanying the\n// type, reminding anyone who changes it to change this list also, will have to do.\n\nconst validSeverityLevels = ['fatal', 'error', 'warning', 'log', 'info', 'debug'];\n\n/**\n * Converts a string-based level into a member of the deprecated {@link Severity} enum.\n *\n * @deprecated `severityFromString` is deprecated. Please use `severityLevelFromString` instead.\n *\n * @param level String representation of Severity\n * @returns Severity\n */\nfunction severityFromString(level) {\n  return severityLevelFromString(level) ;\n}\n\n/**\n * Converts a string-based level into a `SeverityLevel`, normalizing it along the way.\n *\n * @param level String representation of desired `SeverityLevel`.\n * @returns The `SeverityLevel` corresponding to the given string, or 'log' if the string isn't a valid level.\n */\nfunction severityLevelFromString(level) {\n  return (level === 'warn' ? 'warning' : validSeverityLevels.includes(level) ? level : 'log') ;\n}\n\nexport { severityFromString, severityLevelFromString, validSeverityLevels };\n//# sourceMappingURL=severity.js.map\n","import { dynamicRequire, isNodeEnv } from './node.js';\nimport { getGlobalObject } from './worldwide.js';\n\n// eslint-disable-next-line deprecation/deprecation\nconst WINDOW = getGlobalObject();\n\n/**\n * An object that can return the current timestamp in seconds since the UNIX epoch.\n */\n\n/**\n * A TimestampSource implementation for environments that do not support the Performance Web API natively.\n *\n * Note that this TimestampSource does not use a monotonic clock. A call to `nowSeconds` may return a timestamp earlier\n * than a previously returned value. We do not try to emulate a monotonic behavior in order to facilitate debugging. It\n * is more obvious to explain \"why does my span have negative duration\" than \"why my spans have zero duration\".\n */\nconst dateTimestampSource = {\n  nowSeconds: () => Date.now() / 1000,\n};\n\n/**\n * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}\n * for accessing a high-resolution monotonic clock.\n */\n\n/**\n * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not\n * support the API.\n *\n * Wrapping the native API works around differences in behavior from different browsers.\n */\nfunction getBrowserPerformance() {\n  const { performance } = WINDOW;\n  if (!performance || !performance.now) {\n    return undefined;\n  }\n\n  // Replace performance.timeOrigin with our own timeOrigin based on Date.now().\n  //\n  // This is a partial workaround for browsers reporting performance.timeOrigin such that performance.timeOrigin +\n  // performance.now() gives a date arbitrarily in the past.\n  //\n  // Additionally, computing timeOrigin in this way fills the gap for browsers where performance.timeOrigin is\n  // undefined.\n  //\n  // The assumption that performance.timeOrigin + performance.now() ~= Date.now() is flawed, but we depend on it to\n  // interact with data coming out of performance entries.\n  //\n  // Note that despite recommendations against it in the spec, browsers implement the Performance API with a clock that\n  // might stop when the computer is asleep (and perhaps under other circumstances). Such behavior causes\n  // performance.timeOrigin + performance.now() to have an arbitrary skew over Date.now(). In laptop computers, we have\n  // observed skews that can be as long as days, weeks or months.\n  //\n  // See https://github.com/getsentry/sentry-javascript/issues/2590.\n  //\n  // BUG: despite our best intentions, this workaround has its limitations. It mostly addresses timings of pageload\n  // transactions, but ignores the skew built up over time that can aversely affect timestamps of navigation\n  // transactions of long-lived web pages.\n  const timeOrigin = Date.now() - performance.now();\n\n  return {\n    now: () => performance.now(),\n    timeOrigin,\n  };\n}\n\n/**\n * Returns the native Performance API implementation from Node.js. Returns undefined in old Node.js versions that don't\n * implement the API.\n */\nfunction getNodePerformance() {\n  try {\n    const perfHooks = dynamicRequire(module, 'perf_hooks') ;\n    return perfHooks.performance;\n  } catch (_) {\n    return undefined;\n  }\n}\n\n/**\n * The Performance API implementation for the current platform, if available.\n */\nconst platformPerformance = isNodeEnv() ? getNodePerformance() : getBrowserPerformance();\n\nconst timestampSource =\n  platformPerformance === undefined\n    ? dateTimestampSource\n    : {\n        nowSeconds: () => (platformPerformance.timeOrigin + platformPerformance.now()) / 1000,\n      };\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using the Date API.\n */\nconst dateTimestampInSeconds = dateTimestampSource.nowSeconds.bind(dateTimestampSource);\n\n/**\n * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the\n * availability of the Performance API.\n *\n * See `usingPerformanceAPI` to test whether the Performance API is used.\n *\n * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is\n * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The\n * skew can grow to arbitrary amounts like days, weeks or months.\n * See https://github.com/getsentry/sentry-javascript/issues/2590.\n */\nconst timestampInSeconds = timestampSource.nowSeconds.bind(timestampSource);\n\n// Re-exported with an old name for backwards-compatibility.\nconst timestampWithMs = timestampInSeconds;\n\n/**\n * A boolean that is true when timestampInSeconds uses the Performance API to produce monotonic timestamps.\n */\nconst usingPerformanceAPI = platformPerformance !== undefined;\n\n/**\n * Internal helper to store what is the source of browserPerformanceTimeOrigin below. For debugging only.\n */\nlet _browserPerformanceTimeOriginMode;\n\n/**\n * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the\n * performance API is available.\n */\nconst browserPerformanceTimeOrigin = (() => {\n  // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or\n  // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin\n  // data as reliable if they are within a reasonable threshold of the current time.\n\n  const { performance } = WINDOW;\n  if (!performance || !performance.now) {\n    _browserPerformanceTimeOriginMode = 'none';\n    return undefined;\n  }\n\n  const threshold = 3600 * 1000;\n  const performanceNow = performance.now();\n  const dateNow = Date.now();\n\n  // if timeOrigin isn't available set delta to threshold so it isn't used\n  const timeOriginDelta = performance.timeOrigin\n    ? Math.abs(performance.timeOrigin + performanceNow - dateNow)\n    : threshold;\n  const timeOriginIsReliable = timeOriginDelta < threshold;\n\n  // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin\n  // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.\n  // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always\n  // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the\n  // Date API.\n  // eslint-disable-next-line deprecation/deprecation\n  const navigationStart = performance.timing && performance.timing.navigationStart;\n  const hasNavigationStart = typeof navigationStart === 'number';\n  // if navigationStart isn't available set delta to threshold so it isn't used\n  const navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;\n  const navigationStartIsReliable = navigationStartDelta < threshold;\n\n  if (timeOriginIsReliable || navigationStartIsReliable) {\n    // Use the more reliable time origin\n    if (timeOriginDelta <= navigationStartDelta) {\n      _browserPerformanceTimeOriginMode = 'timeOrigin';\n      return performance.timeOrigin;\n    } else {\n      _browserPerformanceTimeOriginMode = 'navigationStart';\n      return navigationStart;\n    }\n  }\n\n  // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.\n  _browserPerformanceTimeOriginMode = 'dateNow';\n  return dateNow;\n})();\n\nexport { _browserPerformanceTimeOriginMode, browserPerformanceTimeOrigin, dateTimestampInSeconds, timestampInSeconds, timestampWithMs, usingPerformanceAPI };\n//# sourceMappingURL=time.js.map\n","const TRACEPARENT_REGEXP = new RegExp(\n  '^[ \\\\t]*' + // whitespace\n    '([0-9a-f]{32})?' + // trace_id\n    '-?([0-9a-f]{16})?' + // span_id\n    '-?([01])?' + // sampled\n    '[ \\\\t]*$', // whitespace\n);\n\n/**\n * Extract transaction context data from a `sentry-trace` header.\n *\n * @param traceparent Traceparent string\n *\n * @returns Object containing data from the header, or undefined if traceparent string is malformed\n */\nfunction extractTraceparentData(traceparent) {\n  const matches = traceparent.match(TRACEPARENT_REGEXP);\n\n  if (!traceparent || !matches) {\n    // empty string or no matches is invalid traceparent data\n    return undefined;\n  }\n\n  let parentSampled;\n  if (matches[3] === '1') {\n    parentSampled = true;\n  } else if (matches[3] === '0') {\n    parentSampled = false;\n  }\n\n  return {\n    traceId: matches[1],\n    parentSampled,\n    parentSpanId: matches[2],\n  };\n}\n\nexport { TRACEPARENT_REGEXP, extractTraceparentData };\n//# sourceMappingURL=tracing.js.map\n","import { dsnToString } from './dsn.js';\nimport { normalize } from './normalize.js';\nimport { dropUndefinedKeys } from './object.js';\n\n/**\n * Creates an envelope.\n * Make sure to always explicitly provide the generic to this function\n * so that the envelope types resolve correctly.\n */\nfunction createEnvelope(headers, items = []) {\n  return [headers, items] ;\n}\n\n/**\n * Add an item to an envelope.\n * Make sure to always explicitly provide the generic to this function\n * so that the envelope types resolve correctly.\n */\nfunction addItemToEnvelope(envelope, newItem) {\n  const [headers, items] = envelope;\n  return [headers, [...items, newItem]] ;\n}\n\n/**\n * Convenience function to loop through the items and item types of an envelope.\n * (This function was mostly created because working with envelope types is painful at the moment)\n */\nfunction forEachEnvelopeItem(\n  envelope,\n  callback,\n) {\n  const envelopeItems = envelope[1];\n  envelopeItems.forEach((envelopeItem) => {\n    const envelopeItemType = envelopeItem[0].type;\n    callback(envelopeItem, envelopeItemType);\n  });\n}\n\nfunction encodeUTF8(input, textEncoder) {\n  const utf8 = textEncoder || new TextEncoder();\n  return utf8.encode(input);\n}\n\n/**\n * Serializes an envelope.\n */\nfunction serializeEnvelope(envelope, textEncoder) {\n  const [envHeaders, items] = envelope;\n\n  // Initially we construct our envelope as a string and only convert to binary chunks if we encounter binary data\n  let parts = JSON.stringify(envHeaders);\n\n  function append(next) {\n    if (typeof parts === 'string') {\n      parts = typeof next === 'string' ? parts + next : [encodeUTF8(parts, textEncoder), next];\n    } else {\n      parts.push(typeof next === 'string' ? encodeUTF8(next, textEncoder) : next);\n    }\n  }\n\n  for (const item of items) {\n    const [itemHeaders, payload] = item;\n\n    append(`\\n${JSON.stringify(itemHeaders)}\\n`);\n\n    if (typeof payload === 'string' || payload instanceof Uint8Array) {\n      append(payload);\n    } else {\n      let stringifiedPayload;\n      try {\n        stringifiedPayload = JSON.stringify(payload);\n      } catch (e) {\n        // In case, despite all our efforts to keep `payload` circular-dependency-free, `JSON.strinify()` still\n        // fails, we try again after normalizing it again with infinite normalization depth. This of course has a\n        // performance impact but in this case a performance hit is better than throwing.\n        stringifiedPayload = JSON.stringify(normalize(payload));\n      }\n      append(stringifiedPayload);\n    }\n  }\n\n  return typeof parts === 'string' ? parts : concatBuffers(parts);\n}\n\nfunction concatBuffers(buffers) {\n  const totalLength = buffers.reduce((acc, buf) => acc + buf.length, 0);\n\n  const merged = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const buffer of buffers) {\n    merged.set(buffer, offset);\n    offset += buffer.length;\n  }\n\n  return merged;\n}\n\n/**\n * Parses an envelope\n */\nfunction parseEnvelope(\n  env,\n  textEncoder,\n  textDecoder,\n) {\n  let buffer = typeof env === 'string' ? textEncoder.encode(env) : env;\n\n  function readBinary(length) {\n    const bin = buffer.subarray(0, length);\n    // Replace the buffer with the remaining data excluding trailing newline\n    buffer = buffer.subarray(length + 1);\n    return bin;\n  }\n\n  function readJson() {\n    let i = buffer.indexOf(0xa);\n    // If we couldn't find a newline, we must have found the end of the buffer\n    if (i < 0) {\n      i = buffer.length;\n    }\n\n    return JSON.parse(textDecoder.decode(readBinary(i))) ;\n  }\n\n  const envelopeHeader = readJson();\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const items = [];\n\n  while (buffer.length) {\n    const itemHeader = readJson();\n    const binaryLength = typeof itemHeader.length === 'number' ? itemHeader.length : undefined;\n\n    items.push([itemHeader, binaryLength ? readBinary(binaryLength) : readJson()]);\n  }\n\n  return [envelopeHeader, items];\n}\n\n/**\n * Creates attachment envelope items\n */\nfunction createAttachmentEnvelopeItem(\n  attachment,\n  textEncoder,\n) {\n  const buffer = typeof attachment.data === 'string' ? encodeUTF8(attachment.data, textEncoder) : attachment.data;\n\n  return [\n    dropUndefinedKeys({\n      type: 'attachment',\n      length: buffer.length,\n      filename: attachment.filename,\n      content_type: attachment.contentType,\n      attachment_type: attachment.attachmentType,\n    }),\n    buffer,\n  ];\n}\n\nconst ITEM_TYPE_TO_DATA_CATEGORY_MAP = {\n  session: 'session',\n  sessions: 'session',\n  attachment: 'attachment',\n  transaction: 'transaction',\n  event: 'error',\n  client_report: 'internal',\n  user_report: 'default',\n  profile: 'profile',\n  replay_event: 'replay_event',\n  replay_recording: 'replay_recording',\n};\n\n/**\n * Maps the type of an envelope item to a data category.\n */\nfunction envelopeItemTypeToDataCategory(type) {\n  return ITEM_TYPE_TO_DATA_CATEGORY_MAP[type];\n}\n\n/** Extracts the minimal SDK info from from the metadata or an events */\nfunction getSdkMetadataForEnvelopeHeader(metadataOrEvent) {\n  if (!metadataOrEvent || !metadataOrEvent.sdk) {\n    return;\n  }\n  const { name, version } = metadataOrEvent.sdk;\n  return { name, version };\n}\n\n/**\n * Creates event envelope headers, based on event, sdk info and tunnel\n * Note: This function was extracted from the core package to make it available in Replay\n */\nfunction createEventEnvelopeHeaders(\n  event,\n  sdkInfo,\n  tunnel,\n  dsn,\n) {\n  const dynamicSamplingContext = event.sdkProcessingMetadata && event.sdkProcessingMetadata.dynamicSamplingContext;\n\n  return {\n    event_id: event.event_id ,\n    sent_at: new Date().toISOString(),\n    ...(sdkInfo && { sdk: sdkInfo }),\n    ...(!!tunnel && { dsn: dsnToString(dsn) }),\n    ...(event.type === 'transaction' &&\n      dynamicSamplingContext && {\n        trace: dropUndefinedKeys({ ...dynamicSamplingContext }),\n      }),\n  };\n}\n\nexport { addItemToEnvelope, createAttachmentEnvelopeItem, createEnvelope, createEventEnvelopeHeaders, envelopeItemTypeToDataCategory, forEachEnvelopeItem, getSdkMetadataForEnvelopeHeader, parseEnvelope, serializeEnvelope };\n//# sourceMappingURL=envelope.js.map\n","import { createEnvelope } from './envelope.js';\nimport { dateTimestampInSeconds } from './time.js';\n\n/**\n * Creates client report envelope\n * @param discarded_events An array of discard events\n * @param dsn A DSN that can be set on the header. Optional.\n */\nfunction createClientReportEnvelope(\n  discarded_events,\n  dsn,\n  timestamp,\n) {\n  const clientReportItem = [\n    { type: 'client_report' },\n    {\n      timestamp: timestamp || dateTimestampInSeconds(),\n      discarded_events,\n    },\n  ];\n  return createEnvelope(dsn ? { dsn } : {}, [clientReportItem]);\n}\n\nexport { createClientReportEnvelope };\n//# sourceMappingURL=clientreport.js.map\n","// Intentionally keeping the key broad, as we don't know for sure what rate limit headers get returned from backend\n\nconst DEFAULT_RETRY_AFTER = 60 * 1000; // 60 seconds\n\n/**\n * Extracts Retry-After value from the request header or returns default value\n * @param header string representation of 'Retry-After' header\n * @param now current unix timestamp\n *\n */\nfunction parseRetryAfterHeader(header, now = Date.now()) {\n  const headerDelay = parseInt(`${header}`, 10);\n  if (!isNaN(headerDelay)) {\n    return headerDelay * 1000;\n  }\n\n  const headerDate = Date.parse(`${header}`);\n  if (!isNaN(headerDate)) {\n    return headerDate - now;\n  }\n\n  return DEFAULT_RETRY_AFTER;\n}\n\n/**\n * Gets the time that given category is disabled until for rate limiting\n */\nfunction disabledUntil(limits, category) {\n  return limits[category] || limits.all || 0;\n}\n\n/**\n * Checks if a category is rate limited\n */\nfunction isRateLimited(limits, category, now = Date.now()) {\n  return disabledUntil(limits, category) > now;\n}\n\n/**\n * Update ratelimits from incoming headers.\n * Returns true if headers contains a non-empty rate limiting header.\n */\nfunction updateRateLimits(\n  limits,\n  { statusCode, headers },\n  now = Date.now(),\n) {\n  const updatedRateLimits = {\n    ...limits,\n  };\n\n  // \"The name is case-insensitive.\"\n  // https://developer.mozilla.org/en-US/docs/Web/API/Headers/get\n  const rateLimitHeader = headers && headers['x-sentry-rate-limits'];\n  const retryAfterHeader = headers && headers['retry-after'];\n\n  if (rateLimitHeader) {\n    /**\n     * rate limit headers are of the form\n     *     <header>,<header>,..\n     * where each <header> is of the form\n     *     <retry_after>: <categories>: <scope>: <reason_code>\n     * where\n     *     <retry_after> is a delay in seconds\n     *     <categories> is the event type(s) (error, transaction, etc) being rate limited and is of the form\n     *         <category>;<category>;...\n     *     <scope> is what's being limited (org, project, or key) - ignored by SDK\n     *     <reason_code> is an arbitrary string like \"org_quota\" - ignored by SDK\n     */\n    for (const limit of rateLimitHeader.trim().split(',')) {\n      const [retryAfter, categories] = limit.split(':', 2);\n      const headerDelay = parseInt(retryAfter, 10);\n      const delay = (!isNaN(headerDelay) ? headerDelay : 60) * 1000; // 60sec default\n      if (!categories) {\n        updatedRateLimits.all = now + delay;\n      } else {\n        for (const category of categories.split(';')) {\n          updatedRateLimits[category] = now + delay;\n        }\n      }\n    }\n  } else if (retryAfterHeader) {\n    updatedRateLimits.all = now + parseRetryAfterHeader(retryAfterHeader, now);\n  } else if (statusCode === 429) {\n    updatedRateLimits.all = now + 60 * 1000;\n  }\n\n  return updatedRateLimits;\n}\n\nexport { DEFAULT_RETRY_AFTER, disabledUntil, isRateLimited, parseRetryAfterHeader, updateRateLimits };\n//# sourceMappingURL=ratelimit.js.map\n","import { isString } from './is.js';\nimport { logger } from './logger.js';\n\nconst BAGGAGE_HEADER_NAME = 'baggage';\n\nconst SENTRY_BAGGAGE_KEY_PREFIX = 'sentry-';\n\nconst SENTRY_BAGGAGE_KEY_PREFIX_REGEX = /^sentry-/;\n\n/**\n * Max length of a serialized baggage string\n *\n * https://www.w3.org/TR/baggage/#limits\n */\nconst MAX_BAGGAGE_STRING_LENGTH = 8192;\n\n/**\n * Takes a baggage header and turns it into Dynamic Sampling Context, by extracting all the \"sentry-\" prefixed values\n * from it.\n *\n * @param baggageHeader A very bread definition of a baggage header as it might appear in various frameworks.\n * @returns The Dynamic Sampling Context that was found on `baggageHeader`, if there was any, `undefined` otherwise.\n */\nfunction baggageHeaderToDynamicSamplingContext(\n  // Very liberal definition of what any incoming header might look like\n  baggageHeader,\n) {\n  if (!isString(baggageHeader) && !Array.isArray(baggageHeader)) {\n    return undefined;\n  }\n\n  // Intermediary object to store baggage key value pairs of incoming baggage headers on.\n  // It is later used to read Sentry-DSC-values from.\n  let baggageObject = {};\n\n  if (Array.isArray(baggageHeader)) {\n    // Combine all baggage headers into one object containing the baggage values so we can later read the Sentry-DSC-values from it\n    baggageObject = baggageHeader.reduce((acc, curr) => {\n      const currBaggageObject = baggageHeaderToObject(curr);\n      return {\n        ...acc,\n        ...currBaggageObject,\n      };\n    }, {});\n  } else {\n    // Return undefined if baggage header is an empty string (technically an empty baggage header is not spec conform but\n    // this is how we choose to handle it)\n    if (!baggageHeader) {\n      return undefined;\n    }\n\n    baggageObject = baggageHeaderToObject(baggageHeader);\n  }\n\n  // Read all \"sentry-\" prefixed values out of the baggage object and put it onto a dynamic sampling context object.\n  const dynamicSamplingContext = Object.entries(baggageObject).reduce((acc, [key, value]) => {\n    if (key.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)) {\n      const nonPrefixedKey = key.slice(SENTRY_BAGGAGE_KEY_PREFIX.length);\n      acc[nonPrefixedKey] = value;\n    }\n    return acc;\n  }, {});\n\n  // Only return a dynamic sampling context object if there are keys in it.\n  // A keyless object means there were no sentry values on the header, which means that there is no DSC.\n  if (Object.keys(dynamicSamplingContext).length > 0) {\n    return dynamicSamplingContext ;\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Turns a Dynamic Sampling Object into a baggage header by prefixing all the keys on the object with \"sentry-\".\n *\n * @param dynamicSamplingContext The Dynamic Sampling Context to turn into a header. For convenience and compatibility\n * with the `getDynamicSamplingContext` method on the Transaction class ,this argument can also be `undefined`. If it is\n * `undefined` the function will return `undefined`.\n * @returns a baggage header, created from `dynamicSamplingContext`, or `undefined` either if `dynamicSamplingContext`\n * was `undefined`, or if `dynamicSamplingContext` didn't contain any values.\n */\nfunction dynamicSamplingContextToSentryBaggageHeader(\n  // this also takes undefined for convenience and bundle size in other places\n  dynamicSamplingContext,\n) {\n  // Prefix all DSC keys with \"sentry-\" and put them into a new object\n  const sentryPrefixedDSC = Object.entries(dynamicSamplingContext).reduce(\n    (acc, [dscKey, dscValue]) => {\n      if (dscValue) {\n        acc[`${SENTRY_BAGGAGE_KEY_PREFIX}${dscKey}`] = dscValue;\n      }\n      return acc;\n    },\n    {},\n  );\n\n  return objectToBaggageHeader(sentryPrefixedDSC);\n}\n\n/**\n * Will parse a baggage header, which is a simple key-value map, into a flat object.\n *\n * @param baggageHeader The baggage header to parse.\n * @returns a flat object containing all the key-value pairs from `baggageHeader`.\n */\nfunction baggageHeaderToObject(baggageHeader) {\n  return baggageHeader\n    .split(',')\n    .map(baggageEntry => baggageEntry.split('=').map(keyOrValue => decodeURIComponent(keyOrValue.trim())))\n    .reduce((acc, [key, value]) => {\n      acc[key] = value;\n      return acc;\n    }, {});\n}\n\n/**\n * Turns a flat object (key-value pairs) into a baggage header, which is also just key-value pairs.\n *\n * @param object The object to turn into a baggage header.\n * @returns a baggage header string, or `undefined` if the object didn't have any values, since an empty baggage header\n * is not spec compliant.\n */\nfunction objectToBaggageHeader(object) {\n  if (Object.keys(object).length === 0) {\n    // An empty baggage header is not spec compliant: We return undefined.\n    return undefined;\n  }\n\n  return Object.entries(object).reduce((baggageHeader, [objectKey, objectValue], currentIndex) => {\n    const baggageEntry = `${encodeURIComponent(objectKey)}=${encodeURIComponent(objectValue)}`;\n    const newBaggageHeader = currentIndex === 0 ? baggageEntry : `${baggageHeader},${baggageEntry}`;\n    if (newBaggageHeader.length > MAX_BAGGAGE_STRING_LENGTH) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(\n          `Not adding key: ${objectKey} with val: ${objectValue} to baggage header due to exceeding baggage size limits.`,\n        );\n      return baggageHeader;\n    } else {\n      return newBaggageHeader;\n    }\n  }, '');\n}\n\nexport { BAGGAGE_HEADER_NAME, MAX_BAGGAGE_STRING_LENGTH, SENTRY_BAGGAGE_KEY_PREFIX, SENTRY_BAGGAGE_KEY_PREFIX_REGEX, baggageHeaderToDynamicSamplingContext, dynamicSamplingContextToSentryBaggageHeader };\n//# sourceMappingURL=baggage.js.map\n","import { timestampInSeconds, uuid4, dropUndefinedKeys } from '@sentry/utils';\n\n/**\n * Creates a new `Session` object by setting certain default parameters. If optional @param context\n * is passed, the passed properties are applied to the session object.\n *\n * @param context (optional) additional properties to be applied to the returned session object\n *\n * @returns a new `Session` object\n */\nfunction makeSession(context) {\n  // Both timestamp and started are in seconds since the UNIX epoch.\n  const startingTime = timestampInSeconds();\n\n  const session = {\n    sid: uuid4(),\n    init: true,\n    timestamp: startingTime,\n    started: startingTime,\n    duration: 0,\n    status: 'ok',\n    errors: 0,\n    ignoreDuration: false,\n    toJSON: () => sessionToJSON(session),\n  };\n\n  if (context) {\n    updateSession(session, context);\n  }\n\n  return session;\n}\n\n/**\n * Updates a session object with the properties passed in the context.\n *\n * Note that this function mutates the passed object and returns void.\n * (Had to do this instead of returning a new and updated session because closing and sending a session\n * makes an update to the session after it was passed to the sending logic.\n * @see BaseClient.captureSession )\n *\n * @param session the `Session` to update\n * @param context the `SessionContext` holding the properties that should be updated in @param session\n */\n// eslint-disable-next-line complexity\nfunction updateSession(session, context = {}) {\n  if (context.user) {\n    if (!session.ipAddress && context.user.ip_address) {\n      session.ipAddress = context.user.ip_address;\n    }\n\n    if (!session.did && !context.did) {\n      session.did = context.user.id || context.user.email || context.user.username;\n    }\n  }\n\n  session.timestamp = context.timestamp || timestampInSeconds();\n\n  if (context.ignoreDuration) {\n    session.ignoreDuration = context.ignoreDuration;\n  }\n  if (context.sid) {\n    // Good enough uuid validation.  Kamil\n    session.sid = context.sid.length === 32 ? context.sid : uuid4();\n  }\n  if (context.init !== undefined) {\n    session.init = context.init;\n  }\n  if (!session.did && context.did) {\n    session.did = `${context.did}`;\n  }\n  if (typeof context.started === 'number') {\n    session.started = context.started;\n  }\n  if (session.ignoreDuration) {\n    session.duration = undefined;\n  } else if (typeof context.duration === 'number') {\n    session.duration = context.duration;\n  } else {\n    const duration = session.timestamp - session.started;\n    session.duration = duration >= 0 ? duration : 0;\n  }\n  if (context.release) {\n    session.release = context.release;\n  }\n  if (context.environment) {\n    session.environment = context.environment;\n  }\n  if (!session.ipAddress && context.ipAddress) {\n    session.ipAddress = context.ipAddress;\n  }\n  if (!session.userAgent && context.userAgent) {\n    session.userAgent = context.userAgent;\n  }\n  if (typeof context.errors === 'number') {\n    session.errors = context.errors;\n  }\n  if (context.status) {\n    session.status = context.status;\n  }\n}\n\n/**\n * Closes a session by setting its status and updating the session object with it.\n * Internally calls `updateSession` to update the passed session object.\n *\n * Note that this function mutates the passed session (@see updateSession for explanation).\n *\n * @param session the `Session` object to be closed\n * @param status the `SessionStatus` with which the session was closed. If you don't pass a status,\n *               this function will keep the previously set status, unless it was `'ok'` in which case\n *               it is changed to `'exited'`.\n */\nfunction closeSession(session, status) {\n  let context = {};\n  if (status) {\n    context = { status };\n  } else if (session.status === 'ok') {\n    context = { status: 'exited' };\n  }\n\n  updateSession(session, context);\n}\n\n/**\n * Serializes a passed session object to a JSON object with a slightly different structure.\n * This is necessary because the Sentry backend requires a slightly different schema of a session\n * than the one the JS SDKs use internally.\n *\n * @param session the session to be converted\n *\n * @returns a JSON object of the passed session\n */\nfunction sessionToJSON(session) {\n  return dropUndefinedKeys({\n    sid: `${session.sid}`,\n    init: session.init,\n    // Make sure that sec is converted to ms for date constructor\n    started: new Date(session.started * 1000).toISOString(),\n    timestamp: new Date(session.timestamp * 1000).toISOString(),\n    status: session.status,\n    errors: session.errors,\n    did: typeof session.did === 'number' || typeof session.did === 'string' ? `${session.did}` : undefined,\n    duration: session.duration,\n    attrs: {\n      release: session.release,\n      environment: session.environment,\n      ip_address: session.ipAddress,\n      user_agent: session.userAgent,\n    },\n  });\n}\n\nexport { closeSession, makeSession, updateSession };\n//# sourceMappingURL=session.js.map\n","import { isPlainObject, dateTimestampInSeconds, SyncPromise, logger, isThenable, arrayify, getGlobalSingleton } from '@sentry/utils';\nimport { updateSession } from './session.js';\n\n/**\n * Default value for maximum number of breadcrumbs added to an event.\n */\nconst DEFAULT_MAX_BREADCRUMBS = 100;\n\n/**\n * Holds additional event information. {@link Scope.applyToEvent} will be\n * called by the client before an event will be sent.\n */\nclass Scope  {\n  /** Flag if notifying is happening. */\n\n  /** Callback for client to receive scope changes. */\n\n  /** Callback list that will be called after {@link applyToEvent}. */\n\n  /** Array of breadcrumbs. */\n\n  /** User */\n\n  /** Tags */\n\n  /** Extra */\n\n  /** Contexts */\n\n  /** Attachments */\n\n  /**\n   * A place to stash data which is needed at some point in the SDK's event processing pipeline but which shouldn't get\n   * sent to Sentry\n   */\n\n  /** Fingerprint */\n\n  /** Severity */\n  // eslint-disable-next-line deprecation/deprecation\n\n  /** Transaction Name */\n\n  /** Span */\n\n  /** Session */\n\n  /** Request Mode Session Status */\n\n  // NOTE: Any field which gets added here should get added not only to the constructor but also to the `clone` method.\n\n   constructor() {\n    this._notifyingListeners = false;\n    this._scopeListeners = [];\n    this._eventProcessors = [];\n    this._breadcrumbs = [];\n    this._attachments = [];\n    this._user = {};\n    this._tags = {};\n    this._extra = {};\n    this._contexts = {};\n    this._sdkProcessingMetadata = {};\n  }\n\n  /**\n   * Inherit values from the parent scope.\n   * @param scope to clone.\n   */\n   static clone(scope) {\n    const newScope = new Scope();\n    if (scope) {\n      newScope._breadcrumbs = [...scope._breadcrumbs];\n      newScope._tags = { ...scope._tags };\n      newScope._extra = { ...scope._extra };\n      newScope._contexts = { ...scope._contexts };\n      newScope._user = scope._user;\n      newScope._level = scope._level;\n      newScope._span = scope._span;\n      newScope._session = scope._session;\n      newScope._transactionName = scope._transactionName;\n      newScope._fingerprint = scope._fingerprint;\n      newScope._eventProcessors = [...scope._eventProcessors];\n      newScope._requestSession = scope._requestSession;\n      newScope._attachments = [...scope._attachments];\n      newScope._sdkProcessingMetadata = { ...scope._sdkProcessingMetadata };\n    }\n    return newScope;\n  }\n\n  /**\n   * Add internal on change listener. Used for sub SDKs that need to store the scope.\n   * @hidden\n   */\n   addScopeListener(callback) {\n    this._scopeListeners.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addEventProcessor(callback) {\n    this._eventProcessors.push(callback);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    this._user = user || {};\n    if (this._session) {\n      updateSession(this._session, { user });\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getUser() {\n    return this._user;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getRequestSession() {\n    return this._requestSession;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setRequestSession(requestSession) {\n    this._requestSession = requestSession;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    this._tags = {\n      ...this._tags,\n      ...tags,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this._tags = { ...this._tags, [key]: value };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    this._extra = {\n      ...this._extra,\n      ...extras,\n    };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    this._extra = { ...this._extra, [key]: extra };\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setFingerprint(fingerprint) {\n    this._fingerprint = fingerprint;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setLevel(\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n  ) {\n    this._level = level;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTransactionName(name) {\n    this._transactionName = name;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setContext(key, context) {\n    if (context === null) {\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this._contexts[key];\n    } else {\n      this._contexts[key] = context;\n    }\n\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSpan(span) {\n    this._span = span;\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSpan() {\n    return this._span;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTransaction() {\n    // Often, this span (if it exists at all) will be a transaction, but it's not guaranteed to be. Regardless, it will\n    // have a pointer to the currently-active transaction.\n    const span = this.getSpan();\n    return span && span.transaction;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setSession(session) {\n    if (!session) {\n      delete this._session;\n    } else {\n      this._session = session;\n    }\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getSession() {\n    return this._session;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   update(captureContext) {\n    if (!captureContext) {\n      return this;\n    }\n\n    if (typeof captureContext === 'function') {\n      const updatedScope = (captureContext )(this);\n      return updatedScope instanceof Scope ? updatedScope : this;\n    }\n\n    if (captureContext instanceof Scope) {\n      this._tags = { ...this._tags, ...captureContext._tags };\n      this._extra = { ...this._extra, ...captureContext._extra };\n      this._contexts = { ...this._contexts, ...captureContext._contexts };\n      if (captureContext._user && Object.keys(captureContext._user).length) {\n        this._user = captureContext._user;\n      }\n      if (captureContext._level) {\n        this._level = captureContext._level;\n      }\n      if (captureContext._fingerprint) {\n        this._fingerprint = captureContext._fingerprint;\n      }\n      if (captureContext._requestSession) {\n        this._requestSession = captureContext._requestSession;\n      }\n    } else if (isPlainObject(captureContext)) {\n      // eslint-disable-next-line no-param-reassign\n      captureContext = captureContext ;\n      this._tags = { ...this._tags, ...captureContext.tags };\n      this._extra = { ...this._extra, ...captureContext.extra };\n      this._contexts = { ...this._contexts, ...captureContext.contexts };\n      if (captureContext.user) {\n        this._user = captureContext.user;\n      }\n      if (captureContext.level) {\n        this._level = captureContext.level;\n      }\n      if (captureContext.fingerprint) {\n        this._fingerprint = captureContext.fingerprint;\n      }\n      if (captureContext.requestSession) {\n        this._requestSession = captureContext.requestSession;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clear() {\n    this._breadcrumbs = [];\n    this._tags = {};\n    this._extra = {};\n    this._user = {};\n    this._contexts = {};\n    this._level = undefined;\n    this._transactionName = undefined;\n    this._fingerprint = undefined;\n    this._requestSession = undefined;\n    this._span = undefined;\n    this._session = undefined;\n    this._notifyScopeListeners();\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, maxBreadcrumbs) {\n    const maxCrumbs = typeof maxBreadcrumbs === 'number' ? maxBreadcrumbs : DEFAULT_MAX_BREADCRUMBS;\n\n    // No data has been changed, so don't notify scope listeners\n    if (maxCrumbs <= 0) {\n      return this;\n    }\n\n    const mergedBreadcrumb = {\n      timestamp: dateTimestampInSeconds(),\n      ...breadcrumb,\n    };\n    this._breadcrumbs = [...this._breadcrumbs, mergedBreadcrumb].slice(-maxCrumbs);\n    this._notifyScopeListeners();\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getLastBreadcrumb() {\n    return this._breadcrumbs[this._breadcrumbs.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearBreadcrumbs() {\n    this._breadcrumbs = [];\n    this._notifyScopeListeners();\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addAttachment(attachment) {\n    this._attachments.push(attachment);\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getAttachments() {\n    return this._attachments;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   clearAttachments() {\n    this._attachments = [];\n    return this;\n  }\n\n  /**\n   * Applies data from the scope to the event and runs all event processors on it.\n   *\n   * @param event Event\n   * @param hint Object containing additional information about the original exception, for use by the event processors.\n   * @hidden\n   */\n   applyToEvent(event, hint = {}) {\n    if (this._extra && Object.keys(this._extra).length) {\n      event.extra = { ...this._extra, ...event.extra };\n    }\n    if (this._tags && Object.keys(this._tags).length) {\n      event.tags = { ...this._tags, ...event.tags };\n    }\n    if (this._user && Object.keys(this._user).length) {\n      event.user = { ...this._user, ...event.user };\n    }\n    if (this._contexts && Object.keys(this._contexts).length) {\n      event.contexts = { ...this._contexts, ...event.contexts };\n    }\n    if (this._level) {\n      event.level = this._level;\n    }\n    if (this._transactionName) {\n      event.transaction = this._transactionName;\n    }\n\n    // We want to set the trace context for normal events only if there isn't already\n    // a trace context on the event. There is a product feature in place where we link\n    // errors with transaction and it relies on that.\n    if (this._span) {\n      event.contexts = { trace: this._span.getTraceContext(), ...event.contexts };\n      const transactionName = this._span.transaction && this._span.transaction.name;\n      if (transactionName) {\n        event.tags = { transaction: transactionName, ...event.tags };\n      }\n    }\n\n    this._applyFingerprint(event);\n\n    event.breadcrumbs = [...(event.breadcrumbs || []), ...this._breadcrumbs];\n    event.breadcrumbs = event.breadcrumbs.length > 0 ? event.breadcrumbs : undefined;\n\n    event.sdkProcessingMetadata = { ...event.sdkProcessingMetadata, ...this._sdkProcessingMetadata };\n\n    return this._notifyEventProcessors([...getGlobalEventProcessors(), ...this._eventProcessors], event, hint);\n  }\n\n  /**\n   * Add data which will be accessible during event processing but won't get sent to Sentry\n   */\n   setSDKProcessingMetadata(newData) {\n    this._sdkProcessingMetadata = { ...this._sdkProcessingMetadata, ...newData };\n\n    return this;\n  }\n\n  /**\n   * This will be called after {@link applyToEvent} is finished.\n   */\n   _notifyEventProcessors(\n    processors,\n    event,\n    hint,\n    index = 0,\n  ) {\n    return new SyncPromise((resolve, reject) => {\n      const processor = processors[index];\n      if (event === null || typeof processor !== 'function') {\n        resolve(event);\n      } else {\n        const result = processor({ ...event }, hint) ;\n\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          processor.id &&\n          result === null &&\n          logger.log(`Event processor \"${processor.id}\" dropped event`);\n\n        if (isThenable(result)) {\n          void result\n            .then(final => this._notifyEventProcessors(processors, final, hint, index + 1).then(resolve))\n            .then(null, reject);\n        } else {\n          void this._notifyEventProcessors(processors, result, hint, index + 1)\n            .then(resolve)\n            .then(null, reject);\n        }\n      }\n    });\n  }\n\n  /**\n   * This will be called on every set call.\n   */\n   _notifyScopeListeners() {\n    // We need this check for this._notifyingListeners to be able to work on scope during updates\n    // If this check is not here we'll produce endless recursion when something is done with the scope\n    // during the callback.\n    if (!this._notifyingListeners) {\n      this._notifyingListeners = true;\n      this._scopeListeners.forEach(callback => {\n        callback(this);\n      });\n      this._notifyingListeners = false;\n    }\n  }\n\n  /**\n   * Applies fingerprint from the scope to the event if there's one,\n   * uses message if there's one instead or get rid of empty fingerprint\n   */\n   _applyFingerprint(event) {\n    // Make sure it's an array first and we actually have something in place\n    event.fingerprint = event.fingerprint ? arrayify(event.fingerprint) : [];\n\n    // If we have something on the scope, then merge it with event\n    if (this._fingerprint) {\n      event.fingerprint = event.fingerprint.concat(this._fingerprint);\n    }\n\n    // If we have no data at all, remove empty array default\n    if (event.fingerprint && !event.fingerprint.length) {\n      delete event.fingerprint;\n    }\n  }\n}\n\n/**\n * Returns the global event processors.\n */\nfunction getGlobalEventProcessors() {\n  return getGlobalSingleton('globalEventProcessors', () => []);\n}\n\n/**\n * Add a EventProcessor to be kept globally.\n * @param callback EventProcessor to add\n */\nfunction addGlobalEventProcessor(callback) {\n  getGlobalEventProcessors().push(callback);\n}\n\nexport { Scope, addGlobalEventProcessor };\n//# sourceMappingURL=scope.js.map\n","import { uuid4, dateTimestampInSeconds, consoleSandbox, logger, GLOBAL_OBJ, isNodeEnv, getGlobalSingleton } from '@sentry/utils';\nimport { Scope } from './scope.js';\nimport { closeSession, makeSession, updateSession } from './session.js';\n\n/**\n * API compatibility version of this hub.\n *\n * WARNING: This number should only be increased when the global interface\n * changes and new methods are introduced.\n *\n * @hidden\n */\nconst API_VERSION = 4;\n\n/**\n * Default maximum number of breadcrumbs added to an event. Can be overwritten\n * with {@link Options.maxBreadcrumbs}.\n */\nconst DEFAULT_BREADCRUMBS = 100;\n\n/**\n * A layer in the process stack.\n * @hidden\n */\n\n/**\n * @inheritDoc\n */\nclass Hub  {\n  /** Is a {@link Layer}[] containing the client and scope */\n    __init() {this._stack = [{}];}\n\n  /** Contains the last event id of a captured event.  */\n\n  /**\n   * Creates a new instance of the hub, will push one {@link Layer} into the\n   * internal stack on creation.\n   *\n   * @param client bound to the hub.\n   * @param scope bound to the hub.\n   * @param version number, higher number means higher priority.\n   */\n   constructor(client, scope = new Scope(),   _version = API_VERSION) {;this._version = _version;Hub.prototype.__init.call(this);\n    this.getStackTop().scope = scope;\n    if (client) {\n      this.bindClient(client);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isOlderThan(version) {\n    return this._version < version;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   bindClient(client) {\n    const top = this.getStackTop();\n    top.client = client;\n    if (client && client.setupIntegrations) {\n      client.setupIntegrations();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   pushScope() {\n    // We want to clone the content of prev scope\n    const scope = Scope.clone(this.getScope());\n    this.getStack().push({\n      client: this.getClient(),\n      scope,\n    });\n    return scope;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   popScope() {\n    if (this.getStack().length <= 1) return false;\n    return !!this.getStack().pop();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   withScope(callback) {\n    const scope = this.pushScope();\n    try {\n      callback(scope);\n    } finally {\n      this.popScope();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getClient() {\n    return this.getStackTop().client ;\n  }\n\n  /** Returns the scope of the top stack. */\n   getScope() {\n    return this.getStackTop().scope;\n  }\n\n  /** Returns the scope stack for domains or the process. */\n   getStack() {\n    return this._stack;\n  }\n\n  /** Returns the topmost scope layer in the order domain > local > process. */\n   getStackTop() {\n    return this._stack[this._stack.length - 1];\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n   captureException(exception, hint) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error('Sentry syntheticException');\n    this._withClient((client, scope) => {\n      client.captureException(\n        exception,\n        {\n          originalException: exception,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n    hint,\n  ) {\n    const eventId = (this._lastEventId = hint && hint.event_id ? hint.event_id : uuid4());\n    const syntheticException = new Error(message);\n    this._withClient((client, scope) => {\n      client.captureMessage(\n        message,\n        level,\n        {\n          originalException: message,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        scope,\n      );\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint) {\n    const eventId = hint && hint.event_id ? hint.event_id : uuid4();\n    if (event.type !== 'transaction') {\n      this._lastEventId = eventId;\n    }\n\n    this._withClient((client, scope) => {\n      client.captureEvent(event, { ...hint, event_id: eventId }, scope);\n    });\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   lastEventId() {\n    return this._lastEventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   addBreadcrumb(breadcrumb, hint) {\n    const { scope, client } = this.getStackTop();\n\n    if (!scope || !client) return;\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } =\n      (client.getOptions && client.getOptions()) || {};\n\n    if (maxBreadcrumbs <= 0) return;\n\n    const timestamp = dateTimestampInSeconds();\n    const mergedBreadcrumb = { timestamp, ...breadcrumb };\n    const finalBreadcrumb = beforeBreadcrumb\n      ? (consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) )\n      : mergedBreadcrumb;\n\n    if (finalBreadcrumb === null) return;\n\n    scope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setUser(user) {\n    const scope = this.getScope();\n    if (scope) scope.setUser(user);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTags(tags) {\n    const scope = this.getScope();\n    if (scope) scope.setTags(tags);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtras(extras) {\n    const scope = this.getScope();\n    if (scope) scope.setExtras(extras);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    const scope = this.getScope();\n    if (scope) scope.setTag(key, value);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setExtra(key, extra) {\n    const scope = this.getScope();\n    if (scope) scope.setExtra(key, extra);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   setContext(name, context) {\n    const scope = this.getScope();\n    if (scope) scope.setContext(name, context);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   configureScope(callback) {\n    const { scope, client } = this.getStackTop();\n    if (scope && client) {\n      callback(scope);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   run(callback) {\n    const oldHub = makeMain(this);\n    try {\n      callback(this);\n    } finally {\n      makeMain(oldHub);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    const client = this.getClient();\n    if (!client) return null;\n    try {\n      return client.getIntegration(integration);\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Hub`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startTransaction(context, customSamplingContext) {\n    return this._callExtensionMethod('startTransaction', context, customSamplingContext);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   traceHeaders() {\n    return this._callExtensionMethod('traceHeaders');\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(endSession = false) {\n    // both send the update and pull the session from the scope\n    if (endSession) {\n      return this.endSession();\n    }\n\n    // only send the update\n    this._sendSessionUpdate();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   endSession() {\n    const layer = this.getStackTop();\n    const scope = layer && layer.scope;\n    const session = scope && scope.getSession();\n    if (session) {\n      closeSession(session);\n    }\n    this._sendSessionUpdate();\n\n    // the session is over; take it off of the scope\n    if (scope) {\n      scope.setSession();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startSession(context) {\n    const { scope, client } = this.getStackTop();\n    const { release, environment } = (client && client.getOptions()) || {};\n\n    // Will fetch userAgent if called from browser sdk\n    const { userAgent } = GLOBAL_OBJ.navigator || {};\n\n    const session = makeSession({\n      release,\n      environment,\n      ...(scope && { user: scope.getUser() }),\n      ...(userAgent && { userAgent }),\n      ...context,\n    });\n\n    if (scope) {\n      // End existing session if there's one\n      const currentSession = scope.getSession && scope.getSession();\n      if (currentSession && currentSession.status === 'ok') {\n        updateSession(currentSession, { status: 'exited' });\n      }\n      this.endSession();\n\n      // Afterwards we set the new session on the scope\n      scope.setSession(session);\n    }\n\n    return session;\n  }\n\n  /**\n   * Returns if default PII should be sent to Sentry and propagated in ourgoing requests\n   * when Tracing is used.\n   */\n   shouldSendDefaultPii() {\n    const client = this.getClient();\n    const options = client && client.getOptions();\n    return Boolean(options && options.sendDefaultPii);\n  }\n\n  /**\n   * Sends the current Session on the scope\n   */\n   _sendSessionUpdate() {\n    const { scope, client } = this.getStackTop();\n    if (!scope) return;\n\n    const session = scope.getSession();\n    if (session) {\n      if (client && client.captureSession) {\n        client.captureSession(session);\n      }\n    }\n  }\n\n  /**\n   * Internal helper function to call a method on the top client if it exists.\n   *\n   * @param method The method to call on the client.\n   * @param args Arguments to pass to the client function.\n   */\n   _withClient(callback) {\n    const { scope, client } = this.getStackTop();\n    if (client) {\n      callback(client, scope);\n    }\n  }\n\n  /**\n   * Calls global extension method and binding current instance to the function call\n   */\n  // @ts-ignore Function lacks ending return statement and return type does not include 'undefined'. ts(2366)\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   _callExtensionMethod(method, ...args) {\n    const carrier = getMainCarrier();\n    const sentry = carrier.__SENTRY__;\n    if (sentry && sentry.extensions && typeof sentry.extensions[method] === 'function') {\n      return sentry.extensions[method].apply(this, args);\n    }\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Extension method ${method} couldn't be found, doing nothing.`);\n  }\n}\n\n/**\n * Returns the global shim registry.\n *\n * FIXME: This function is problematic, because despite always returning a valid Carrier,\n * it has an optional `__SENTRY__` property, which then in turn requires us to always perform an unnecessary check\n * at the call-site. We always access the carrier through this function, so we can guarantee that `__SENTRY__` is there.\n **/\nfunction getMainCarrier() {\n  GLOBAL_OBJ.__SENTRY__ = GLOBAL_OBJ.__SENTRY__ || {\n    extensions: {},\n    hub: undefined,\n  };\n  return GLOBAL_OBJ;\n}\n\n/**\n * Replaces the current main hub with the passed one on the global object\n *\n * @returns The old replaced hub\n */\nfunction makeMain(hub) {\n  const registry = getMainCarrier();\n  const oldHub = getHubFromCarrier(registry);\n  setHubOnCarrier(registry, hub);\n  return oldHub;\n}\n\n/**\n * Returns the default hub instance.\n *\n * If a hub is already registered in the global carrier but this module\n * contains a more recent version, it replaces the registered version.\n * Otherwise, the currently registered hub will be returned.\n */\nfunction getCurrentHub() {\n  // Get main carrier (global for every environment)\n  const registry = getMainCarrier();\n\n  // If there's no hub, or its an old API, assign a new one\n  if (!hasHubOnCarrier(registry) || getHubFromCarrier(registry).isOlderThan(API_VERSION)) {\n    setHubOnCarrier(registry, new Hub());\n  }\n\n  // Prefer domains over global if they are there (applicable only to Node environment)\n  if (isNodeEnv()) {\n    return getHubFromActiveDomain(registry);\n  }\n  // Return hub that lives on a global object\n  return getHubFromCarrier(registry);\n}\n\n/**\n * Try to read the hub from an active domain, and fallback to the registry if one doesn't exist\n * @returns discovered hub\n */\nfunction getHubFromActiveDomain(registry) {\n  try {\n    const sentry = getMainCarrier().__SENTRY__;\n    const activeDomain = sentry && sentry.extensions && sentry.extensions.domain && sentry.extensions.domain.active;\n\n    // If there's no active domain, just return global hub\n    if (!activeDomain) {\n      return getHubFromCarrier(registry);\n    }\n\n    // If there's no hub on current domain, or it's an old API, assign a new one\n    if (!hasHubOnCarrier(activeDomain) || getHubFromCarrier(activeDomain).isOlderThan(API_VERSION)) {\n      const registryHubTopStack = getHubFromCarrier(registry).getStackTop();\n      setHubOnCarrier(activeDomain, new Hub(registryHubTopStack.client, Scope.clone(registryHubTopStack.scope)));\n    }\n\n    // Return hub that lives on a domain\n    return getHubFromCarrier(activeDomain);\n  } catch (_Oo) {\n    // Return hub that lives on a global object\n    return getHubFromCarrier(registry);\n  }\n}\n\n/**\n * This will tell whether a carrier has a hub on it or not\n * @param carrier object\n */\nfunction hasHubOnCarrier(carrier) {\n  return !!(carrier && carrier.__SENTRY__ && carrier.__SENTRY__.hub);\n}\n\n/**\n * This will create a new {@link Hub} and add to the passed object on\n * __SENTRY__.hub.\n * @param carrier object\n * @hidden\n */\nfunction getHubFromCarrier(carrier) {\n  return getGlobalSingleton('hub', () => new Hub(), carrier);\n}\n\n/**\n * This will set passed {@link Hub} on the passed object's __SENTRY__.hub attribute\n * @param carrier object\n * @param hub Hub\n * @returns A boolean indicating success or failure\n */\nfunction setHubOnCarrier(carrier, hub) {\n  if (!carrier) return false;\n  const __SENTRY__ = (carrier.__SENTRY__ = carrier.__SENTRY__ || {});\n  __SENTRY__.hub = hub;\n  return true;\n}\n\nexport { API_VERSION, Hub, getCurrentHub, getHubFromCarrier, getMainCarrier, makeMain, setHubOnCarrier };\n//# sourceMappingURL=hub.js.map\n","import { getCurrentHub } from './hub.js';\n\n// Note: All functions in this file are typed with a return value of `ReturnType<Hub[HUB_FUNCTION]>`,\n// where HUB_FUNCTION is some method on the Hub class.\n//\n// This is done to make sure the top level SDK methods stay in sync with the hub methods.\n// Although every method here has an explicit return type, some of them (that map to void returns) do not\n// contain `return` keywords. This is done to save on bundle size, as `return` is not minifiable.\n\n/**\n * Captures an exception event and sends it to Sentry.\n *\n * @param exception An exception-like object.\n * @param captureContext Additional scope data to apply to exception event.\n * @returns The generated eventId.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction captureException(exception, captureContext) {\n  return getCurrentHub().captureException(exception, { captureContext });\n}\n\n/**\n * Captures a message event and sends it to Sentry.\n *\n * @param message The message to send to Sentry.\n * @param Severity Define the level of the message.\n * @returns The generated eventId.\n */\nfunction captureMessage(\n  message,\n  // eslint-disable-next-line deprecation/deprecation\n  captureContext,\n) {\n  // This is necessary to provide explicit scopes upgrade, without changing the original\n  // arity of the `captureMessage(message, level)` method.\n  const level = typeof captureContext === 'string' ? captureContext : undefined;\n  const context = typeof captureContext !== 'string' ? { captureContext } : undefined;\n  return getCurrentHub().captureMessage(message, level, context);\n}\n\n/**\n * Captures a manually created event and sends it to Sentry.\n *\n * @param event The event to send to Sentry.\n * @returns The generated eventId.\n */\nfunction captureEvent(event, hint) {\n  return getCurrentHub().captureEvent(event, hint);\n}\n\n/**\n * Callback to set context information onto the scope.\n * @param callback Callback function that receives Scope.\n */\nfunction configureScope(callback) {\n  getCurrentHub().configureScope(callback);\n}\n\n/**\n * Records a new breadcrumb which will be attached to future events.\n *\n * Breadcrumbs will be added to subsequent events to provide more context on\n * user's actions prior to an error or crash.\n *\n * @param breadcrumb The breadcrumb to record.\n */\nfunction addBreadcrumb(breadcrumb) {\n  getCurrentHub().addBreadcrumb(breadcrumb);\n}\n\n/**\n * Sets context data with the given name.\n * @param name of the context\n * @param context Any kind of data. This data will be normalized.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction setContext(name, context) {\n  getCurrentHub().setContext(name, context);\n}\n\n/**\n * Set an object that will be merged sent as extra data with the event.\n * @param extras Extras object to merge into current context.\n */\nfunction setExtras(extras) {\n  getCurrentHub().setExtras(extras);\n}\n\n/**\n * Set key:value that will be sent as extra data with the event.\n * @param key String of extra\n * @param extra Any kind of data. This data will be normalized.\n */\nfunction setExtra(key, extra) {\n  getCurrentHub().setExtra(key, extra);\n}\n\n/**\n * Set an object that will be merged sent as tags data with the event.\n * @param tags Tags context object to merge into current context.\n */\nfunction setTags(tags) {\n  getCurrentHub().setTags(tags);\n}\n\n/**\n * Set key:value that will be sent as tags data with the event.\n *\n * Can also be used to unset a tag, by passing `undefined`.\n *\n * @param key String key of tag\n * @param value Value of tag\n */\nfunction setTag(key, value) {\n  getCurrentHub().setTag(key, value);\n}\n\n/**\n * Updates user context information for future events.\n *\n * @param user User context object to be set in the current context. Pass `null` to unset the user.\n */\nfunction setUser(user) {\n  getCurrentHub().setUser(user);\n}\n\n/**\n * Creates a new scope with and executes the given operation within.\n * The scope is automatically removed once the operation\n * finishes or throws.\n *\n * This is essentially a convenience function for:\n *\n *     pushScope();\n *     callback();\n *     popScope();\n *\n * @param callback that will be enclosed into push/popScope.\n */\nfunction withScope(callback) {\n  getCurrentHub().withScope(callback);\n}\n\n/**\n * Starts a new `Transaction` and returns it. This is the entry point to manual tracing instrumentation.\n *\n * A tree structure can be built by adding child spans to the transaction, and child spans to other spans. To start a\n * new child span within the transaction or any span, call the respective `.startChild()` method.\n *\n * Every child span must be finished before the transaction is finished, otherwise the unfinished spans are discarded.\n *\n * The transaction must be finished with a call to its `.finish()` method, at which point the transaction with all its\n * finished child spans will be sent to Sentry.\n *\n * NOTE: This function should only be used for *manual* instrumentation. Auto-instrumentation should call\n * `startTransaction` directly on the hub.\n *\n * @param context Properties of the new `Transaction`.\n * @param customSamplingContext Information given to the transaction sampling function (along with context-dependent\n * default values). See {@link Options.tracesSampler}.\n *\n * @returns The transaction which was just started\n */\nfunction startTransaction(\n  context,\n  customSamplingContext,\n) {\n  return getCurrentHub().startTransaction({ ...context }, customSamplingContext);\n}\n\nexport { addBreadcrumb, captureEvent, captureException, captureMessage, configureScope, setContext, setExtra, setExtras, setTag, setTags, setUser, startTransaction, withScope };\n//# sourceMappingURL=exports.js.map\n","import { urlEncode, makeDsn, dsnToString } from '@sentry/utils';\n\nconst SENTRY_API_VERSION = '7';\n\n/** Returns the prefix to construct Sentry ingestion API endpoints. */\nfunction getBaseApiEndpoint(dsn) {\n  const protocol = dsn.protocol ? `${dsn.protocol}:` : '';\n  const port = dsn.port ? `:${dsn.port}` : '';\n  return `${protocol}//${dsn.host}${port}${dsn.path ? `/${dsn.path}` : ''}/api/`;\n}\n\n/** Returns the ingest API endpoint for target. */\nfunction _getIngestEndpoint(dsn) {\n  return `${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`;\n}\n\n/** Returns a URL-encoded string with auth config suitable for a query string. */\nfunction _encodedAuth(dsn, sdkInfo) {\n  return urlEncode({\n    // We send only the minimum set of required information. See\n    // https://github.com/getsentry/sentry-javascript/issues/2572.\n    sentry_key: dsn.publicKey,\n    sentry_version: SENTRY_API_VERSION,\n    ...(sdkInfo && { sentry_client: `${sdkInfo.name}/${sdkInfo.version}` }),\n  });\n}\n\n/**\n * Returns the envelope endpoint URL with auth in the query string.\n *\n * Sending auth as part of the query string and not as custom HTTP headers avoids CORS preflight requests.\n */\nfunction getEnvelopeEndpointWithUrlEncodedAuth(\n  dsn,\n  // TODO (v8): Remove `tunnelOrOptions` in favor of `options`, and use the substitute code below\n  // options: ClientOptions = {} as ClientOptions,\n  tunnelOrOptions = {} ,\n) {\n  // TODO (v8): Use this code instead\n  // const { tunnel, _metadata = {} } = options;\n  // return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, _metadata.sdk)}`;\n\n  const tunnel = typeof tunnelOrOptions === 'string' ? tunnelOrOptions : tunnelOrOptions.tunnel;\n  const sdkInfo =\n    typeof tunnelOrOptions === 'string' || !tunnelOrOptions._metadata ? undefined : tunnelOrOptions._metadata.sdk;\n\n  return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, sdkInfo)}`;\n}\n\n/** Returns the url to the report dialog endpoint. */\nfunction getReportDialogEndpoint(\n  dsnLike,\n  dialogOptions\n\n,\n) {\n  const dsn = makeDsn(dsnLike);\n  const endpoint = `${getBaseApiEndpoint(dsn)}embed/error-page/`;\n\n  let encodedOptions = `dsn=${dsnToString(dsn)}`;\n  for (const key in dialogOptions) {\n    if (key === 'dsn') {\n      continue;\n    }\n\n    if (key === 'user') {\n      const user = dialogOptions.user;\n      if (!user) {\n        continue;\n      }\n      if (user.name) {\n        encodedOptions += `&name=${encodeURIComponent(user.name)}`;\n      }\n      if (user.email) {\n        encodedOptions += `&email=${encodeURIComponent(user.email)}`;\n      }\n    } else {\n      encodedOptions += `&${encodeURIComponent(key)}=${encodeURIComponent(dialogOptions[key] )}`;\n    }\n  }\n\n  return `${endpoint}?${encodedOptions}`;\n}\n\nexport { getEnvelopeEndpointWithUrlEncodedAuth, getReportDialogEndpoint };\n//# sourceMappingURL=api.js.map\n","import { getSdkMetadataForEnvelopeHeader, dsnToString, createEnvelope, createEventEnvelopeHeaders } from '@sentry/utils';\n\n/**\n * Apply SdkInfo (name, version, packages, integrations) to the corresponding event key.\n * Merge with existing data if any.\n **/\nfunction enhanceEventWithSdkInfo(event, sdkInfo) {\n  if (!sdkInfo) {\n    return event;\n  }\n  event.sdk = event.sdk || {};\n  event.sdk.name = event.sdk.name || sdkInfo.name;\n  event.sdk.version = event.sdk.version || sdkInfo.version;\n  event.sdk.integrations = [...(event.sdk.integrations || []), ...(sdkInfo.integrations || [])];\n  event.sdk.packages = [...(event.sdk.packages || []), ...(sdkInfo.packages || [])];\n  return event;\n}\n\n/** Creates an envelope from a Session */\nfunction createSessionEnvelope(\n  session,\n  dsn,\n  metadata,\n  tunnel,\n) {\n  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);\n  const envelopeHeaders = {\n    sent_at: new Date().toISOString(),\n    ...(sdkInfo && { sdk: sdkInfo }),\n    ...(!!tunnel && { dsn: dsnToString(dsn) }),\n  };\n\n  const envelopeItem =\n    'aggregates' in session ? [{ type: 'sessions' }, session] : [{ type: 'session' }, session];\n\n  return createEnvelope(envelopeHeaders, [envelopeItem]);\n}\n\n/**\n * Create an Envelope from an event.\n */\nfunction createEventEnvelope(\n  event,\n  dsn,\n  metadata,\n  tunnel,\n) {\n  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);\n  const eventType = event.type || 'event';\n\n  enhanceEventWithSdkInfo(event, metadata && metadata.sdk);\n\n  const envelopeHeaders = createEventEnvelopeHeaders(event, sdkInfo, tunnel, dsn);\n\n  // Prevent this data (which, if it exists, was used in earlier steps in the processing pipeline) from being sent to\n  // sentry. (Note: Our use of this property comes and goes with whatever we might be debugging, whatever hacks we may\n  // have temporarily added, etc. Even if we don't happen to be using it at some point in the future, let's not get rid\n  // of this `delete`, lest we miss putting it back in the next time the property is in use.)\n  delete event.sdkProcessingMetadata;\n\n  const eventItem = [{ type: eventType }, event];\n  return createEnvelope(envelopeHeaders, [eventItem]);\n}\n\nexport { createEventEnvelope, createSessionEnvelope };\n//# sourceMappingURL=envelope.js.map\n","import { arrayify, logger } from '@sentry/utils';\nimport { getCurrentHub } from './hub.js';\nimport { addGlobalEventProcessor } from './scope.js';\n\nconst installedIntegrations = [];\n\n/** Map of integrations assigned to a client */\n\n/**\n * Remove duplicates from the given array, preferring the last instance of any duplicate. Not guaranteed to\n * preseve the order of integrations in the array.\n *\n * @private\n */\nfunction filterDuplicates(integrations) {\n  const integrationsByName = {};\n\n  integrations.forEach(currentInstance => {\n    const { name } = currentInstance;\n\n    const existingInstance = integrationsByName[name];\n\n    // We want integrations later in the array to overwrite earlier ones of the same type, except that we never want a\n    // default instance to overwrite an existing user instance\n    if (existingInstance && !existingInstance.isDefaultInstance && currentInstance.isDefaultInstance) {\n      return;\n    }\n\n    integrationsByName[name] = currentInstance;\n  });\n\n  return Object.values(integrationsByName);\n}\n\n/** Gets integrations to install */\nfunction getIntegrationsToSetup(options) {\n  const defaultIntegrations = options.defaultIntegrations || [];\n  const userIntegrations = options.integrations;\n\n  // We flag default instances, so that later we can tell them apart from any user-created instances of the same class\n  defaultIntegrations.forEach(integration => {\n    integration.isDefaultInstance = true;\n  });\n\n  let integrations;\n\n  if (Array.isArray(userIntegrations)) {\n    integrations = [...defaultIntegrations, ...userIntegrations];\n  } else if (typeof userIntegrations === 'function') {\n    integrations = arrayify(userIntegrations(defaultIntegrations));\n  } else {\n    integrations = defaultIntegrations;\n  }\n\n  const finalIntegrations = filterDuplicates(integrations);\n\n  // The `Debug` integration prints copies of the `event` and `hint` which will be passed to `beforeSend` or\n  // `beforeSendTransaction`. It therefore has to run after all other integrations, so that the changes of all event\n  // processors will be reflected in the printed values. For lack of a more elegant way to guarantee that, we therefore\n  // locate it and, assuming it exists, pop it out of its current spot and shove it onto the end of the array.\n  const debugIndex = finalIntegrations.findIndex(integration => integration.name === 'Debug');\n  if (debugIndex !== -1) {\n    const [debugInstance] = finalIntegrations.splice(debugIndex, 1);\n    finalIntegrations.push(debugInstance);\n  }\n\n  return finalIntegrations;\n}\n\n/**\n * Given a list of integration instances this installs them all. When `withDefaults` is set to `true` then all default\n * integrations are added unless they were already provided before.\n * @param integrations array of integration instances\n * @param withDefault should enable default integrations\n */\nfunction setupIntegrations(integrations) {\n  const integrationIndex = {};\n\n  integrations.forEach(integration => {\n    integrationIndex[integration.name] = integration;\n\n    if (installedIntegrations.indexOf(integration.name) === -1) {\n      integration.setupOnce(addGlobalEventProcessor, getCurrentHub);\n      installedIntegrations.push(integration.name);\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Integration installed: ${integration.name}`);\n    }\n  });\n\n  return integrationIndex;\n}\n\nexport { getIntegrationsToSetup, installedIntegrations, setupIntegrations };\n//# sourceMappingURL=integration.js.map\n","import { uuid4, dateTimestampInSeconds, resolvedSyncPromise, truncate, normalize } from '@sentry/utils';\nimport { Scope } from '../scope.js';\n\n/**\n * Adds common information to events.\n *\n * The information includes release and environment from `options`,\n * breadcrumbs and context (extra, tags and user) from the scope.\n *\n * Information that is already present in the event is never overwritten. For\n * nested objects, such as the context, keys are merged.\n *\n * Note: This also triggers callbacks for `addGlobalEventProcessor`, but not `beforeSend`.\n *\n * @param event The original event.\n * @param hint May contain additional information about the original exception.\n * @param scope A scope containing event metadata.\n * @returns A new event with more information.\n * @hidden\n */\nfunction prepareEvent(\n  options,\n  event,\n  hint,\n  scope,\n) {\n  const { normalizeDepth = 3, normalizeMaxBreadth = 1000 } = options;\n  const prepared = {\n    ...event,\n    event_id: event.event_id || hint.event_id || uuid4(),\n    timestamp: event.timestamp || dateTimestampInSeconds(),\n  };\n\n  applyClientOptions(prepared, options);\n  applyIntegrationsMetadata(\n    prepared,\n    options.integrations.map(i => i.name),\n  );\n\n  // If we have scope given to us, use it as the base for further modifications.\n  // This allows us to prevent unnecessary copying of data if `captureContext` is not provided.\n  let finalScope = scope;\n  if (hint.captureContext) {\n    finalScope = Scope.clone(finalScope).update(hint.captureContext);\n  }\n\n  // We prepare the result here with a resolved Event.\n  let result = resolvedSyncPromise(prepared);\n\n  // This should be the last thing called, since we want that\n  // {@link Hub.addEventProcessor} gets the finished prepared event.\n  //\n  // We need to check for the existence of `finalScope.getAttachments`\n  // because `getAttachments` can be undefined if users are using an older version\n  // of `@sentry/core` that does not have the `getAttachments` method.\n  // See: https://github.com/getsentry/sentry-javascript/issues/5229\n  if (finalScope) {\n    // Collect attachments from the hint and scope\n    if (finalScope.getAttachments) {\n      const attachments = [...(hint.attachments || []), ...finalScope.getAttachments()];\n\n      if (attachments.length) {\n        hint.attachments = attachments;\n      }\n    }\n\n    // In case we have a hub we reassign it.\n    result = finalScope.applyToEvent(prepared, hint);\n  }\n\n  return result.then(evt => {\n    if (typeof normalizeDepth === 'number' && normalizeDepth > 0) {\n      return normalizeEvent(evt, normalizeDepth, normalizeMaxBreadth);\n    }\n    return evt;\n  });\n}\n\n/**\n *  Enhances event using the client configuration.\n *  It takes care of all \"static\" values like environment, release and `dist`,\n *  as well as truncating overly long values.\n * @param event event instance to be enhanced\n */\nfunction applyClientOptions(event, options) {\n  const { environment, release, dist, maxValueLength = 250 } = options;\n\n  if (!('environment' in event)) {\n    event.environment = 'environment' in options ? environment : 'production';\n  }\n\n  if (event.release === undefined && release !== undefined) {\n    event.release = release;\n  }\n\n  if (event.dist === undefined && dist !== undefined) {\n    event.dist = dist;\n  }\n\n  if (event.message) {\n    event.message = truncate(event.message, maxValueLength);\n  }\n\n  const exception = event.exception && event.exception.values && event.exception.values[0];\n  if (exception && exception.value) {\n    exception.value = truncate(exception.value, maxValueLength);\n  }\n\n  const request = event.request;\n  if (request && request.url) {\n    request.url = truncate(request.url, maxValueLength);\n  }\n}\n\n/**\n * This function adds all used integrations to the SDK info in the event.\n * @param event The event that will be filled with all integrations.\n */\nfunction applyIntegrationsMetadata(event, integrationNames) {\n  if (integrationNames.length > 0) {\n    event.sdk = event.sdk || {};\n    event.sdk.integrations = [...(event.sdk.integrations || []), ...integrationNames];\n  }\n}\n\n/**\n * Applies `normalize` function on necessary `Event` attributes to make them safe for serialization.\n * Normalized keys:\n * - `breadcrumbs.data`\n * - `user`\n * - `contexts`\n * - `extra`\n * @param event Event\n * @returns Normalized event\n */\nfunction normalizeEvent(event, depth, maxBreadth) {\n  if (!event) {\n    return null;\n  }\n\n  const normalized = {\n    ...event,\n    ...(event.breadcrumbs && {\n      breadcrumbs: event.breadcrumbs.map(b => ({\n        ...b,\n        ...(b.data && {\n          data: normalize(b.data, depth, maxBreadth),\n        }),\n      })),\n    }),\n    ...(event.user && {\n      user: normalize(event.user, depth, maxBreadth),\n    }),\n    ...(event.contexts && {\n      contexts: normalize(event.contexts, depth, maxBreadth),\n    }),\n    ...(event.extra && {\n      extra: normalize(event.extra, depth, maxBreadth),\n    }),\n  };\n\n  // event.contexts.trace stores information about a Transaction. Similarly,\n  // event.spans[] stores information about child Spans. Given that a\n  // Transaction is conceptually a Span, normalization should apply to both\n  // Transactions and Spans consistently.\n  // For now the decision is to skip normalization of Transactions and Spans,\n  // so this block overwrites the normalized event to add back the original\n  // Transaction information prior to normalization.\n  if (event.contexts && event.contexts.trace && normalized.contexts) {\n    normalized.contexts.trace = event.contexts.trace;\n\n    // event.contexts.trace.data may contain circular/dangerous data so we need to normalize it\n    if (event.contexts.trace.data) {\n      normalized.contexts.trace.data = normalize(event.contexts.trace.data, depth, maxBreadth);\n    }\n  }\n\n  // event.spans[].data may contain circular/dangerous data so we need to normalize it\n  if (event.spans) {\n    normalized.spans = event.spans.map(span => {\n      // We cannot use the spread operator here because `toJSON` on `span` is non-enumerable\n      if (span.data) {\n        span.data = normalize(span.data, depth, maxBreadth);\n      }\n      return span;\n    });\n  }\n\n  return normalized;\n}\n\nexport { prepareEvent };\n//# sourceMappingURL=prepareEvent.js.map\n","import { makeDsn, logger, checkOrSetAlreadyCaught, isPrimitive, resolvedSyncPromise, addItemToEnvelope, createAttachmentEnvelopeItem, SyncPromise, rejectedSyncPromise, SentryError, isThenable, isPlainObject } from '@sentry/utils';\nimport { getEnvelopeEndpointWithUrlEncodedAuth } from './api.js';\nimport { createEventEnvelope, createSessionEnvelope } from './envelope.js';\nimport { setupIntegrations } from './integration.js';\nimport { updateSession } from './session.js';\nimport { prepareEvent } from './utils/prepareEvent.js';\n\nconst ALREADY_SEEN_ERROR = \"Not capturing exception because it's already been captured.\";\n\n/**\n * Base implementation for all JavaScript SDK clients.\n *\n * Call the constructor with the corresponding options\n * specific to the client subclass. To access these options later, use\n * {@link Client.getOptions}.\n *\n * If a Dsn is specified in the options, it will be parsed and stored. Use\n * {@link Client.getDsn} to retrieve the Dsn at any moment. In case the Dsn is\n * invalid, the constructor will throw a {@link SentryException}. Note that\n * without a valid Dsn, the SDK will not send any events to Sentry.\n *\n * Before sending an event, it is passed through\n * {@link BaseClient._prepareEvent} to add SDK information and scope data\n * (breadcrumbs and context). To add more custom information, override this\n * method and extend the resulting prepared event.\n *\n * To issue automatically created events (e.g. via instrumentation), use\n * {@link Client.captureEvent}. It will prepare the event and pass it through\n * the callback lifecycle. To issue auto-breadcrumbs, use\n * {@link Client.addBreadcrumb}.\n *\n * @example\n * class NodeClient extends BaseClient<NodeOptions> {\n *   public constructor(options: NodeOptions) {\n *     super(options);\n *   }\n *\n *   // ...\n * }\n */\nclass BaseClient {\n  /** Options passed to the SDK. */\n\n  /** The client Dsn, if specified in options. Without this Dsn, the SDK will be disabled. */\n\n  /** Array of set up integrations. */\n   __init() {this._integrations = {};}\n\n  /** Indicates whether this client's integrations have been set up. */\n   __init2() {this._integrationsInitialized = false;}\n\n  /** Number of calls being processed */\n   __init3() {this._numProcessing = 0;}\n\n  /** Holds flushable  */\n   __init4() {this._outcomes = {};}\n\n  /**\n   * Initializes this client instance.\n   *\n   * @param options Options for the client.\n   */\n   constructor(options) {;BaseClient.prototype.__init.call(this);BaseClient.prototype.__init2.call(this);BaseClient.prototype.__init3.call(this);BaseClient.prototype.__init4.call(this);\n    this._options = options;\n    if (options.dsn) {\n      this._dsn = makeDsn(options.dsn);\n      const url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, options);\n      this._transport = options.transport({\n        recordDroppedEvent: this.recordDroppedEvent.bind(this),\n        ...options.transportOptions,\n        url,\n      });\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('No DSN provided, client will not do anything.');\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n   captureException(exception, hint, scope) {\n    // ensure we haven't captured this very object before\n    if (checkOrSetAlreadyCaught(exception)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(ALREADY_SEEN_ERROR);\n      return;\n    }\n\n    let eventId = hint && hint.event_id;\n\n    this._process(\n      this.eventFromException(exception, hint)\n        .then(event => this._captureEvent(event, hint, scope))\n        .then(result => {\n          eventId = result;\n        }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level,\n    hint,\n    scope,\n  ) {\n    let eventId = hint && hint.event_id;\n\n    const promisedEvent = isPrimitive(message)\n      ? this.eventFromMessage(String(message), level, hint)\n      : this.eventFromException(message, hint);\n\n    this._process(\n      promisedEvent\n        .then(event => this._captureEvent(event, hint, scope))\n        .then(result => {\n          eventId = result;\n        }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureEvent(event, hint, scope) {\n    // ensure we haven't captured this very object before\n    if (hint && hint.originalException && checkOrSetAlreadyCaught(hint.originalException)) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(ALREADY_SEEN_ERROR);\n      return;\n    }\n\n    let eventId = hint && hint.event_id;\n\n    this._process(\n      this._captureEvent(event, hint, scope).then(result => {\n        eventId = result;\n      }),\n    );\n\n    return eventId;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   captureSession(session) {\n    if (!this._isEnabled()) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('SDK not enabled, will not capture session.');\n      return;\n    }\n\n    if (!(typeof session.release === 'string')) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Discarded session because of missing or non-string release');\n    } else {\n      this.sendSession(session);\n      // After sending, we set init false to indicate it's not the first occurrence\n      updateSession(session, { init: false });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getDsn() {\n    return this._dsn;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getOptions() {\n    return this._options;\n  }\n\n  /**\n   * @see SdkMetadata in @sentry/types\n   *\n   * @return The metadata of the SDK\n   */\n   getSdkMetadata() {\n    return this._options._metadata;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTransport() {\n    return this._transport;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   flush(timeout) {\n    const transport = this._transport;\n    if (transport) {\n      return this._isClientDoneProcessing(timeout).then(clientFinished => {\n        return transport.flush(timeout).then(transportFlushed => clientFinished && transportFlushed);\n      });\n    } else {\n      return resolvedSyncPromise(true);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   close(timeout) {\n    return this.flush(timeout).then(result => {\n      this.getOptions().enabled = false;\n      return result;\n    });\n  }\n\n  /**\n   * Sets up the integrations\n   */\n   setupIntegrations() {\n    if (this._isEnabled() && !this._integrationsInitialized) {\n      this._integrations = setupIntegrations(this._options.integrations);\n      this._integrationsInitialized = true;\n    }\n  }\n\n  /**\n   * Gets an installed integration by its `id`.\n   *\n   * @returns The installed integration or `undefined` if no integration with that `id` was installed.\n   */\n   getIntegrationById(integrationId) {\n    return this._integrations[integrationId];\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getIntegration(integration) {\n    try {\n      return (this._integrations[integration.id] ) || null;\n    } catch (_oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Cannot retrieve integration ${integration.id} from the current Client`);\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendEvent(event, hint = {}) {\n    if (this._dsn) {\n      let env = createEventEnvelope(event, this._dsn, this._options._metadata, this._options.tunnel);\n\n      for (const attachment of hint.attachments || []) {\n        env = addItemToEnvelope(\n          env,\n          createAttachmentEnvelopeItem(\n            attachment,\n            this._options.transportOptions && this._options.transportOptions.textEncoder,\n          ),\n        );\n      }\n\n      this._sendEnvelope(env);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendSession(session) {\n    if (this._dsn) {\n      const env = createSessionEnvelope(session, this._dsn, this._options._metadata, this._options.tunnel);\n      this._sendEnvelope(env);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   recordDroppedEvent(reason, category, _event) {\n    // Note: we use `event` in replay, where we overwrite this hook.\n\n    if (this._options.sendClientReports) {\n      // We want to track each category (error, transaction, session, replay_event) separately\n      // but still keep the distinction between different type of outcomes.\n      // We could use nested maps, but it's much easier to read and type this way.\n      // A correct type for map-based implementation if we want to go that route\n      // would be `Partial<Record<SentryRequestType, Partial<Record<Outcome, number>>>>`\n      // With typescript 4.1 we could even use template literal types\n      const key = `${reason}:${category}`;\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Adding outcome: \"${key}\"`);\n\n      // The following works because undefined + 1 === NaN and NaN is falsy\n      this._outcomes[key] = this._outcomes[key] + 1 || 1;\n    }\n  }\n\n  /** Updates existing session based on the provided event */\n   _updateSessionFromEvent(session, event) {\n    let crashed = false;\n    let errored = false;\n    const exceptions = event.exception && event.exception.values;\n\n    if (exceptions) {\n      errored = true;\n\n      for (const ex of exceptions) {\n        const mechanism = ex.mechanism;\n        if (mechanism && mechanism.handled === false) {\n          crashed = true;\n          break;\n        }\n      }\n    }\n\n    // A session is updated and that session update is sent in only one of the two following scenarios:\n    // 1. Session with non terminal status and 0 errors + an error occurred -> Will set error count to 1 and send update\n    // 2. Session with non terminal status and 1 error + a crash occurred -> Will set status crashed and send update\n    const sessionNonTerminal = session.status === 'ok';\n    const shouldUpdateAndSend = (sessionNonTerminal && session.errors === 0) || (sessionNonTerminal && crashed);\n\n    if (shouldUpdateAndSend) {\n      updateSession(session, {\n        ...(crashed && { status: 'crashed' }),\n        errors: session.errors || Number(errored || crashed),\n      });\n      this.captureSession(session);\n    }\n  }\n\n  /**\n   * Determine if the client is finished processing. Returns a promise because it will wait `timeout` ms before saying\n   * \"no\" (resolving to `false`) in order to give the client a chance to potentially finish first.\n   *\n   * @param timeout The time, in ms, after which to resolve to `false` if the client is still busy. Passing `0` (or not\n   * passing anything) will make the promise wait as long as it takes for processing to finish before resolving to\n   * `true`.\n   * @returns A promise which will resolve to `true` if processing is already done or finishes before the timeout, and\n   * `false` otherwise\n   */\n   _isClientDoneProcessing(timeout) {\n    return new SyncPromise(resolve => {\n      let ticked = 0;\n      const tick = 1;\n\n      const interval = setInterval(() => {\n        if (this._numProcessing == 0) {\n          clearInterval(interval);\n          resolve(true);\n        } else {\n          ticked += tick;\n          if (timeout && ticked >= timeout) {\n            clearInterval(interval);\n            resolve(false);\n          }\n        }\n      }, tick);\n    });\n  }\n\n  /** Determines whether this SDK is enabled and a valid Dsn is present. */\n   _isEnabled() {\n    return this.getOptions().enabled !== false && this._dsn !== undefined;\n  }\n\n  /**\n   * Adds common information to events.\n   *\n   * The information includes release and environment from `options`,\n   * breadcrumbs and context (extra, tags and user) from the scope.\n   *\n   * Information that is already present in the event is never overwritten. For\n   * nested objects, such as the context, keys are merged.\n   *\n   * @param event The original event.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A new event with more information.\n   */\n   _prepareEvent(event, hint, scope) {\n    const options = this.getOptions();\n    return prepareEvent(options, event, hint, scope);\n  }\n\n  /**\n   * Processes the event and logs an error in case of rejection\n   * @param event\n   * @param hint\n   * @param scope\n   */\n   _captureEvent(event, hint = {}, scope) {\n    return this._processEvent(event, hint, scope).then(\n      finalEvent => {\n        return finalEvent.event_id;\n      },\n      reason => {\n        if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n          // If something's gone wrong, log the error as a warning. If it's just us having used a `SentryError` for\n          // control flow, log just the message (no stack) as a log-level log.\n          const sentryError = reason ;\n          if (sentryError.logLevel === 'log') {\n            logger.log(sentryError.message);\n          } else {\n            logger.warn(sentryError);\n          }\n        }\n        return undefined;\n      },\n    );\n  }\n\n  /**\n   * Processes an event (either error or message) and sends it to Sentry.\n   *\n   * This also adds breadcrumbs and context information to the event. However,\n   * platform specific meta data (such as the User's IP address) must be added\n   * by the SDK implementor.\n   *\n   *\n   * @param event The event to send to Sentry.\n   * @param hint May contain additional information about the original exception.\n   * @param scope A scope containing event metadata.\n   * @returns A SyncPromise that resolves with the event or rejects in case event was/will not be send.\n   */\n   _processEvent(event, hint, scope) {\n    const options = this.getOptions();\n    const { sampleRate } = options;\n\n    if (!this._isEnabled()) {\n      return rejectedSyncPromise(new SentryError('SDK not enabled, will not capture event.', 'log'));\n    }\n\n    const isTransaction = isTransactionEvent(event);\n    const isError = isErrorEvent(event);\n    const eventType = event.type || 'error';\n    const beforeSendLabel = `before send for type \\`${eventType}\\``;\n\n    // 1.0 === 100% events are sent\n    // 0.0 === 0% events are sent\n    // Sampling for transaction happens somewhere else\n    if (isError && typeof sampleRate === 'number' && Math.random() > sampleRate) {\n      this.recordDroppedEvent('sample_rate', 'error', event);\n      return rejectedSyncPromise(\n        new SentryError(\n          `Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`,\n          'log',\n        ),\n      );\n    }\n\n    return this._prepareEvent(event, hint, scope)\n      .then(prepared => {\n        if (prepared === null) {\n          this.recordDroppedEvent('event_processor', eventType, event);\n          throw new SentryError('An event processor returned `null`, will not send event.', 'log');\n        }\n\n        const isInternalException = hint.data && (hint.data ).__sentry__ === true;\n        if (isInternalException) {\n          return prepared;\n        }\n\n        const result = processBeforeSend(options, prepared, hint);\n        return _validateBeforeSendResult(result, beforeSendLabel);\n      })\n      .then(processedEvent => {\n        if (processedEvent === null) {\n          this.recordDroppedEvent('before_send', event.type || 'error', event);\n          throw new SentryError(`${beforeSendLabel} returned \\`null\\`, will not send event.`, 'log');\n        }\n\n        const session = scope && scope.getSession();\n        if (!isTransaction && session) {\n          this._updateSessionFromEvent(session, processedEvent);\n        }\n\n        // None of the Sentry built event processor will update transaction name,\n        // so if the transaction name has been changed by an event processor, we know\n        // it has to come from custom event processor added by a user\n        const transactionInfo = processedEvent.transaction_info;\n        if (isTransaction && transactionInfo && processedEvent.transaction !== event.transaction) {\n          const source = 'custom';\n          processedEvent.transaction_info = {\n            ...transactionInfo,\n            source,\n            changes: [\n              ...transactionInfo.changes,\n              {\n                source,\n                // use the same timestamp as the processed event.\n                timestamp: processedEvent.timestamp ,\n                propagations: transactionInfo.propagations,\n              },\n            ],\n          };\n        }\n\n        this.sendEvent(processedEvent, hint);\n        return processedEvent;\n      })\n      .then(null, reason => {\n        if (reason instanceof SentryError) {\n          throw reason;\n        }\n\n        this.captureException(reason, {\n          data: {\n            __sentry__: true,\n          },\n          originalException: reason ,\n        });\n        throw new SentryError(\n          `Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: ${reason}`,\n        );\n      });\n  }\n\n  /**\n   * Occupies the client with processing and event\n   */\n   _process(promise) {\n    this._numProcessing++;\n    void promise.then(\n      value => {\n        this._numProcessing--;\n        return value;\n      },\n      reason => {\n        this._numProcessing--;\n        return reason;\n      },\n    );\n  }\n\n  /**\n   * @inheritdoc\n   */\n   _sendEnvelope(envelope) {\n    if (this._transport && this._dsn) {\n      this._transport.send(envelope).then(null, reason => {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Error while sending event:', reason);\n      });\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Transport disabled');\n    }\n  }\n\n  /**\n   * Clears outcomes on this client and returns them.\n   */\n   _clearOutcomes() {\n    const outcomes = this._outcomes;\n    this._outcomes = {};\n    return Object.keys(outcomes).map(key => {\n      const [reason, category] = key.split(':') ;\n      return {\n        reason,\n        category,\n        quantity: outcomes[key],\n      };\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n\n}\n\n/**\n * Verifies that return value of configured `beforeSend` or `beforeSendTransaction` is of expected type, and returns the value if so.\n */\nfunction _validateBeforeSendResult(\n  beforeSendResult,\n  beforeSendLabel,\n) {\n  const invalidValueError = `${beforeSendLabel} must return \\`null\\` or a valid event.`;\n  if (isThenable(beforeSendResult)) {\n    return beforeSendResult.then(\n      event => {\n        if (!isPlainObject(event) && event !== null) {\n          throw new SentryError(invalidValueError);\n        }\n        return event;\n      },\n      e => {\n        throw new SentryError(`${beforeSendLabel} rejected with ${e}`);\n      },\n    );\n  } else if (!isPlainObject(beforeSendResult) && beforeSendResult !== null) {\n    throw new SentryError(invalidValueError);\n  }\n  return beforeSendResult;\n}\n\n/**\n * Process the matching `beforeSendXXX` callback.\n */\nfunction processBeforeSend(\n  options,\n  event,\n  hint,\n) {\n  const { beforeSend, beforeSendTransaction } = options;\n\n  if (isErrorEvent(event) && beforeSend) {\n    return beforeSend(event, hint);\n  }\n\n  if (isTransactionEvent(event) && beforeSendTransaction) {\n    return beforeSendTransaction(event, hint);\n  }\n\n  return event;\n}\n\nfunction isErrorEvent(event) {\n  return event.type === undefined;\n}\n\nfunction isTransactionEvent(event) {\n  return event.type === 'transaction';\n}\n\nexport { BaseClient };\n//# sourceMappingURL=baseclient.js.map\n","import { logger } from '@sentry/utils';\nimport { getCurrentHub } from './hub.js';\n\n/** A class object that can instantiate Client objects. */\n\n/**\n * Internal function to create a new SDK client instance. The client is\n * installed and then bound to the current scope.\n *\n * @param clientClass The client class to instantiate.\n * @param options Options to pass to the client.\n */\nfunction initAndBind(\n  clientClass,\n  options,\n) {\n  if (options.debug === true) {\n    if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__)) {\n      logger.enable();\n    } else {\n      // use `console.warn` rather than `logger.warn` since by non-debug bundles have all `logger.x` statements stripped\n      // eslint-disable-next-line no-console\n      console.warn('[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.');\n    }\n  }\n  const hub = getCurrentHub();\n  const scope = hub.getScope();\n  if (scope) {\n    scope.update(options.initialScope);\n  }\n\n  const client = new clientClass(options);\n  hub.bindClient(client);\n}\n\nexport { initAndBind };\n//# sourceMappingURL=sdk.js.map\n","import { forEachEnvelopeItem, envelopeItemTypeToDataCategory, isRateLimited, resolvedSyncPromise, createEnvelope, serializeEnvelope, logger, updateRateLimits, SentryError, makePromiseBuffer } from '@sentry/utils';\n\nconst DEFAULT_TRANSPORT_BUFFER_SIZE = 30;\n\n/**\n * Creates an instance of a Sentry `Transport`\n *\n * @param options\n * @param makeRequest\n */\nfunction createTransport(\n  options,\n  makeRequest,\n  buffer = makePromiseBuffer(options.bufferSize || DEFAULT_TRANSPORT_BUFFER_SIZE),\n) {\n  let rateLimits = {};\n\n  const flush = (timeout) => buffer.drain(timeout);\n\n  function send(envelope) {\n    const filteredEnvelopeItems = [];\n\n    // Drop rate limited items from envelope\n    forEachEnvelopeItem(envelope, (item, type) => {\n      const envelopeItemDataCategory = envelopeItemTypeToDataCategory(type);\n      if (isRateLimited(rateLimits, envelopeItemDataCategory)) {\n        const event = getEventForEnvelopeItem(item, type);\n        options.recordDroppedEvent('ratelimit_backoff', envelopeItemDataCategory, event);\n      } else {\n        filteredEnvelopeItems.push(item);\n      }\n    });\n\n    // Skip sending if envelope is empty after filtering out rate limited events\n    if (filteredEnvelopeItems.length === 0) {\n      return resolvedSyncPromise();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const filteredEnvelope = createEnvelope(envelope[0], filteredEnvelopeItems );\n\n    // Creates client report for each item in an envelope\n    const recordEnvelopeLoss = (reason) => {\n      forEachEnvelopeItem(filteredEnvelope, (item, type) => {\n        const event = getEventForEnvelopeItem(item, type);\n        options.recordDroppedEvent(reason, envelopeItemTypeToDataCategory(type), event);\n      });\n    };\n\n    const requestTask = () =>\n      makeRequest({ body: serializeEnvelope(filteredEnvelope, options.textEncoder) }).then(\n        response => {\n          // We don't want to throw on NOK responses, but we want to at least log them\n          if (response.statusCode !== undefined && (response.statusCode < 200 || response.statusCode >= 300)) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`Sentry responded with status code ${response.statusCode} to sent event.`);\n          }\n\n          rateLimits = updateRateLimits(rateLimits, response);\n        },\n        error => {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Failed while sending event:', error);\n          recordEnvelopeLoss('network_error');\n        },\n      );\n\n    return buffer.add(requestTask).then(\n      result => result,\n      error => {\n        if (error instanceof SentryError) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Skipped sending event because buffer is full.');\n          recordEnvelopeLoss('queue_overflow');\n          return resolvedSyncPromise();\n        } else {\n          throw error;\n        }\n      },\n    );\n  }\n\n  return {\n    send,\n    flush,\n  };\n}\n\nfunction getEventForEnvelopeItem(item, type) {\n  if (type !== 'event' && type !== 'transaction') {\n    return undefined;\n  }\n\n  return Array.isArray(item) ? (item )[1] : undefined;\n}\n\nexport { DEFAULT_TRANSPORT_BUFFER_SIZE, createTransport };\n//# sourceMappingURL=base.js.map\n","const SDK_VERSION = '7.29.0';\n\nexport { SDK_VERSION };\n//# sourceMappingURL=version.js.map\n","import { getOriginalFunction } from '@sentry/utils';\n\nlet originalFunctionToString;\n\n/** Patch toString calls to return proper name for wrapped functions */\nclass FunctionToString  {constructor() { FunctionToString.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'FunctionToString';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = FunctionToString.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    originalFunctionToString = Function.prototype.toString;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Function.prototype.toString = function ( ...args) {\n      const context = getOriginalFunction(this) || this;\n      return originalFunctionToString.apply(context, args);\n    };\n  }\n} FunctionToString.__initStatic();\n\nexport { FunctionToString };\n//# sourceMappingURL=functiontostring.js.map\n","import { logger, getEventDescription, stringMatchesSomePattern } from '@sentry/utils';\n\n// \"Script error.\" is hard coded into browsers for errors that it can't read.\n// this is the result of a script being pulled in from an external domain and CORS.\nconst DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\n\n/** Options for the InboundFilters integration */\n\n/** Inbound filters configurable by the user */\nclass InboundFilters  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'InboundFilters';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = InboundFilters.id;}\n\n   constructor(  _options = {}) {;this._options = _options;InboundFilters.prototype.__init.call(this);}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(addGlobalEventProcessor, getCurrentHub) {\n    const eventProcess = (event) => {\n      const hub = getCurrentHub();\n      if (hub) {\n        const self = hub.getIntegration(InboundFilters);\n        if (self) {\n          const client = hub.getClient();\n          const clientOptions = client ? client.getOptions() : {};\n          const options = _mergeOptions(self._options, clientOptions);\n          return _shouldDropEvent(event, options) ? null : event;\n        }\n      }\n      return event;\n    };\n\n    eventProcess.id = this.name;\n    addGlobalEventProcessor(eventProcess);\n  }\n} InboundFilters.__initStatic();\n\n/** JSDoc */\nfunction _mergeOptions(\n  internalOptions = {},\n  clientOptions = {},\n) {\n  return {\n    allowUrls: [...(internalOptions.allowUrls || []), ...(clientOptions.allowUrls || [])],\n    denyUrls: [...(internalOptions.denyUrls || []), ...(clientOptions.denyUrls || [])],\n    ignoreErrors: [\n      ...(internalOptions.ignoreErrors || []),\n      ...(clientOptions.ignoreErrors || []),\n      ...DEFAULT_IGNORE_ERRORS,\n    ],\n    ignoreInternal: internalOptions.ignoreInternal !== undefined ? internalOptions.ignoreInternal : true,\n  };\n}\n\n/** JSDoc */\nfunction _shouldDropEvent(event, options) {\n  if (options.ignoreInternal && _isSentryError(event)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(`Event dropped due to being internal Sentry Error.\\nEvent: ${getEventDescription(event)}`);\n    return true;\n  }\n  if (_isIgnoredError(event, options.ignoreErrors)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to being matched by \\`ignoreErrors\\` option.\\nEvent: ${getEventDescription(event)}`,\n      );\n    return true;\n  }\n  if (_isDeniedUrl(event, options.denyUrls)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to being matched by \\`denyUrls\\` option.\\nEvent: ${getEventDescription(\n          event,\n        )}.\\nUrl: ${_getEventFilterUrl(event)}`,\n      );\n    return true;\n  }\n  if (!_isAllowedUrl(event, options.allowUrls)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `Event dropped due to not being matched by \\`allowUrls\\` option.\\nEvent: ${getEventDescription(\n          event,\n        )}.\\nUrl: ${_getEventFilterUrl(event)}`,\n      );\n    return true;\n  }\n  return false;\n}\n\nfunction _isIgnoredError(event, ignoreErrors) {\n  if (!ignoreErrors || !ignoreErrors.length) {\n    return false;\n  }\n\n  return _getPossibleEventMessages(event).some(message => stringMatchesSomePattern(message, ignoreErrors));\n}\n\nfunction _isDeniedUrl(event, denyUrls) {\n  // TODO: Use Glob instead?\n  if (!denyUrls || !denyUrls.length) {\n    return false;\n  }\n  const url = _getEventFilterUrl(event);\n  return !url ? false : stringMatchesSomePattern(url, denyUrls);\n}\n\nfunction _isAllowedUrl(event, allowUrls) {\n  // TODO: Use Glob instead?\n  if (!allowUrls || !allowUrls.length) {\n    return true;\n  }\n  const url = _getEventFilterUrl(event);\n  return !url ? true : stringMatchesSomePattern(url, allowUrls);\n}\n\nfunction _getPossibleEventMessages(event) {\n  if (event.message) {\n    return [event.message];\n  }\n  if (event.exception) {\n    try {\n      const { type = '', value = '' } = (event.exception.values && event.exception.values[0]) || {};\n      return [`${value}`, `${type}: ${value}`];\n    } catch (oO) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(`Cannot extract message for event ${getEventDescription(event)}`);\n      return [];\n    }\n  }\n  return [];\n}\n\nfunction _isSentryError(event) {\n  try {\n    // @ts-ignore can't be a sentry error if undefined\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    return event.exception.values[0].type === 'SentryError';\n  } catch (e) {\n    // ignore\n  }\n  return false;\n}\n\nfunction _getLastValidUrl(frames = []) {\n  for (let i = frames.length - 1; i >= 0; i--) {\n    const frame = frames[i];\n\n    if (frame && frame.filename !== '<anonymous>' && frame.filename !== '[native code]') {\n      return frame.filename || null;\n    }\n  }\n\n  return null;\n}\n\nfunction _getEventFilterUrl(event) {\n  try {\n    let frames;\n    try {\n      // @ts-ignore we only care about frames if the whole thing here is defined\n      frames = event.exception.values[0].stacktrace.frames;\n    } catch (e) {\n      // ignore\n    }\n    return frames ? _getLastValidUrl(frames) : null;\n  } catch (oO) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(`Cannot extract url for event ${getEventDescription(event)}`);\n    return null;\n  }\n}\n\nexport { InboundFilters, _mergeOptions, _shouldDropEvent };\n//# sourceMappingURL=inboundfilters.js.map\n","import { withScope, captureException } from '@sentry/core';\nimport { GLOBAL_OBJ, getOriginalFunction, addExceptionTypeValue, addExceptionMechanism, markFunctionWrapped, addNonEnumerableProperty } from '@sentry/utils';\n\nconst WINDOW = GLOBAL_OBJ ;\n\nlet ignoreOnError = 0;\n\n/**\n * @hidden\n */\nfunction shouldIgnoreOnError() {\n  return ignoreOnError > 0;\n}\n\n/**\n * @hidden\n */\nfunction ignoreNextOnError() {\n  // onerror should trigger before setTimeout\n  ignoreOnError++;\n  setTimeout(() => {\n    ignoreOnError--;\n  });\n}\n\n/**\n * Instruments the given function and sends an event to Sentry every time the\n * function throws an exception.\n *\n * @param fn A function to wrap. It is generally safe to pass an unbound function, because the returned wrapper always\n * has a correct `this` context.\n * @returns The wrapped function.\n * @hidden\n */\nfunction wrap(\n  fn,\n  options\n\n = {},\n  before,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n) {\n  // for future readers what this does is wrap a function and then create\n  // a bi-directional wrapping between them.\n  //\n  // example: wrapped = wrap(original);\n  //  original.__sentry_wrapped__ -> wrapped\n  //  wrapped.__sentry_original__ -> original\n\n  if (typeof fn !== 'function') {\n    return fn;\n  }\n\n  try {\n    // if we're dealing with a function that was previously wrapped, return\n    // the original wrapper.\n    const wrapper = fn.__sentry_wrapped__;\n    if (wrapper) {\n      return wrapper;\n    }\n\n    // We don't wanna wrap it twice\n    if (getOriginalFunction(fn)) {\n      return fn;\n    }\n  } catch (e) {\n    // Just accessing custom props in some Selenium environments\n    // can cause a \"Permission denied\" exception (see raven-js#495).\n    // Bail on wrapping and return the function as-is (defers to window.onerror).\n    return fn;\n  }\n\n  /* eslint-disable prefer-rest-params */\n  // It is important that `sentryWrapped` is not an arrow function to preserve the context of `this`\n  const sentryWrapped = function () {\n    const args = Array.prototype.slice.call(arguments);\n\n    try {\n      if (before && typeof before === 'function') {\n        before.apply(this, arguments);\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n      const wrappedArguments = args.map((arg) => wrap(arg, options));\n\n      // Attempt to invoke user-land function\n      // NOTE: If you are a Sentry user, and you are seeing this stack frame, it\n      //       means the sentry.javascript SDK caught an error invoking your application code. This\n      //       is expected behavior and NOT indicative of a bug with sentry.javascript.\n      return fn.apply(this, wrappedArguments);\n    } catch (ex) {\n      ignoreNextOnError();\n\n      withScope((scope) => {\n        scope.addEventProcessor((event) => {\n          if (options.mechanism) {\n            addExceptionTypeValue(event, undefined, undefined);\n            addExceptionMechanism(event, options.mechanism);\n          }\n\n          event.extra = {\n            ...event.extra,\n            arguments: args,\n          };\n\n          return event;\n        });\n\n        captureException(ex);\n      });\n\n      throw ex;\n    }\n  };\n  /* eslint-enable prefer-rest-params */\n\n  // Accessing some objects may throw\n  // ref: https://github.com/getsentry/sentry-javascript/issues/1168\n  try {\n    for (const property in fn) {\n      if (Object.prototype.hasOwnProperty.call(fn, property)) {\n        sentryWrapped[property] = fn[property];\n      }\n    }\n  } catch (_oO) {} // eslint-disable-line no-empty\n\n  // Signal that this function has been wrapped/filled already\n  // for both debugging and to prevent it to being wrapped/filled twice\n  markFunctionWrapped(sentryWrapped, fn);\n\n  addNonEnumerableProperty(fn, '__sentry_wrapped__', sentryWrapped);\n\n  // Restore original function name (not all browsers allow that)\n  try {\n    const descriptor = Object.getOwnPropertyDescriptor(sentryWrapped, 'name') ;\n    if (descriptor.configurable) {\n      Object.defineProperty(sentryWrapped, 'name', {\n        get() {\n          return fn.name;\n        },\n      });\n    }\n    // eslint-disable-next-line no-empty\n  } catch (_oO) {}\n\n  return sentryWrapped;\n}\n\n/**\n * All properties the report dialog supports\n */\n\nexport { WINDOW, ignoreNextOnError, shouldIgnoreOnError, wrap };\n//# sourceMappingURL=helpers.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { isEvent, extractExceptionKeysForMessage, normalizeToSize, addExceptionMechanism, resolvedSyncPromise, isErrorEvent, isDOMError, isDOMException, addExceptionTypeValue, isError, isPlainObject } from '@sentry/utils';\n\n/**\n * This function creates an exception from a JavaScript Error\n */\nfunction exceptionFromError(stackParser, ex) {\n  // Get the frames first since Opera can lose the stack if we touch anything else first\n  const frames = parseStackFrames(stackParser, ex);\n\n  const exception = {\n    type: ex && ex.name,\n    value: extractMessage(ex),\n  };\n\n  if (frames.length) {\n    exception.stacktrace = { frames };\n  }\n\n  if (exception.type === undefined && exception.value === '') {\n    exception.value = 'Unrecoverable error caught';\n  }\n\n  return exception;\n}\n\n/**\n * @hidden\n */\nfunction eventFromPlainObject(\n  stackParser,\n  exception,\n  syntheticException,\n  isUnhandledRejection,\n) {\n  const hub = getCurrentHub();\n  const client = hub.getClient();\n  const normalizeDepth = client && client.getOptions().normalizeDepth;\n\n  const event = {\n    exception: {\n      values: [\n        {\n          type: isEvent(exception) ? exception.constructor.name : isUnhandledRejection ? 'UnhandledRejection' : 'Error',\n          value: `Non-Error ${\n            isUnhandledRejection ? 'promise rejection' : 'exception'\n          } captured with keys: ${extractExceptionKeysForMessage(exception)}`,\n        },\n      ],\n    },\n    extra: {\n      __serialized__: normalizeToSize(exception, normalizeDepth),\n    },\n  };\n\n  if (syntheticException) {\n    const frames = parseStackFrames(stackParser, syntheticException);\n    if (frames.length) {\n      // event.exception.values[0] has been set above\n      (event.exception ).values[0].stacktrace = { frames };\n    }\n  }\n\n  return event;\n}\n\n/**\n * @hidden\n */\nfunction eventFromError(stackParser, ex) {\n  return {\n    exception: {\n      values: [exceptionFromError(stackParser, ex)],\n    },\n  };\n}\n\n/** Parses stack frames from an error */\nfunction parseStackFrames(\n  stackParser,\n  ex,\n) {\n  // Access and store the stacktrace property before doing ANYTHING\n  // else to it because Opera is not very good at providing it\n  // reliably in other circumstances.\n  const stacktrace = ex.stacktrace || ex.stack || '';\n\n  const popSize = getPopSize(ex);\n\n  try {\n    return stackParser(stacktrace, popSize);\n  } catch (e) {\n    // no-empty\n  }\n\n  return [];\n}\n\n// Based on our own mapping pattern - https://github.com/getsentry/sentry/blob/9f08305e09866c8bd6d0c24f5b0aabdd7dd6c59c/src/sentry/lang/javascript/errormapping.py#L83-L108\nconst reactMinifiedRegexp = /Minified React error #\\d+;/i;\n\nfunction getPopSize(ex) {\n  if (ex) {\n    if (typeof ex.framesToPop === 'number') {\n      return ex.framesToPop;\n    }\n\n    if (reactMinifiedRegexp.test(ex.message)) {\n      return 1;\n    }\n  }\n\n  return 0;\n}\n\n/**\n * There are cases where stacktrace.message is an Event object\n * https://github.com/getsentry/sentry-javascript/issues/1949\n * In this specific case we try to extract stacktrace.message.error.message\n */\nfunction extractMessage(ex) {\n  const message = ex && ex.message;\n  if (!message) {\n    return 'No error message';\n  }\n  if (message.error && typeof message.error.message === 'string') {\n    return message.error.message;\n  }\n  return message;\n}\n\n/**\n * Creates an {@link Event} from all inputs to `captureException` and non-primitive inputs to `captureMessage`.\n * @hidden\n */\nfunction eventFromException(\n  stackParser,\n  exception,\n  hint,\n  attachStacktrace,\n) {\n  const syntheticException = (hint && hint.syntheticException) || undefined;\n  const event = eventFromUnknownInput(stackParser, exception, syntheticException, attachStacktrace);\n  addExceptionMechanism(event); // defaults to { type: 'generic', handled: true }\n  event.level = 'error';\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n  return resolvedSyncPromise(event);\n}\n\n/**\n * Builds and Event from a Message\n * @hidden\n */\nfunction eventFromMessage(\n  stackParser,\n  message,\n  // eslint-disable-next-line deprecation/deprecation\n  level = 'info',\n  hint,\n  attachStacktrace,\n) {\n  const syntheticException = (hint && hint.syntheticException) || undefined;\n  const event = eventFromString(stackParser, message, syntheticException, attachStacktrace);\n  event.level = level;\n  if (hint && hint.event_id) {\n    event.event_id = hint.event_id;\n  }\n  return resolvedSyncPromise(event);\n}\n\n/**\n * @hidden\n */\nfunction eventFromUnknownInput(\n  stackParser,\n  exception,\n  syntheticException,\n  attachStacktrace,\n  isUnhandledRejection,\n) {\n  let event;\n\n  if (isErrorEvent(exception ) && (exception ).error) {\n    // If it is an ErrorEvent with `error` property, extract it to get actual Error\n    const errorEvent = exception ;\n    return eventFromError(stackParser, errorEvent.error );\n  }\n\n  // If it is a `DOMError` (which is a legacy API, but still supported in some browsers) then we just extract the name\n  // and message, as it doesn't provide anything else. According to the spec, all `DOMExceptions` should also be\n  // `Error`s, but that's not the case in IE11, so in that case we treat it the same as we do a `DOMError`.\n  //\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMError\n  // https://developer.mozilla.org/en-US/docs/Web/API/DOMException\n  // https://webidl.spec.whatwg.org/#es-DOMException-specialness\n  if (isDOMError(exception ) || isDOMException(exception )) {\n    const domException = exception ;\n\n    if ('stack' in (exception )) {\n      event = eventFromError(stackParser, exception );\n    } else {\n      const name = domException.name || (isDOMError(domException) ? 'DOMError' : 'DOMException');\n      const message = domException.message ? `${name}: ${domException.message}` : name;\n      event = eventFromString(stackParser, message, syntheticException, attachStacktrace);\n      addExceptionTypeValue(event, message);\n    }\n    if ('code' in domException) {\n      event.tags = { ...event.tags, 'DOMException.code': `${domException.code}` };\n    }\n\n    return event;\n  }\n  if (isError(exception)) {\n    // we have a real Error object, do nothing\n    return eventFromError(stackParser, exception);\n  }\n  if (isPlainObject(exception) || isEvent(exception)) {\n    // If it's a plain object or an instance of `Event` (the built-in JS kind, not this SDK's `Event` type), serialize\n    // it manually. This will allow us to group events based on top-level keys which is much better than creating a new\n    // group on any key/value change.\n    const objectException = exception ;\n    event = eventFromPlainObject(stackParser, objectException, syntheticException, isUnhandledRejection);\n    addExceptionMechanism(event, {\n      synthetic: true,\n    });\n    return event;\n  }\n\n  // If none of previous checks were valid, then it means that it's not:\n  // - an instance of DOMError\n  // - an instance of DOMException\n  // - an instance of Event\n  // - an instance of Error\n  // - a valid ErrorEvent (one with an error property)\n  // - a plain Object\n  //\n  // So bail out and capture it as a simple message:\n  event = eventFromString(stackParser, exception , syntheticException, attachStacktrace);\n  addExceptionTypeValue(event, `${exception}`, undefined);\n  addExceptionMechanism(event, {\n    synthetic: true,\n  });\n\n  return event;\n}\n\n/**\n * @hidden\n */\nfunction eventFromString(\n  stackParser,\n  input,\n  syntheticException,\n  attachStacktrace,\n) {\n  const event = {\n    message: input,\n  };\n\n  if (attachStacktrace && syntheticException) {\n    const frames = parseStackFrames(stackParser, syntheticException);\n    if (frames.length) {\n      event.exception = {\n        values: [{ value: input, stacktrace: { frames } }],\n      };\n    }\n  }\n\n  return event;\n}\n\nexport { eventFromError, eventFromException, eventFromMessage, eventFromPlainObject, eventFromString, eventFromUnknownInput, exceptionFromError, parseStackFrames };\n//# sourceMappingURL=eventbuilder.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { addInstrumentationHandler, getEventDescription, logger, htmlTreeAsString, severityLevelFromString, safeJoin, parseUrl } from '@sentry/utils';\nimport { WINDOW } from '../helpers.js';\n\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\n/** JSDoc */\n\n/** maxStringLength gets capped to prevent 100 breadcrumbs exceeding 1MB event payload size */\nconst MAX_ALLOWED_STRING_LENGTH = 1024;\n\nconst BREADCRUMB_INTEGRATION_ID = 'Breadcrumbs';\n\n/**\n * Default Breadcrumbs instrumentations\n * TODO: Deprecated - with v6, this will be renamed to `Instrument`\n */\nclass Breadcrumbs  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = BREADCRUMB_INTEGRATION_ID;}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Breadcrumbs.id;}\n\n  /**\n   * Options of the breadcrumbs integration.\n   */\n  // This field is public, because we use it in the browser client to check if the `sentry` option is enabled.\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options) {;Breadcrumbs.prototype.__init.call(this);\n    this.options = {\n      console: true,\n      dom: true,\n      fetch: true,\n      history: true,\n      sentry: true,\n      xhr: true,\n      ...options,\n    };\n  }\n\n  /**\n   * Instrument browser built-ins w/ breadcrumb capturing\n   *  - Console API\n   *  - DOM API (click/typing)\n   *  - XMLHttpRequest API\n   *  - Fetch API\n   *  - History API\n   */\n   setupOnce() {\n    if (this.options.console) {\n      addInstrumentationHandler('console', _consoleBreadcrumb);\n    }\n    if (this.options.dom) {\n      addInstrumentationHandler('dom', _domBreadcrumb(this.options.dom));\n    }\n    if (this.options.xhr) {\n      addInstrumentationHandler('xhr', _xhrBreadcrumb);\n    }\n    if (this.options.fetch) {\n      addInstrumentationHandler('fetch', _fetchBreadcrumb);\n    }\n    if (this.options.history) {\n      addInstrumentationHandler('history', _historyBreadcrumb);\n    }\n  }\n\n  /**\n   * Adds a breadcrumb for Sentry events or transactions if this option is enabled.\n   */\n   addSentryBreadcrumb(event) {\n    if (this.options.sentry) {\n      getCurrentHub().addBreadcrumb(\n        {\n          category: `sentry.${event.type === 'transaction' ? 'transaction' : 'event'}`,\n          event_id: event.event_id,\n          level: event.level,\n          message: getEventDescription(event),\n        },\n        {\n          event,\n        },\n      );\n    }\n  }\n} Breadcrumbs.__initStatic();\n\n/**\n * A HOC that creaes a function that creates breadcrumbs from DOM API calls.\n * This is a HOC so that we get access to dom options in the closure.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _domBreadcrumb(dom) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  function _innerDomBreadcrumb(handlerData) {\n    let target;\n    let keyAttrs = typeof dom === 'object' ? dom.serializeAttribute : undefined;\n\n    let maxStringLength =\n      typeof dom === 'object' && typeof dom.maxStringLength === 'number' ? dom.maxStringLength : undefined;\n    if (maxStringLength && maxStringLength > MAX_ALLOWED_STRING_LENGTH) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(\n          `\\`dom.maxStringLength\\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${maxStringLength} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`,\n        );\n      maxStringLength = MAX_ALLOWED_STRING_LENGTH;\n    }\n\n    if (typeof keyAttrs === 'string') {\n      keyAttrs = [keyAttrs];\n    }\n\n    // Accessing event.target can throw (see getsentry/raven-js#838, #768)\n    try {\n      target = handlerData.event.target\n        ? htmlTreeAsString(handlerData.event.target , { keyAttrs, maxStringLength })\n        : htmlTreeAsString(handlerData.event , { keyAttrs, maxStringLength });\n    } catch (e) {\n      target = '<unknown>';\n    }\n\n    if (target.length === 0) {\n      return;\n    }\n\n    getCurrentHub().addBreadcrumb(\n      {\n        category: `ui.${handlerData.name}`,\n        message: target,\n      },\n      {\n        event: handlerData.event,\n        name: handlerData.name,\n        global: handlerData.global,\n      },\n    );\n  }\n\n  return _innerDomBreadcrumb;\n}\n\n/**\n * Creates breadcrumbs from console API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _consoleBreadcrumb(handlerData) {\n  // This is a hack to fix a Vue3-specific bug that causes an infinite loop of\n  // console warnings. This happens when a Vue template is rendered with\n  // an undeclared variable, which we try to stringify, ultimately causing\n  // Vue to issue another warning which repeats indefinitely.\n  // see: https://github.com/getsentry/sentry-javascript/pull/6010\n  // see: https://github.com/getsentry/sentry-javascript/issues/5916\n  for (let i = 0; i < handlerData.args.length; i++) {\n    if (handlerData.args[i] === 'ref=Ref<') {\n      handlerData.args[i + 1] = 'viewRef';\n      break;\n    }\n  }\n  const breadcrumb = {\n    category: 'console',\n    data: {\n      arguments: handlerData.args,\n      logger: 'console',\n    },\n    level: severityLevelFromString(handlerData.level),\n    message: safeJoin(handlerData.args, ' '),\n  };\n\n  if (handlerData.level === 'assert') {\n    if (handlerData.args[0] === false) {\n      breadcrumb.message = `Assertion failed: ${safeJoin(handlerData.args.slice(1), ' ') || 'console.assert'}`;\n      breadcrumb.data.arguments = handlerData.args.slice(1);\n    } else {\n      // Don't capture a breadcrumb for passed assertions\n      return;\n    }\n  }\n\n  getCurrentHub().addBreadcrumb(breadcrumb, {\n    input: handlerData.args,\n    level: handlerData.level,\n  });\n}\n\n/**\n * Creates breadcrumbs from XHR API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _xhrBreadcrumb(handlerData) {\n  if (handlerData.endTimestamp) {\n    // We only capture complete, non-sentry requests\n    if (handlerData.xhr.__sentry_own_request__) {\n      return;\n    }\n\n    const { method, url, status_code, body } = handlerData.xhr.__sentry_xhr__ || {};\n\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'xhr',\n        data: {\n          method,\n          url,\n          status_code,\n        },\n        type: 'http',\n      },\n      {\n        xhr: handlerData.xhr,\n        input: body,\n      },\n    );\n\n    return;\n  }\n}\n\n/**\n * Creates breadcrumbs from fetch API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _fetchBreadcrumb(handlerData) {\n  // We only capture complete fetch requests\n  if (!handlerData.endTimestamp) {\n    return;\n  }\n\n  if (handlerData.fetchData.url.match(/sentry_key/) && handlerData.fetchData.method === 'POST') {\n    // We will not create breadcrumbs for fetch requests that contain `sentry_key` (internal sentry requests)\n    return;\n  }\n\n  if (handlerData.error) {\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'fetch',\n        data: handlerData.fetchData,\n        level: 'error',\n        type: 'http',\n      },\n      {\n        data: handlerData.error,\n        input: handlerData.args,\n      },\n    );\n  } else {\n    getCurrentHub().addBreadcrumb(\n      {\n        category: 'fetch',\n        data: {\n          ...handlerData.fetchData,\n          status_code: handlerData.response.status,\n        },\n        type: 'http',\n      },\n      {\n        input: handlerData.args,\n        response: handlerData.response,\n      },\n    );\n  }\n}\n\n/**\n * Creates breadcrumbs from history API calls\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _historyBreadcrumb(handlerData) {\n  let from = handlerData.from;\n  let to = handlerData.to;\n  const parsedLoc = parseUrl(WINDOW.location.href);\n  let parsedFrom = parseUrl(from);\n  const parsedTo = parseUrl(to);\n\n  // Initial pushState doesn't provide `from` information\n  if (!parsedFrom.path) {\n    parsedFrom = parsedLoc;\n  }\n\n  // Use only the path component of the URL if the URL matches the current\n  // document (almost all the time when using pushState)\n  if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host) {\n    to = parsedTo.relative;\n  }\n  if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host) {\n    from = parsedFrom.relative;\n  }\n\n  getCurrentHub().addBreadcrumb({\n    category: 'navigation',\n    data: {\n      from,\n      to,\n    },\n  });\n}\n\nexport { BREADCRUMB_INTEGRATION_ID, Breadcrumbs };\n//# sourceMappingURL=breadcrumbs.js.map\n","import { _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { BaseClient, SDK_VERSION, getEnvelopeEndpointWithUrlEncodedAuth } from '@sentry/core';\nimport { logger, createClientReportEnvelope, dsnToString, serializeEnvelope } from '@sentry/utils';\nimport { eventFromException, eventFromMessage } from './eventbuilder.js';\nimport { WINDOW } from './helpers.js';\nimport { BREADCRUMB_INTEGRATION_ID } from './integrations/breadcrumbs.js';\n\n/**\n * Configuration options for the Sentry Browser SDK.\n * @see @sentry/types Options for more information.\n */\n\n/**\n * The Sentry Browser SDK Client.\n *\n * @see BrowserOptions for documentation on configuration options.\n * @see SentryClient for usage documentation.\n */\nclass BrowserClient extends BaseClient {\n  /**\n   * Creates a new Browser SDK instance.\n   *\n   * @param options Configuration options for this SDK.\n   */\n   constructor(options) {\n    options._metadata = options._metadata || {};\n    options._metadata.sdk = options._metadata.sdk || {\n      name: 'sentry.javascript.browser',\n      packages: [\n        {\n          name: 'npm:@sentry/browser',\n          version: SDK_VERSION,\n        },\n      ],\n      version: SDK_VERSION,\n    };\n\n    super(options);\n\n    if (options.sendClientReports && WINDOW.document) {\n      WINDOW.document.addEventListener('visibilitychange', () => {\n        if (WINDOW.document.visibilityState === 'hidden') {\n          this._flushOutcomes();\n        }\n      });\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   eventFromException(exception, hint) {\n    return eventFromException(this._options.stackParser, exception, hint, this._options.attachStacktrace);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   eventFromMessage(\n    message,\n    // eslint-disable-next-line deprecation/deprecation\n    level = 'info',\n    hint,\n  ) {\n    return eventFromMessage(this._options.stackParser, message, level, hint, this._options.attachStacktrace);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   sendEvent(event, hint) {\n    // We only want to add the sentry event breadcrumb when the user has the breadcrumb integration installed and\n    // activated its `sentry` option.\n    // We also do not want to use the `Breadcrumbs` class here directly, because we do not want it to be included in\n    // bundles, if it is not used by the SDK.\n    // This all sadly is a bit ugly, but we currently don't have a \"pre-send\" hook on the integrations so we do it this\n    // way for now.\n    const breadcrumbIntegration = this.getIntegrationById(BREADCRUMB_INTEGRATION_ID) ;\n    // We check for definedness of `addSentryBreadcrumb` in case users provided their own integration with id\n    // \"Breadcrumbs\" that does not have this function.\n    _optionalChain([breadcrumbIntegration, 'optionalAccess', _ => _.addSentryBreadcrumb, 'optionalCall', _2 => _2(event)]);\n\n    super.sendEvent(event, hint);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   _prepareEvent(event, hint, scope) {\n    event.platform = event.platform || 'javascript';\n    return super._prepareEvent(event, hint, scope);\n  }\n\n  /**\n   * Sends client reports as an envelope.\n   */\n   _flushOutcomes() {\n    const outcomes = this._clearOutcomes();\n\n    if (outcomes.length === 0) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('No outcomes to send');\n      return;\n    }\n\n    if (!this._dsn) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('No dsn provided, will not send outcomes');\n      return;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Sending outcomes:', outcomes);\n\n    const url = getEnvelopeEndpointWithUrlEncodedAuth(this._dsn, this._options);\n    const envelope = createClientReportEnvelope(outcomes, this._options.tunnel && dsnToString(this._dsn));\n\n    try {\n      const isRealNavigator = Object.prototype.toString.call(WINDOW && WINDOW.navigator) === '[object Navigator]';\n      const hasSendBeacon = isRealNavigator && typeof WINDOW.navigator.sendBeacon === 'function';\n      // Make sure beacon is not used if user configures custom transport options\n      if (hasSendBeacon && !this._options.transportOptions) {\n        // Prevent illegal invocations - https://xgwang.me/posts/you-may-not-know-beacon/#it-may-throw-error%2C-be-sure-to-catch\n        const sendBeacon = WINDOW.navigator.sendBeacon.bind(WINDOW.navigator);\n        sendBeacon(url, serializeEnvelope(envelope));\n      } else {\n        // If beacon is not supported or if they are using the tunnel option\n        // use our regular transport to send client reports to Sentry.\n        this._sendEnvelope(envelope);\n      }\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error(e);\n    }\n  }\n}\n\nexport { BrowserClient };\n//# sourceMappingURL=client.js.map\n","import { isNativeFetch, logger } from '@sentry/utils';\nimport { WINDOW } from '../helpers.js';\n\nlet cachedFetchImpl = undefined;\n\n/**\n * A special usecase for incorrectly wrapped Fetch APIs in conjunction with ad-blockers.\n * Whenever someone wraps the Fetch API and returns the wrong promise chain,\n * this chain becomes orphaned and there is no possible way to capture it's rejections\n * other than allowing it bubble up to this very handler. eg.\n *\n * const f = window.fetch;\n * window.fetch = function () {\n *   const p = f.apply(this, arguments);\n *\n *   p.then(function() {\n *     console.log('hi.');\n *   });\n *\n *   return p;\n * }\n *\n * `p.then(function () { ... })` is producing a completely separate promise chain,\n * however, what's returned is `p` - the result of original `fetch` call.\n *\n * This mean, that whenever we use the Fetch API to send our own requests, _and_\n * some ad-blocker blocks it, this orphaned chain will _always_ reject,\n * effectively causing another event to be captured.\n * This makes a whole process become an infinite loop, which we need to somehow\n * deal with, and break it in one way or another.\n *\n * To deal with this issue, we are making sure that we _always_ use the real\n * browser Fetch API, instead of relying on what `window.fetch` exposes.\n * The only downside to this would be missing our own requests as breadcrumbs,\n * but because we are already not doing this, it should be just fine.\n *\n * Possible failed fetch error messages per-browser:\n *\n * Chrome:  Failed to fetch\n * Edge:    Failed to Fetch\n * Firefox: NetworkError when attempting to fetch resource\n * Safari:  resource blocked by content blocker\n */\nfunction getNativeFetchImplementation() {\n  if (cachedFetchImpl) {\n    return cachedFetchImpl;\n  }\n\n  /* eslint-disable @typescript-eslint/unbound-method */\n\n  // Fast path to avoid DOM I/O\n  if (isNativeFetch(WINDOW.fetch)) {\n    return (cachedFetchImpl = WINDOW.fetch.bind(WINDOW));\n  }\n\n  const document = WINDOW.document;\n  let fetchImpl = WINDOW.fetch;\n  // eslint-disable-next-line deprecation/deprecation\n  if (document && typeof document.createElement === 'function') {\n    try {\n      const sandbox = document.createElement('iframe');\n      sandbox.hidden = true;\n      document.head.appendChild(sandbox);\n      const contentWindow = sandbox.contentWindow;\n      if (contentWindow && contentWindow.fetch) {\n        fetchImpl = contentWindow.fetch;\n      }\n      document.head.removeChild(sandbox);\n    } catch (e) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', e);\n    }\n  }\n\n  return (cachedFetchImpl = fetchImpl.bind(WINDOW));\n  /* eslint-enable @typescript-eslint/unbound-method */\n}\n\n/** Clears cached fetch impl */\nfunction clearCachedFetchImplementation() {\n  cachedFetchImpl = undefined;\n}\n\nexport { clearCachedFetchImplementation, getNativeFetchImplementation };\n//# sourceMappingURL=utils.js.map\n","import { createTransport } from '@sentry/core';\nimport { rejectedSyncPromise } from '@sentry/utils';\nimport { clearCachedFetchImplementation, getNativeFetchImplementation } from './utils.js';\n\n/**\n * Creates a Transport that uses the Fetch API to send events to Sentry.\n */\nfunction makeFetchTransport(\n  options,\n  nativeFetch = getNativeFetchImplementation(),\n) {\n  function makeRequest(request) {\n    const requestOptions = {\n      body: request.body,\n      method: 'POST',\n      referrerPolicy: 'origin',\n      headers: options.headers,\n      // Outgoing requests are usually cancelled when navigating to a different page, causing a \"TypeError: Failed to\n      // fetch\" error and sending a \"network_error\" client-outcome - in Chrome, the request status shows \"(cancelled)\".\n      // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're\n      // frequently sending events right before the user is switching pages (eg. whenfinishing navigation transactions).\n      // Gotchas:\n      // - `keepalive` isn't supported by Firefox\n      // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch), a request with `keepalive: true`\n      //   and a content length of > 64 kibibytes returns a network error. We will therefore only activate the flag when\n      //   we're below that limit.\n      keepalive: request.body.length <= 65536,\n      ...options.fetchOptions,\n    };\n\n    try {\n      return nativeFetch(options.url, requestOptions).then(response => ({\n        statusCode: response.status,\n        headers: {\n          'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n          'retry-after': response.headers.get('Retry-After'),\n        },\n      }));\n    } catch (e) {\n      clearCachedFetchImplementation();\n      return rejectedSyncPromise(e);\n    }\n  }\n\n  return createTransport(options, makeRequest);\n}\n\nexport { makeFetchTransport };\n//# sourceMappingURL=fetch.js.map\n","import { createTransport } from '@sentry/core';\nimport { SyncPromise } from '@sentry/utils';\n\n/**\n * The DONE ready state for XmlHttpRequest\n *\n * Defining it here as a constant b/c XMLHttpRequest.DONE is not always defined\n * (e.g. during testing, it is `undefined`)\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState}\n */\nconst XHR_READYSTATE_DONE = 4;\n\n/**\n * Creates a Transport that uses the XMLHttpRequest API to send events to Sentry.\n */\nfunction makeXHRTransport(options) {\n  function makeRequest(request) {\n    return new SyncPromise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n\n      xhr.onerror = reject;\n\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState === XHR_READYSTATE_DONE) {\n          resolve({\n            statusCode: xhr.status,\n            headers: {\n              'x-sentry-rate-limits': xhr.getResponseHeader('X-Sentry-Rate-Limits'),\n              'retry-after': xhr.getResponseHeader('Retry-After'),\n            },\n          });\n        }\n      };\n\n      xhr.open('POST', options.url);\n\n      for (const header in options.headers) {\n        if (Object.prototype.hasOwnProperty.call(options.headers, header)) {\n          xhr.setRequestHeader(header, options.headers[header]);\n        }\n      }\n\n      xhr.send(request.body);\n    });\n  }\n\n  return createTransport(options, makeRequest);\n}\n\nexport { makeXHRTransport };\n//# sourceMappingURL=xhr.js.map\n","import { createStackParser } from '@sentry/utils';\n\n// global reference to slice\nconst UNKNOWN_FUNCTION = '?';\n\nconst OPERA10_PRIORITY = 10;\nconst OPERA11_PRIORITY = 20;\nconst CHROME_PRIORITY = 30;\nconst WINJS_PRIORITY = 40;\nconst GECKO_PRIORITY = 50;\n\nfunction createFrame(filename, func, lineno, colno) {\n  const frame = {\n    filename,\n    function: func,\n    // All browser frames are considered in_app\n    in_app: true,\n  };\n\n  if (lineno !== undefined) {\n    frame.lineno = lineno;\n  }\n\n  if (colno !== undefined) {\n    frame.colno = colno;\n  }\n\n  return frame;\n}\n\n// Chromium based browsers: Chrome, Brave, new Opera, new Edge\nconst chromeRegex =\n  /^\\s*at (?:(.*\\).*?|.*?) ?\\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nconst chromeEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\n\nconst chrome = line => {\n  const parts = chromeRegex.exec(line);\n\n  if (parts) {\n    const isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n\n    if (isEval) {\n      const subMatch = chromeEvalRegex.exec(parts[2]);\n\n      if (subMatch) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = subMatch[1]; // url\n        parts[3] = subMatch[2]; // line\n        parts[4] = subMatch[3]; // column\n      }\n    }\n\n    // Kamil: One more hack won't hurt us right? Understanding and adding more rules on top of these regexps right now\n    // would be way too time consuming. (TODO: Rewrite whole RegExp to be more readable)\n    const [func, filename] = extractSafariExtensionDetails(parts[1] || UNKNOWN_FUNCTION, parts[2]);\n\n    return createFrame(filename, func, parts[3] ? +parts[3] : undefined, parts[4] ? +parts[4] : undefined);\n  }\n\n  return;\n};\n\nconst chromeStackLineParser = [CHROME_PRIORITY, chrome];\n\n// gecko regex: `(?:bundle|\\d+\\.js)`: `bundle` is for react native, `\\d+\\.js` also but specifically for ram bundles because it\n// generates filenames without a prefix like `file://` the filenames in the stacktrace are just 42.js\n// We need this specific case for now because we want no other regex to match.\nconst geckoREgex =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\\/.*?|\\[native code\\]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nconst geckoEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\n\nconst gecko = line => {\n  const parts = geckoREgex.exec(line);\n\n  if (parts) {\n    const isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n    if (isEval) {\n      const subMatch = geckoEvalRegex.exec(parts[3]);\n\n      if (subMatch) {\n        // throw out eval line/column and use top-most line number\n        parts[1] = parts[1] || 'eval';\n        parts[3] = subMatch[1];\n        parts[4] = subMatch[2];\n        parts[5] = ''; // no column when eval\n      }\n    }\n\n    let filename = parts[3];\n    let func = parts[1] || UNKNOWN_FUNCTION;\n    [func, filename] = extractSafariExtensionDetails(func, filename);\n\n    return createFrame(filename, func, parts[4] ? +parts[4] : undefined, parts[5] ? +parts[5] : undefined);\n  }\n\n  return;\n};\n\nconst geckoStackLineParser = [GECKO_PRIORITY, gecko];\n\nconst winjsRegex =\n  /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\n\nconst winjs = line => {\n  const parts = winjsRegex.exec(line);\n\n  return parts\n    ? createFrame(parts[2], parts[1] || UNKNOWN_FUNCTION, +parts[3], parts[4] ? +parts[4] : undefined)\n    : undefined;\n};\n\nconst winjsStackLineParser = [WINJS_PRIORITY, winjs];\n\nconst opera10Regex = / line (\\d+).*script (?:in )?(\\S+)(?:: in function (\\S+))?$/i;\n\nconst opera10 = line => {\n  const parts = opera10Regex.exec(line);\n  return parts ? createFrame(parts[2], parts[3] || UNKNOWN_FUNCTION, +parts[1]) : undefined;\n};\n\nconst opera10StackLineParser = [OPERA10_PRIORITY, opera10];\n\nconst opera11Regex =\n  / line (\\d+), column (\\d+)\\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\\(.*\\))? in (.*):\\s*$/i;\n\nconst opera11 = line => {\n  const parts = opera11Regex.exec(line);\n  return parts ? createFrame(parts[5], parts[3] || parts[4] || UNKNOWN_FUNCTION, +parts[1], +parts[2]) : undefined;\n};\n\nconst opera11StackLineParser = [OPERA11_PRIORITY, opera11];\n\nconst defaultStackLineParsers = [chromeStackLineParser, geckoStackLineParser, winjsStackLineParser];\n\nconst defaultStackParser = createStackParser(...defaultStackLineParsers);\n\n/**\n * Safari web extensions, starting version unknown, can produce \"frames-only\" stacktraces.\n * What it means, is that instead of format like:\n *\n * Error: wat\n *   at function@url:row:col\n *   at function@url:row:col\n *   at function@url:row:col\n *\n * it produces something like:\n *\n *   function@url:row:col\n *   function@url:row:col\n *   function@url:row:col\n *\n * Because of that, it won't be captured by `chrome` RegExp and will fall into `Gecko` branch.\n * This function is extracted so that we can use it in both places without duplicating the logic.\n * Unfortunately \"just\" changing RegExp is too complicated now and making it pass all tests\n * and fix this case seems like an impossible, or at least way too time-consuming task.\n */\nconst extractSafariExtensionDetails = (func, filename) => {\n  const isSafariExtension = func.indexOf('safari-extension') !== -1;\n  const isSafariWebExtension = func.indexOf('safari-web-extension') !== -1;\n\n  return isSafariExtension || isSafariWebExtension\n    ? [\n        func.indexOf('@') !== -1 ? func.split('@')[0] : UNKNOWN_FUNCTION,\n        isSafariExtension ? `safari-extension:${filename}` : `safari-web-extension:${filename}`,\n      ]\n    : [func, filename];\n};\n\nexport { chromeStackLineParser, defaultStackLineParsers, defaultStackParser, geckoStackLineParser, opera10StackLineParser, opera11StackLineParser, winjsStackLineParser };\n//# sourceMappingURL=stack-parsers.js.map\n","import { getCurrentHub } from '@sentry/core';\nimport { addInstrumentationHandler, isString, isPrimitive, isErrorEvent, getLocationHref, logger, addExceptionMechanism } from '@sentry/utils';\nimport { eventFromUnknownInput } from '../eventbuilder.js';\nimport { shouldIgnoreOnError } from '../helpers.js';\n\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\n/** Global handlers */\nclass GlobalHandlers  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'GlobalHandlers';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = GlobalHandlers.id;}\n\n  /** JSDoc */\n\n  /**\n   * Stores references functions to installing handlers. Will set to undefined\n   * after they have been run so that they are not used twice.\n   */\n   __init2() {this._installFunc = {\n    onerror: _installGlobalOnErrorHandler,\n    onunhandledrejection: _installGlobalOnUnhandledRejectionHandler,\n  };}\n\n  /** JSDoc */\n   constructor(options) {;GlobalHandlers.prototype.__init.call(this);GlobalHandlers.prototype.__init2.call(this);\n    this._options = {\n      onerror: true,\n      onunhandledrejection: true,\n      ...options,\n    };\n  }\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    Error.stackTraceLimit = 50;\n    const options = this._options;\n\n    // We can disable guard-for-in as we construct the options object above + do checks against\n    // `this._installFunc` for the property.\n    // eslint-disable-next-line guard-for-in\n    for (const key in options) {\n      const installFunc = this._installFunc[key ];\n      if (installFunc && options[key ]) {\n        globalHandlerLog(key);\n        installFunc();\n        this._installFunc[key ] = undefined;\n      }\n    }\n  }\n} GlobalHandlers.__initStatic();\n\n/** JSDoc */\nfunction _installGlobalOnErrorHandler() {\n  addInstrumentationHandler(\n    'error',\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (data) => {\n      const [hub, stackParser, attachStacktrace] = getHubAndOptions();\n      if (!hub.getIntegration(GlobalHandlers)) {\n        return;\n      }\n      const { msg, url, line, column, error } = data;\n      if (shouldIgnoreOnError() || (error && error.__sentry_own_request__)) {\n        return;\n      }\n\n      const event =\n        error === undefined && isString(msg)\n          ? _eventFromIncompleteOnError(msg, url, line, column)\n          : _enhanceEventWithInitialFrame(\n              eventFromUnknownInput(stackParser, error || msg, undefined, attachStacktrace, false),\n              url,\n              line,\n              column,\n            );\n\n      event.level = 'error';\n\n      addMechanismAndCapture(hub, error, event, 'onerror');\n    },\n  );\n}\n\n/** JSDoc */\nfunction _installGlobalOnUnhandledRejectionHandler() {\n  addInstrumentationHandler(\n    'unhandledrejection',\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (e) => {\n      const [hub, stackParser, attachStacktrace] = getHubAndOptions();\n      if (!hub.getIntegration(GlobalHandlers)) {\n        return;\n      }\n      let error = e;\n\n      // dig the object of the rejection out of known event types\n      try {\n        // PromiseRejectionEvents store the object of the rejection under 'reason'\n        // see https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n        if ('reason' in e) {\n          error = e.reason;\n        }\n        // something, somewhere, (likely a browser extension) effectively casts PromiseRejectionEvents\n        // to CustomEvents, moving the `promise` and `reason` attributes of the PRE into\n        // the CustomEvent's `detail` attribute, since they're not part of CustomEvent's spec\n        // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent and\n        // https://github.com/getsentry/sentry-javascript/issues/2380\n        else if ('detail' in e && 'reason' in e.detail) {\n          error = e.detail.reason;\n        }\n      } catch (_oO) {\n        // no-empty\n      }\n\n      if (shouldIgnoreOnError() || (error && error.__sentry_own_request__)) {\n        return true;\n      }\n\n      const event = isPrimitive(error)\n        ? _eventFromRejectionWithPrimitive(error)\n        : eventFromUnknownInput(stackParser, error, undefined, attachStacktrace, true);\n\n      event.level = 'error';\n\n      addMechanismAndCapture(hub, error, event, 'onunhandledrejection');\n      return;\n    },\n  );\n}\n\n/**\n * Create an event from a promise rejection where the `reason` is a primitive.\n *\n * @param reason: The `reason` property of the promise rejection\n * @returns An Event object with an appropriate `exception` value\n */\nfunction _eventFromRejectionWithPrimitive(reason) {\n  return {\n    exception: {\n      values: [\n        {\n          type: 'UnhandledRejection',\n          // String() is needed because the Primitive type includes symbols (which can't be automatically stringified)\n          value: `Non-Error promise rejection captured with value: ${String(reason)}`,\n        },\n      ],\n    },\n  };\n}\n\n/**\n * This function creates a stack from an old, error-less onerror handler.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _eventFromIncompleteOnError(msg, url, line, column) {\n  const ERROR_TYPES_RE =\n    /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n\n  // If 'message' is ErrorEvent, get real message from inside\n  let message = isErrorEvent(msg) ? msg.message : msg;\n  let name = 'Error';\n\n  const groups = message.match(ERROR_TYPES_RE);\n  if (groups) {\n    name = groups[1];\n    message = groups[2];\n  }\n\n  const event = {\n    exception: {\n      values: [\n        {\n          type: name,\n          value: message,\n        },\n      ],\n    },\n  };\n\n  return _enhanceEventWithInitialFrame(event, url, line, column);\n}\n\n/** JSDoc */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _enhanceEventWithInitialFrame(event, url, line, column) {\n  // event.exception\n  const e = (event.exception = event.exception || {});\n  // event.exception.values\n  const ev = (e.values = e.values || []);\n  // event.exception.values[0]\n  const ev0 = (ev[0] = ev[0] || {});\n  // event.exception.values[0].stacktrace\n  const ev0s = (ev0.stacktrace = ev0.stacktrace || {});\n  // event.exception.values[0].stacktrace.frames\n  const ev0sf = (ev0s.frames = ev0s.frames || []);\n\n  const colno = isNaN(parseInt(column, 10)) ? undefined : column;\n  const lineno = isNaN(parseInt(line, 10)) ? undefined : line;\n  const filename = isString(url) && url.length > 0 ? url : getLocationHref();\n\n  // event.exception.values[0].stacktrace.frames\n  if (ev0sf.length === 0) {\n    ev0sf.push({\n      colno,\n      filename,\n      function: '?',\n      in_app: true,\n      lineno,\n    });\n  }\n\n  return event;\n}\n\nfunction globalHandlerLog(type) {\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Global Handler attached: ${type}`);\n}\n\nfunction addMechanismAndCapture(hub, error, event, type) {\n  addExceptionMechanism(event, {\n    handled: false,\n    type,\n  });\n  hub.captureEvent(event, {\n    originalException: error,\n  });\n}\n\nfunction getHubAndOptions() {\n  const hub = getCurrentHub();\n  const client = hub.getClient();\n  const options = (client && client.getOptions()) || {\n    stackParser: () => [],\n    attachStacktrace: false,\n  };\n  return [hub, options.stackParser, options.attachStacktrace];\n}\n\nexport { GlobalHandlers };\n//# sourceMappingURL=globalhandlers.js.map\n","import { fill, getFunctionName, getOriginalFunction } from '@sentry/utils';\nimport { WINDOW, wrap } from '../helpers.js';\n\nconst DEFAULT_EVENT_TARGET = [\n  'EventTarget',\n  'Window',\n  'Node',\n  'ApplicationCache',\n  'AudioTrackList',\n  'ChannelMergerNode',\n  'CryptoOperation',\n  'EventSource',\n  'FileReader',\n  'HTMLUnknownElement',\n  'IDBDatabase',\n  'IDBRequest',\n  'IDBTransaction',\n  'KeyOperation',\n  'MediaController',\n  'MessagePort',\n  'ModalWindow',\n  'Notification',\n  'SVGElementInstance',\n  'Screen',\n  'TextTrack',\n  'TextTrackCue',\n  'TextTrackList',\n  'WebSocket',\n  'WebSocketWorker',\n  'Worker',\n  'XMLHttpRequest',\n  'XMLHttpRequestEventTarget',\n  'XMLHttpRequestUpload',\n];\n\n/** Wrap timer functions and event targets to catch errors and provide better meta data */\nclass TryCatch  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'TryCatch';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = TryCatch.id;}\n\n  /** JSDoc */\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options) {;TryCatch.prototype.__init.call(this);\n    this._options = {\n      XMLHttpRequest: true,\n      eventTarget: true,\n      requestAnimationFrame: true,\n      setInterval: true,\n      setTimeout: true,\n      ...options,\n    };\n  }\n\n  /**\n   * Wrap timer functions and event targets to catch errors\n   * and provide better metadata.\n   */\n   setupOnce() {\n    if (this._options.setTimeout) {\n      fill(WINDOW, 'setTimeout', _wrapTimeFunction);\n    }\n\n    if (this._options.setInterval) {\n      fill(WINDOW, 'setInterval', _wrapTimeFunction);\n    }\n\n    if (this._options.requestAnimationFrame) {\n      fill(WINDOW, 'requestAnimationFrame', _wrapRAF);\n    }\n\n    if (this._options.XMLHttpRequest && 'XMLHttpRequest' in WINDOW) {\n      fill(XMLHttpRequest.prototype, 'send', _wrapXHR);\n    }\n\n    const eventTargetOption = this._options.eventTarget;\n    if (eventTargetOption) {\n      const eventTarget = Array.isArray(eventTargetOption) ? eventTargetOption : DEFAULT_EVENT_TARGET;\n      eventTarget.forEach(_wrapEventTarget);\n    }\n  }\n} TryCatch.__initStatic();\n\n/** JSDoc */\nfunction _wrapTimeFunction(original) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function ( ...args) {\n    const originalCallback = args[0];\n    args[0] = wrap(originalCallback, {\n      mechanism: {\n        data: { function: getFunctionName(original) },\n        handled: true,\n        type: 'instrument',\n      },\n    });\n    return original.apply(this, args);\n  };\n}\n\n/** JSDoc */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _wrapRAF(original) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function ( callback) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    return original.apply(this, [\n      wrap(callback, {\n        mechanism: {\n          data: {\n            function: 'requestAnimationFrame',\n            handler: getFunctionName(original),\n          },\n          handled: true,\n          type: 'instrument',\n        },\n      }),\n    ]);\n  };\n}\n\n/** JSDoc */\nfunction _wrapXHR(originalSend) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return function ( ...args) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const xhr = this;\n    const xmlHttpRequestProps = ['onload', 'onerror', 'onprogress', 'onreadystatechange'];\n\n    xmlHttpRequestProps.forEach(prop => {\n      if (prop in xhr && typeof xhr[prop] === 'function') {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        fill(xhr, prop, function (original) {\n          const wrapOptions = {\n            mechanism: {\n              data: {\n                function: prop,\n                handler: getFunctionName(original),\n              },\n              handled: true,\n              type: 'instrument',\n            },\n          };\n\n          // If Instrument integration has been called before TryCatch, get the name of original function\n          const originalFunction = getOriginalFunction(original);\n          if (originalFunction) {\n            wrapOptions.mechanism.data.handler = getFunctionName(originalFunction);\n          }\n\n          // Otherwise wrap directly\n          return wrap(original, wrapOptions);\n        });\n      }\n    });\n\n    return originalSend.apply(this, args);\n  };\n}\n\n/** JSDoc */\nfunction _wrapEventTarget(target) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const globalObject = WINDOW ;\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  const proto = globalObject[target] && globalObject[target].prototype;\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, no-prototype-builtins\n  if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {\n    return;\n  }\n\n  fill(proto, 'addEventListener', function (original)\n\n {\n    return function (\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      eventName,\n      fn,\n      options,\n    ) {\n      try {\n        if (typeof fn.handleEvent === 'function') {\n          // ESlint disable explanation:\n          //  First, it is generally safe to call `wrap` with an unbound function. Furthermore, using `.bind()` would\n          //  introduce a bug here, because bind returns a new function that doesn't have our\n          //  flags(like __sentry_original__) attached. `wrap` checks for those flags to avoid unnecessary wrapping.\n          //  Without those flags, every call to addEventListener wraps the function again, causing a memory leak.\n          // eslint-disable-next-line @typescript-eslint/unbound-method\n          fn.handleEvent = wrap(fn.handleEvent, {\n            mechanism: {\n              data: {\n                function: 'handleEvent',\n                handler: getFunctionName(fn),\n                target,\n              },\n              handled: true,\n              type: 'instrument',\n            },\n          });\n        }\n      } catch (err) {\n        // can sometimes get 'Permission denied to access property \"handle Event'\n      }\n\n      return original.apply(this, [\n        eventName,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        wrap(fn , {\n          mechanism: {\n            data: {\n              function: 'addEventListener',\n              handler: getFunctionName(fn),\n              target,\n            },\n            handled: true,\n            type: 'instrument',\n          },\n        }),\n        options,\n      ]);\n    };\n  });\n\n  fill(\n    proto,\n    'removeEventListener',\n    function (\n      originalRemoveEventListener,\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ) {\n      return function (\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n        eventName,\n        fn,\n        options,\n      ) {\n        /**\n         * There are 2 possible scenarios here:\n         *\n         * 1. Someone passes a callback, which was attached prior to Sentry initialization, or by using unmodified\n         * method, eg. `document.addEventListener.call(el, name, handler). In this case, we treat this function\n         * as a pass-through, and call original `removeEventListener` with it.\n         *\n         * 2. Someone passes a callback, which was attached after Sentry was initialized, which means that it was using\n         * our wrapped version of `addEventListener`, which internally calls `wrap` helper.\n         * This helper \"wraps\" whole callback inside a try/catch statement, and attached appropriate metadata to it,\n         * in order for us to make a distinction between wrapped/non-wrapped functions possible.\n         * If a function was wrapped, it has additional property of `__sentry_wrapped__`, holding the handler.\n         *\n         * When someone adds a handler prior to initialization, and then do it again, but after,\n         * then we have to detach both of them. Otherwise, if we'd detach only wrapped one, it'd be impossible\n         * to get rid of the initial handler and it'd stick there forever.\n         */\n        const wrappedEventHandler = fn ;\n        try {\n          const originalEventHandler = wrappedEventHandler && wrappedEventHandler.__sentry_wrapped__;\n          if (originalEventHandler) {\n            originalRemoveEventListener.call(this, eventName, originalEventHandler, options);\n          }\n        } catch (e) {\n          // ignore, accessing __sentry_wrapped__ will throw in some Selenium environments\n        }\n        return originalRemoveEventListener.call(this, eventName, wrappedEventHandler, options);\n      };\n    },\n  );\n}\n\nexport { TryCatch };\n//# sourceMappingURL=trycatch.js.map\n","import { getCurrentHub, addGlobalEventProcessor } from '@sentry/core';\nimport { isInstanceOf } from '@sentry/utils';\nimport { exceptionFromError } from '../eventbuilder.js';\n\nconst DEFAULT_KEY = 'cause';\nconst DEFAULT_LIMIT = 5;\n\n/** Adds SDK info to an event. */\nclass LinkedErrors  {\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'LinkedErrors';}\n\n  /**\n   * @inheritDoc\n   */\n    __init() {this.name = LinkedErrors.id;}\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n   constructor(options = {}) {;LinkedErrors.prototype.__init.call(this);\n    this._key = options.key || DEFAULT_KEY;\n    this._limit = options.limit || DEFAULT_LIMIT;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    const client = getCurrentHub().getClient();\n    if (!client) {\n      return;\n    }\n    addGlobalEventProcessor((event, hint) => {\n      const self = getCurrentHub().getIntegration(LinkedErrors);\n      return self ? _handler(client.getOptions().stackParser, self._key, self._limit, event, hint) : event;\n    });\n  }\n} LinkedErrors.__initStatic();\n\n/**\n * @inheritDoc\n */\nfunction _handler(\n  parser,\n  key,\n  limit,\n  event,\n  hint,\n) {\n  if (!event.exception || !event.exception.values || !hint || !isInstanceOf(hint.originalException, Error)) {\n    return event;\n  }\n  const linkedErrors = _walkErrorTree(parser, limit, hint.originalException , key);\n  event.exception.values = [...linkedErrors, ...event.exception.values];\n  return event;\n}\n\n/**\n * JSDOC\n */\nfunction _walkErrorTree(\n  parser,\n  limit,\n  error,\n  key,\n  stack = [],\n) {\n  if (!isInstanceOf(error[key], Error) || stack.length + 1 >= limit) {\n    return stack;\n  }\n  const exception = exceptionFromError(parser, error[key]);\n  return _walkErrorTree(parser, limit, error[key], key, [exception, ...stack]);\n}\n\nexport { LinkedErrors, _handler, _walkErrorTree };\n//# sourceMappingURL=linkederrors.js.map\n","import { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport { WINDOW } from '../helpers.js';\n\n/** HttpContext integration collects information about HTTP request headers */\nclass HttpContext  {constructor() { HttpContext.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'HttpContext';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = HttpContext.id;}\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce() {\n    addGlobalEventProcessor((event) => {\n      if (getCurrentHub().getIntegration(HttpContext)) {\n        // if none of the information we want exists, don't bother\n        if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n          return event;\n        }\n\n        // grab as much info as exists and add it to the event\n        const url = (event.request && event.request.url) || (WINDOW.location && WINDOW.location.href);\n        const { referrer } = WINDOW.document || {};\n        const { userAgent } = WINDOW.navigator || {};\n\n        const headers = {\n          ...(event.request && event.request.headers),\n          ...(referrer && { Referer: referrer }),\n          ...(userAgent && { 'User-Agent': userAgent }),\n        };\n        const request = { ...(url && { url }), headers };\n\n        return { ...event, request };\n      }\n      return event;\n    });\n  }\n} HttpContext.__initStatic();\n\nexport { HttpContext };\n//# sourceMappingURL=httpcontext.js.map\n","import { logger } from '@sentry/utils';\n\n/** Deduplication filter */\nclass Dedupe  {constructor() { Dedupe.prototype.__init.call(this); }\n  /**\n   * @inheritDoc\n   */\n   static __initStatic() {this.id = 'Dedupe';}\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = Dedupe.id;}\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(addGlobalEventProcessor, getCurrentHub) {\n    const eventProcessor = currentEvent => {\n      const self = getCurrentHub().getIntegration(Dedupe);\n      if (self) {\n        // Juuust in case something goes wrong\n        try {\n          if (_shouldDropEvent(currentEvent, self._previousEvent)) {\n            (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Event dropped due to being a duplicate of previously captured event.');\n            return null;\n          }\n        } catch (_oO) {\n          return (self._previousEvent = currentEvent);\n        }\n\n        return (self._previousEvent = currentEvent);\n      }\n      return currentEvent;\n    };\n\n    eventProcessor.id = this.name;\n    addGlobalEventProcessor(eventProcessor);\n  }\n} Dedupe.__initStatic();\n\n/** JSDoc */\nfunction _shouldDropEvent(currentEvent, previousEvent) {\n  if (!previousEvent) {\n    return false;\n  }\n\n  if (_isSameMessageEvent(currentEvent, previousEvent)) {\n    return true;\n  }\n\n  if (_isSameExceptionEvent(currentEvent, previousEvent)) {\n    return true;\n  }\n\n  return false;\n}\n\n/** JSDoc */\nfunction _isSameMessageEvent(currentEvent, previousEvent) {\n  const currentMessage = currentEvent.message;\n  const previousMessage = previousEvent.message;\n\n  // If neither event has a message property, they were both exceptions, so bail out\n  if (!currentMessage && !previousMessage) {\n    return false;\n  }\n\n  // If only one event has a stacktrace, but not the other one, they are not the same\n  if ((currentMessage && !previousMessage) || (!currentMessage && previousMessage)) {\n    return false;\n  }\n\n  if (currentMessage !== previousMessage) {\n    return false;\n  }\n\n  if (!_isSameFingerprint(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  if (!_isSameStacktrace(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameExceptionEvent(currentEvent, previousEvent) {\n  const previousException = _getExceptionFromEvent(previousEvent);\n  const currentException = _getExceptionFromEvent(currentEvent);\n\n  if (!previousException || !currentException) {\n    return false;\n  }\n\n  if (previousException.type !== currentException.type || previousException.value !== currentException.value) {\n    return false;\n  }\n\n  if (!_isSameFingerprint(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  if (!_isSameStacktrace(currentEvent, previousEvent)) {\n    return false;\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameStacktrace(currentEvent, previousEvent) {\n  let currentFrames = _getFramesFromEvent(currentEvent);\n  let previousFrames = _getFramesFromEvent(previousEvent);\n\n  // If neither event has a stacktrace, they are assumed to be the same\n  if (!currentFrames && !previousFrames) {\n    return true;\n  }\n\n  // If only one event has a stacktrace, but not the other one, they are not the same\n  if ((currentFrames && !previousFrames) || (!currentFrames && previousFrames)) {\n    return false;\n  }\n\n  currentFrames = currentFrames ;\n  previousFrames = previousFrames ;\n\n  // If number of frames differ, they are not the same\n  if (previousFrames.length !== currentFrames.length) {\n    return false;\n  }\n\n  // Otherwise, compare the two\n  for (let i = 0; i < previousFrames.length; i++) {\n    const frameA = previousFrames[i];\n    const frameB = currentFrames[i];\n\n    if (\n      frameA.filename !== frameB.filename ||\n      frameA.lineno !== frameB.lineno ||\n      frameA.colno !== frameB.colno ||\n      frameA.function !== frameB.function\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/** JSDoc */\nfunction _isSameFingerprint(currentEvent, previousEvent) {\n  let currentFingerprint = currentEvent.fingerprint;\n  let previousFingerprint = previousEvent.fingerprint;\n\n  // If neither event has a fingerprint, they are assumed to be the same\n  if (!currentFingerprint && !previousFingerprint) {\n    return true;\n  }\n\n  // If only one event has a fingerprint, but not the other one, they are not the same\n  if ((currentFingerprint && !previousFingerprint) || (!currentFingerprint && previousFingerprint)) {\n    return false;\n  }\n\n  currentFingerprint = currentFingerprint ;\n  previousFingerprint = previousFingerprint ;\n\n  // Otherwise, compare the two\n  try {\n    return !!(currentFingerprint.join('') === previousFingerprint.join(''));\n  } catch (_oO) {\n    return false;\n  }\n}\n\n/** JSDoc */\nfunction _getExceptionFromEvent(event) {\n  return event.exception && event.exception.values && event.exception.values[0];\n}\n\n/** JSDoc */\nfunction _getFramesFromEvent(event) {\n  const exception = event.exception;\n\n  if (exception) {\n    try {\n      // @ts-ignore Object could be undefined\n      return exception.values[0].stacktrace.frames;\n    } catch (_oO) {\n      return undefined;\n    }\n  }\n  return undefined;\n}\n\nexport { Dedupe };\n//# sourceMappingURL=dedupe.js.map\n","import { Integrations, getIntegrationsToSetup, initAndBind, getReportDialogEndpoint, getCurrentHub } from '@sentry/core';\nimport { stackParserFromStackParserOptions, supportsFetch, logger, resolvedSyncPromise, addInstrumentationHandler } from '@sentry/utils';\nimport { BrowserClient } from './client.js';\nimport { WINDOW, wrap as wrap$1 } from './helpers.js';\nimport './integrations/index.js';\nimport { defaultStackParser } from './stack-parsers.js';\nimport './transports/index.js';\nimport { TryCatch } from './integrations/trycatch.js';\nimport { Breadcrumbs } from './integrations/breadcrumbs.js';\nimport { GlobalHandlers } from './integrations/globalhandlers.js';\nimport { LinkedErrors } from './integrations/linkederrors.js';\nimport { Dedupe } from './integrations/dedupe.js';\nimport { HttpContext } from './integrations/httpcontext.js';\nimport { makeFetchTransport } from './transports/fetch.js';\nimport { makeXHRTransport } from './transports/xhr.js';\n\nconst defaultIntegrations = [\n  new Integrations.InboundFilters(),\n  new Integrations.FunctionToString(),\n  new TryCatch(),\n  new Breadcrumbs(),\n  new GlobalHandlers(),\n  new LinkedErrors(),\n  new Dedupe(),\n  new HttpContext(),\n];\n\n/**\n * A magic string that build tooling can leverage in order to inject a release value into the SDK.\n */\n\n/**\n * The Sentry Browser SDK Client.\n *\n * To use this SDK, call the {@link init} function as early as possible when\n * loading the web page. To set context information or send manual events, use\n * the provided methods.\n *\n * @example\n *\n * ```\n *\n * import { init } from '@sentry/browser';\n *\n * init({\n *   dsn: '__DSN__',\n *   // ...\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { configureScope } from '@sentry/browser';\n * configureScope((scope: Scope) => {\n *   scope.setExtra({ battery: 0.7 });\n *   scope.setTag({ user_mode: 'admin' });\n *   scope.setUser({ id: '4711' });\n * });\n * ```\n *\n * @example\n * ```\n *\n * import { addBreadcrumb } from '@sentry/browser';\n * addBreadcrumb({\n *   message: 'My Breadcrumb',\n *   // ...\n * });\n * ```\n *\n * @example\n *\n * ```\n *\n * import * as Sentry from '@sentry/browser';\n * Sentry.captureMessage('Hello, world!');\n * Sentry.captureException(new Error('Good bye'));\n * Sentry.captureEvent({\n *   message: 'Manual',\n *   stacktrace: [\n *     // ...\n *   ],\n * });\n * ```\n *\n * @see {@link BrowserOptions} for documentation on configuration options.\n */\nfunction init(options = {}) {\n  if (options.defaultIntegrations === undefined) {\n    options.defaultIntegrations = defaultIntegrations;\n  }\n  if (options.release === undefined) {\n    // This allows build tooling to find-and-replace __SENTRY_RELEASE__ to inject a release value\n    if (typeof __SENTRY_RELEASE__ === 'string') {\n      options.release = __SENTRY_RELEASE__;\n    }\n\n    // This supports the variable that sentry-webpack-plugin injects\n    if (WINDOW.SENTRY_RELEASE && WINDOW.SENTRY_RELEASE.id) {\n      options.release = WINDOW.SENTRY_RELEASE.id;\n    }\n  }\n  if (options.autoSessionTracking === undefined) {\n    options.autoSessionTracking = true;\n  }\n  if (options.sendClientReports === undefined) {\n    options.sendClientReports = true;\n  }\n\n  const clientOptions = {\n    ...options,\n    stackParser: stackParserFromStackParserOptions(options.stackParser || defaultStackParser),\n    integrations: getIntegrationsToSetup(options),\n    transport: options.transport || (supportsFetch() ? makeFetchTransport : makeXHRTransport),\n  };\n\n  initAndBind(BrowserClient, clientOptions);\n\n  if (options.autoSessionTracking) {\n    startSessionTracking();\n  }\n}\n\n/**\n * Present the user with a report dialog.\n *\n * @param options Everything is optional, we try to fetch all info need from the global scope.\n */\nfunction showReportDialog(options = {}, hub = getCurrentHub()) {\n  // doesn't work without a document (React Native)\n  if (!WINDOW.document) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Global document not defined in showReportDialog call');\n    return;\n  }\n\n  const { client, scope } = hub.getStackTop();\n  const dsn = options.dsn || (client && client.getDsn());\n  if (!dsn) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('DSN not configured for showReportDialog call');\n    return;\n  }\n\n  if (scope) {\n    options.user = {\n      ...scope.getUser(),\n      ...options.user,\n    };\n  }\n\n  if (!options.eventId) {\n    options.eventId = hub.lastEventId();\n  }\n\n  const script = WINDOW.document.createElement('script');\n  script.async = true;\n  script.src = getReportDialogEndpoint(dsn, options);\n\n  if (options.onLoad) {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    script.onload = options.onLoad;\n  }\n\n  const injectionPoint = WINDOW.document.head || WINDOW.document.body;\n  if (injectionPoint) {\n    injectionPoint.appendChild(script);\n  } else {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.error('Not injecting report dialog. No injection point found in HTML');\n  }\n}\n\n/**\n * This is the getter for lastEventId.\n *\n * @returns The last event id of a captured event.\n */\nfunction lastEventId() {\n  return getCurrentHub().lastEventId();\n}\n\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\nfunction forceLoad() {\n  // Noop\n}\n\n/**\n * This function is here to be API compatible with the loader.\n * @hidden\n */\nfunction onLoad(callback) {\n  callback();\n}\n\n/**\n * Call `flush()` on the current client, if there is one. See {@link Client.flush}.\n *\n * @param timeout Maximum time in ms the client should wait to flush its event queue. Omitting this parameter will cause\n * the client to wait until all events are sent before resolving the promise.\n * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it\n * doesn't (or if there's no client defined).\n */\nfunction flush(timeout) {\n  const client = getCurrentHub().getClient();\n  if (client) {\n    return client.flush(timeout);\n  }\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Cannot flush events. No client defined.');\n  return resolvedSyncPromise(false);\n}\n\n/**\n * Call `close()` on the current client, if there is one. See {@link Client.close}.\n *\n * @param timeout Maximum time in ms the client should wait to flush its event queue before shutting down. Omitting this\n * parameter will cause the client to wait until all events are sent before disabling itself.\n * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it\n * doesn't (or if there's no client defined).\n */\nfunction close(timeout) {\n  const client = getCurrentHub().getClient();\n  if (client) {\n    return client.close(timeout);\n  }\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Cannot flush events and disable SDK. No client defined.');\n  return resolvedSyncPromise(false);\n}\n\n/**\n * Wrap code within a try/catch block so the SDK is able to capture errors.\n *\n * @param fn A function to wrap.\n *\n * @returns The result of wrapped function call.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction wrap(fn) {\n  return wrap$1(fn)();\n}\n\nfunction startSessionOnHub(hub) {\n  hub.startSession({ ignoreDuration: true });\n  hub.captureSession();\n}\n\n/**\n * Enable automatic Session Tracking for the initial page load.\n */\nfunction startSessionTracking() {\n  if (typeof WINDOW.document === 'undefined') {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn('Session tracking in non-browser environment with @sentry/browser is not supported.');\n    return;\n  }\n\n  const hub = getCurrentHub();\n\n  // The only way for this to be false is for there to be a version mismatch between @sentry/browser (>= 6.0.0) and\n  // @sentry/hub (< 5.27.0). In the simple case, there won't ever be such a mismatch, because the two packages are\n  // pinned at the same version in package.json, but there are edge cases where it's possible. See\n  // https://github.com/getsentry/sentry-javascript/issues/3207 and\n  // https://github.com/getsentry/sentry-javascript/issues/3234 and\n  // https://github.com/getsentry/sentry-javascript/issues/3278.\n  if (!hub.captureSession) {\n    return;\n  }\n\n  // The session duration for browser sessions does not track a meaningful\n  // concept that can be used as a metric.\n  // Automatically captured sessions are akin to page views, and thus we\n  // discard their duration.\n  startSessionOnHub(hub);\n\n  // We want to create a session for every navigation as well\n  addInstrumentationHandler('history', ({ from, to }) => {\n    // Don't create an additional session for the initial route or if the location did not change\n    if (!(from === undefined || from === to)) {\n      startSessionOnHub(getCurrentHub());\n    }\n  });\n}\n\nexport { close, defaultIntegrations, flush, forceLoad, init, lastEventId, onLoad, showReportDialog, wrap };\n//# sourceMappingURL=sdk.js.map\n","import { SDK_VERSION, init as init$1 } from '@sentry/browser';\n\n/**\n * Inits the React SDK\n */\nfunction init(options) {\n  options._metadata = options._metadata || {};\n  options._metadata.sdk = options._metadata.sdk || {\n    name: 'sentry.javascript.react',\n    packages: [\n      {\n        name: 'npm:@sentry/react',\n        version: SDK_VERSION,\n      },\n    ],\n    version: SDK_VERSION,\n  };\n  init$1(options);\n}\n\nexport { init };\n//# sourceMappingURL=sdk.js.map\n","/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var b=\"function\"===typeof Symbol&&Symbol.for,c=b?Symbol.for(\"react.element\"):60103,d=b?Symbol.for(\"react.portal\"):60106,e=b?Symbol.for(\"react.fragment\"):60107,f=b?Symbol.for(\"react.strict_mode\"):60108,g=b?Symbol.for(\"react.profiler\"):60114,h=b?Symbol.for(\"react.provider\"):60109,k=b?Symbol.for(\"react.context\"):60110,l=b?Symbol.for(\"react.async_mode\"):60111,m=b?Symbol.for(\"react.concurrent_mode\"):60111,n=b?Symbol.for(\"react.forward_ref\"):60112,p=b?Symbol.for(\"react.suspense\"):60113,q=b?\nSymbol.for(\"react.suspense_list\"):60120,r=b?Symbol.for(\"react.memo\"):60115,t=b?Symbol.for(\"react.lazy\"):60116,v=b?Symbol.for(\"react.block\"):60121,w=b?Symbol.for(\"react.fundamental\"):60117,x=b?Symbol.for(\"react.responder\"):60118,y=b?Symbol.for(\"react.scope\"):60119;\nfunction z(a){if(\"object\"===typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type,a){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof,a){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}exports.AsyncMode=l;exports.ConcurrentMode=m;exports.ContextConsumer=k;exports.ContextProvider=h;exports.Element=c;exports.ForwardRef=n;exports.Fragment=e;exports.Lazy=t;exports.Memo=r;exports.Portal=d;\nexports.Profiler=g;exports.StrictMode=f;exports.Suspense=p;exports.isAsyncMode=function(a){return A(a)||z(a)===l};exports.isConcurrentMode=A;exports.isContextConsumer=function(a){return z(a)===k};exports.isContextProvider=function(a){return z(a)===h};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===c};exports.isForwardRef=function(a){return z(a)===n};exports.isFragment=function(a){return z(a)===e};exports.isLazy=function(a){return z(a)===t};\nexports.isMemo=function(a){return z(a)===r};exports.isPortal=function(a){return z(a)===d};exports.isProfiler=function(a){return z(a)===g};exports.isStrictMode=function(a){return z(a)===f};exports.isSuspense=function(a){return z(a)===p};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===e||a===m||a===g||a===f||a===p||a===q||\"object\"===typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)};exports.typeOf=z;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","'use strict';\n\nvar reactIs = require('react-is');\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import { withScope, captureException, showReportDialog } from '@sentry/browser';\nimport { isError, logger } from '@sentry/utils';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport * as React from 'react';\n\nconst _jsxFileName = \"/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/errorboundary.tsx\";\nfunction isAtLeastReact17(version) {\n  const major = version.match(/^([^.]+)/);\n  return major !== null && parseInt(major[0]) >= 17;\n}\n\nconst UNKNOWN_COMPONENT = 'unknown';\n\nconst INITIAL_STATE = {\n  componentStack: null,\n  error: null,\n  eventId: null,\n};\n\n/**\n * A ErrorBoundary component that logs errors to Sentry. Requires React >= 16.\n * NOTE: If you are a Sentry user, and you are seeing this stack frame, it means the\n * Sentry React SDK ErrorBoundary caught an error invoking your application code. This\n * is expected behavior and NOT indicative of a bug with the Sentry React SDK.\n */\nclass ErrorBoundary extends React.Component {constructor(...args) { super(...args); ErrorBoundary.prototype.__init.call(this);ErrorBoundary.prototype.__init2.call(this); }\n   __init() {this.state = INITIAL_STATE;}\n\n   componentDidCatch(error, { componentStack }) {\n    const { beforeCapture, onError, showDialog, dialogOptions } = this.props;\n\n    withScope(scope => {\n      // If on React version >= 17, create stack trace from componentStack param and links\n      // to to the original error using `error.cause` otherwise relies on error param for stacktrace.\n      // Linking errors requires the `LinkedErrors` integration be enabled.\n      // See: https://reactjs.org/blog/2020/08/10/react-v17-rc.html#native-component-stacks\n      //\n      // Although `componentDidCatch` is typed to accept an `Error` object, it can also be invoked\n      // with non-error objects. This is why we need to check if the error is an error-like object.\n      // See: https://github.com/getsentry/sentry-javascript/issues/6167\n      if (isAtLeastReact17(React.version) && isError(error)) {\n        const errorBoundaryError = new Error(error.message);\n        errorBoundaryError.name = `React ErrorBoundary ${errorBoundaryError.name}`;\n        errorBoundaryError.stack = componentStack;\n\n        // Using the `LinkedErrors` integration to link the errors together.\n        error.cause = errorBoundaryError;\n      }\n\n      if (beforeCapture) {\n        beforeCapture(scope, error, componentStack);\n      }\n      const eventId = captureException(error, { contexts: { react: { componentStack } } });\n      if (onError) {\n        onError(error, componentStack, eventId);\n      }\n      if (showDialog) {\n        showReportDialog({ ...dialogOptions, eventId });\n      }\n\n      // componentDidCatch is used over getDerivedStateFromError\n      // so that componentStack is accessible through state.\n      this.setState({ error, componentStack, eventId });\n    });\n  }\n\n   componentDidMount() {\n    const { onMount } = this.props;\n    if (onMount) {\n      onMount();\n    }\n  }\n\n   componentWillUnmount() {\n    const { error, componentStack, eventId } = this.state;\n    const { onUnmount } = this.props;\n    if (onUnmount) {\n      onUnmount(error, componentStack, eventId);\n    }\n  }\n\n   __init2() {this.resetErrorBoundary = () => {\n    const { onReset } = this.props;\n    const { error, componentStack, eventId } = this.state;\n    if (onReset) {\n      onReset(error, componentStack, eventId);\n    }\n    this.setState(INITIAL_STATE);\n  };}\n\n   render() {\n    const { fallback, children } = this.props;\n    const { error, componentStack, eventId } = this.state;\n\n    if (error) {\n      let element = undefined;\n      if (typeof fallback === 'function') {\n        element = fallback({ error, componentStack, resetError: this.resetErrorBoundary, eventId });\n      } else {\n        element = fallback;\n      }\n\n      if (React.isValidElement(element)) {\n        return element;\n      }\n\n      if (fallback) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('fallback did not produce a valid ReactElement');\n      }\n\n      // Fail gracefully if no fallback provided or is not valid\n      return null;\n    }\n\n    if (typeof children === 'function') {\n      return (children )();\n    }\n    return children;\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction withErrorBoundary(\n  WrappedComponent,\n  errorBoundaryOptions,\n) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  const componentDisplayName = WrappedComponent.displayName || WrappedComponent.name || UNKNOWN_COMPONENT;\n\n  const Wrapped = (props) => (\n    React.createElement(ErrorBoundary, { ...errorBoundaryOptions, __self: this, __source: {fileName: _jsxFileName, lineNumber: 173}}\n      , React.createElement(WrappedComponent, { ...props, __self: this, __source: {fileName: _jsxFileName, lineNumber: 174}} )\n    )\n  );\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  Wrapped.displayName = `errorBoundary(${componentDisplayName})`;\n\n  // Copy over static methods from Wrapped component to Profiler HOC\n  // See: https://reactjs.org/docs/higher-order-components.html#static-methods-must-be-copied-over\n  hoistNonReactStatics(Wrapped, WrappedComponent);\n  return Wrapped;\n}\n\nexport { ErrorBoundary, UNKNOWN_COMPONENT, isAtLeastReact17, withErrorBoundary };\n//# sourceMappingURL=errorboundary.js.map\n","import { getCurrentHub } from '@sentry/core';\nexport { TRACEPARENT_REGEXP, extractTraceparentData, stripUrlQueryAndFragment } from '@sentry/utils';\n\n/**\n * Determines if tracing is currently enabled.\n *\n * Tracing is enabled when at least one of `tracesSampleRate` and `tracesSampler` is defined in the SDK config.\n */\nfunction hasTracingEnabled(\n  maybeOptions,\n) {\n  const client = getCurrentHub().getClient();\n  const options = maybeOptions || (client && client.getOptions());\n  return !!options && ('tracesSampleRate' in options || 'tracesSampler' in options);\n}\n\n/** Grabs active transaction off scope, if any */\nfunction getActiveTransaction(maybeHub) {\n  const hub = maybeHub || getCurrentHub();\n  const scope = hub.getScope();\n  return scope && (scope.getTransaction() );\n}\n\n/**\n * Converts from milliseconds to seconds\n * @param time time in ms\n */\nfunction msToSec(time) {\n  return time / 1000;\n}\n\n/**\n * Converts from seconds to milliseconds\n * @param time time in seconds\n */\nfunction secToMs(time) {\n  return time * 1000;\n}\n\nexport { getActiveTransaction, hasTracingEnabled, msToSec, secToMs };\n//# sourceMappingURL=utils.js.map\n","import { addInstrumentationHandler, logger } from '@sentry/utils';\nimport { getActiveTransaction } from './utils.js';\n\n/**\n * Configures global error listeners\n */\nfunction registerErrorInstrumentation() {\n  addInstrumentationHandler('error', errorCallback);\n  addInstrumentationHandler('unhandledrejection', errorCallback);\n}\n\n/**\n * If an error or unhandled promise occurs, we mark the active transaction as failed\n */\nfunction errorCallback() {\n  const activeTransaction = getActiveTransaction();\n  if (activeTransaction) {\n    const status = 'internal_error';\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Transaction: ${status} -> Global error occured`);\n    activeTransaction.setStatus(status);\n  }\n}\n\nexport { registerErrorInstrumentation };\n//# sourceMappingURL=errors.js.map\n","import { _nullishCoalesce } from '@sentry/utils/esm/buildPolyfills';\nimport { uuid4, timestampWithMs, logger, dropUndefinedKeys } from '@sentry/utils';\n\n/**\n * Keeps track of finished spans for a given transaction\n * @internal\n * @hideconstructor\n * @hidden\n */\nclass SpanRecorder {\n   __init() {this.spans = [];}\n\n   constructor(maxlen = 1000) {;SpanRecorder.prototype.__init.call(this);\n    this._maxlen = maxlen;\n  }\n\n  /**\n   * This is just so that we don't run out of memory while recording a lot\n   * of spans. At some point we just stop and flush out the start of the\n   * trace tree (i.e.the first n spans with the smallest\n   * start_timestamp).\n   */\n   add(span) {\n    if (this.spans.length > this._maxlen) {\n      span.spanRecorder = undefined;\n    } else {\n      this.spans.push(span);\n    }\n  }\n}\n\n/**\n * Span contains all data about a span\n */\nclass Span  {\n  /**\n   * @inheritDoc\n   */\n   __init2() {this.traceId = uuid4();}\n\n  /**\n   * @inheritDoc\n   */\n   __init3() {this.spanId = uuid4().substring(16);}\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * Internal keeper of the status\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * Timestamp in seconds when the span was created.\n   */\n   __init4() {this.startTimestamp = timestampWithMs();}\n\n  /**\n   * Timestamp in seconds when the span ended.\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * @inheritDoc\n   */\n   __init5() {this.tags = {};}\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n   __init6() {this.data = {};}\n\n  /**\n   * List of spans that were finalized\n   */\n\n  /**\n   * @inheritDoc\n   */\n\n  /**\n   * The instrumenter that created this span.\n   */\n   __init7() {this.instrumenter = 'sentry';}\n\n  /**\n   * You should never call the constructor manually, always use `Sentry.startTransaction()`\n   * or call `startChild()` on an existing span.\n   * @internal\n   * @hideconstructor\n   * @hidden\n   */\n   constructor(spanContext) {;Span.prototype.__init2.call(this);Span.prototype.__init3.call(this);Span.prototype.__init4.call(this);Span.prototype.__init5.call(this);Span.prototype.__init6.call(this);Span.prototype.__init7.call(this);\n    if (!spanContext) {\n      return this;\n    }\n    if (spanContext.traceId) {\n      this.traceId = spanContext.traceId;\n    }\n    if (spanContext.spanId) {\n      this.spanId = spanContext.spanId;\n    }\n    if (spanContext.parentSpanId) {\n      this.parentSpanId = spanContext.parentSpanId;\n    }\n    // We want to include booleans as well here\n    if ('sampled' in spanContext) {\n      this.sampled = spanContext.sampled;\n    }\n    if (spanContext.op) {\n      this.op = spanContext.op;\n    }\n    if (spanContext.description) {\n      this.description = spanContext.description;\n    }\n    if (spanContext.data) {\n      this.data = spanContext.data;\n    }\n    if (spanContext.tags) {\n      this.tags = spanContext.tags;\n    }\n    if (spanContext.status) {\n      this.status = spanContext.status;\n    }\n    if (spanContext.startTimestamp) {\n      this.startTimestamp = spanContext.startTimestamp;\n    }\n    if (spanContext.endTimestamp) {\n      this.endTimestamp = spanContext.endTimestamp;\n    }\n    if (spanContext.instrumenter) {\n      this.instrumenter = spanContext.instrumenter;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   startChild(\n    spanContext,\n  ) {\n    const childSpan = new Span({\n      ...spanContext,\n      parentSpanId: this.spanId,\n      sampled: this.sampled,\n      traceId: this.traceId,\n    });\n\n    childSpan.spanRecorder = this.spanRecorder;\n    if (childSpan.spanRecorder) {\n      childSpan.spanRecorder.add(childSpan);\n    }\n\n    childSpan.transaction = this.transaction;\n\n    if ((typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && childSpan.transaction) {\n      const opStr = (spanContext && spanContext.op) || '< unknown op >';\n      const nameStr = childSpan.transaction.name || '< unknown name >';\n      const idStr = childSpan.transaction.spanId;\n\n      const logMessage = `[Tracing] Starting '${opStr}' span on transaction '${nameStr}' (${idStr}).`;\n      childSpan.transaction.metadata.spanMetadata[childSpan.spanId] = { logMessage };\n      logger.log(logMessage);\n    }\n\n    return childSpan;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setTag(key, value) {\n    this.tags = { ...this.tags, [key]: value };\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\n   setData(key, value) {\n    this.data = { ...this.data, [key]: value };\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setStatus(value) {\n    this.status = value;\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setHttpStatus(httpStatus) {\n    this.setTag('http.status_code', String(httpStatus));\n    const spanStatus = spanStatusfromHttpCode(httpStatus);\n    if (spanStatus !== 'unknown_error') {\n      this.setStatus(spanStatus);\n    }\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   isSuccess() {\n    return this.status === 'ok';\n  }\n\n  /**\n   * @inheritDoc\n   */\n   finish(endTimestamp) {\n    if (\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      // Don't call this for transactions\n      this.transaction &&\n      this.transaction.spanId !== this.spanId\n    ) {\n      const { logMessage } = this.transaction.metadata.spanMetadata[this.spanId];\n      if (logMessage) {\n        logger.log((logMessage ).replace('Starting', 'Finishing'));\n      }\n    }\n\n    this.endTimestamp = typeof endTimestamp === 'number' ? endTimestamp : timestampWithMs();\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toTraceparent() {\n    let sampledString = '';\n    if (this.sampled !== undefined) {\n      sampledString = this.sampled ? '-1' : '-0';\n    }\n    return `${this.traceId}-${this.spanId}${sampledString}`;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toContext() {\n    return dropUndefinedKeys({\n      data: this.data,\n      description: this.description,\n      endTimestamp: this.endTimestamp,\n      op: this.op,\n      parentSpanId: this.parentSpanId,\n      sampled: this.sampled,\n      spanId: this.spanId,\n      startTimestamp: this.startTimestamp,\n      status: this.status,\n      tags: this.tags,\n      traceId: this.traceId,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   updateWithContext(spanContext) {\n    this.data = _nullishCoalesce(spanContext.data, () => ( {}));\n    this.description = spanContext.description;\n    this.endTimestamp = spanContext.endTimestamp;\n    this.op = spanContext.op;\n    this.parentSpanId = spanContext.parentSpanId;\n    this.sampled = spanContext.sampled;\n    this.spanId = _nullishCoalesce(spanContext.spanId, () => ( this.spanId));\n    this.startTimestamp = _nullishCoalesce(spanContext.startTimestamp, () => ( this.startTimestamp));\n    this.status = spanContext.status;\n    this.tags = _nullishCoalesce(spanContext.tags, () => ( {}));\n    this.traceId = _nullishCoalesce(spanContext.traceId, () => ( this.traceId));\n\n    return this;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   getTraceContext()\n\n {\n    return dropUndefinedKeys({\n      data: Object.keys(this.data).length > 0 ? this.data : undefined,\n      description: this.description,\n      op: this.op,\n      parent_span_id: this.parentSpanId,\n      span_id: this.spanId,\n      status: this.status,\n      tags: Object.keys(this.tags).length > 0 ? this.tags : undefined,\n      trace_id: this.traceId,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toJSON()\n\n {\n    return dropUndefinedKeys({\n      data: Object.keys(this.data).length > 0 ? this.data : undefined,\n      description: this.description,\n      op: this.op,\n      parent_span_id: this.parentSpanId,\n      span_id: this.spanId,\n      start_timestamp: this.startTimestamp,\n      status: this.status,\n      tags: Object.keys(this.tags).length > 0 ? this.tags : undefined,\n      timestamp: this.endTimestamp,\n      trace_id: this.traceId,\n    });\n  }\n}\n\n/**\n * Converts a HTTP status code into a {@link SpanStatusType}.\n *\n * @param httpStatus The HTTP response status code.\n * @returns The span status or unknown_error.\n */\nfunction spanStatusfromHttpCode(httpStatus) {\n  if (httpStatus < 400 && httpStatus >= 100) {\n    return 'ok';\n  }\n\n  if (httpStatus >= 400 && httpStatus < 500) {\n    switch (httpStatus) {\n      case 401:\n        return 'unauthenticated';\n      case 403:\n        return 'permission_denied';\n      case 404:\n        return 'not_found';\n      case 409:\n        return 'already_exists';\n      case 413:\n        return 'failed_precondition';\n      case 429:\n        return 'resource_exhausted';\n      default:\n        return 'invalid_argument';\n    }\n  }\n\n  if (httpStatus >= 500 && httpStatus < 600) {\n    switch (httpStatus) {\n      case 501:\n        return 'unimplemented';\n      case 503:\n        return 'unavailable';\n      case 504:\n        return 'deadline_exceeded';\n      default:\n        return 'internal_error';\n    }\n  }\n\n  return 'unknown_error';\n}\n\nexport { Span, SpanRecorder, spanStatusfromHttpCode };\n//# sourceMappingURL=span.js.map\n","import { _nullishCoalesce } from '@sentry/utils/esm/buildPolyfills';\nimport { getCurrentHub } from '@sentry/core';\nimport { timestampInSeconds, logger, dropUndefinedKeys } from '@sentry/utils';\nimport { Span, SpanRecorder } from './span.js';\n\n/** JSDoc */\nclass Transaction extends Span  {\n\n  /**\n   * The reference to the current hub.\n   */\n\n   __init() {this._measurements = {};}\n\n   __init2() {this._contexts = {};}\n\n   __init3() {this._frozenDynamicSamplingContext = undefined;}\n\n  /**\n   * This constructor should never be called manually. Those instrumenting tracing should use\n   * `Sentry.startTransaction()`, and internal methods should use `hub.startTransaction()`.\n   * @internal\n   * @hideconstructor\n   * @hidden\n   */\n   constructor(transactionContext, hub) {\n    super(transactionContext);Transaction.prototype.__init.call(this);Transaction.prototype.__init2.call(this);Transaction.prototype.__init3.call(this);;\n\n    this._hub = hub || getCurrentHub();\n\n    this._name = transactionContext.name || '';\n\n    this.metadata = {\n      source: 'custom',\n      ...transactionContext.metadata,\n      spanMetadata: {},\n      changes: [],\n      propagations: 0,\n    };\n\n    this._trimEnd = transactionContext.trimEnd;\n\n    // this is because transactions are also spans, and spans have a transaction pointer\n    this.transaction = this;\n\n    // If Dynamic Sampling Context is provided during the creation of the transaction, we freeze it as it usually means\n    // there is incoming Dynamic Sampling Context. (Either through an incoming request, a baggage meta-tag, or other means)\n    const incomingDynamicSamplingContext = this.metadata.dynamicSamplingContext;\n    if (incomingDynamicSamplingContext) {\n      // We shallow copy this in case anything writes to the original reference of the passed in `dynamicSamplingContext`\n      this._frozenDynamicSamplingContext = { ...incomingDynamicSamplingContext };\n    }\n  }\n\n  /** Getter for `name` property */\n   get name() {\n    return this._name;\n  }\n\n  /** Setter for `name` property, which also sets `source` as custom */\n   set name(newName) {\n    this.setName(newName);\n  }\n\n  /**\n   * JSDoc\n   */\n   setName(name, source = 'custom') {\n    // `source` could change without the name changing if we discover that an unparameterized route is actually\n    // parameterized by virtue of having no parameters in its path\n    if (name !== this.name || source !== this.metadata.source) {\n      this.metadata.changes.push({\n        // log previous source\n        source: this.metadata.source,\n        timestamp: timestampInSeconds(),\n        propagations: this.metadata.propagations,\n      });\n    }\n\n    this._name = name;\n    this.metadata.source = source;\n  }\n\n  /**\n   * Attaches SpanRecorder to the span itself\n   * @param maxlen maximum number of spans that can be recorded\n   */\n   initSpanRecorder(maxlen = 1000) {\n    if (!this.spanRecorder) {\n      this.spanRecorder = new SpanRecorder(maxlen);\n    }\n    this.spanRecorder.add(this);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setContext(key, context) {\n    if (context === null) {\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this._contexts[key];\n    } else {\n      this._contexts[key] = context;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setMeasurement(name, value, unit = '') {\n    this._measurements[name] = { value, unit };\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setMetadata(newMetadata) {\n    this.metadata = { ...this.metadata, ...newMetadata };\n  }\n\n  /**\n   * @inheritDoc\n   */\n   finish(endTimestamp) {\n    // This transaction is already finished, so we should not flush it again.\n    if (this.endTimestamp !== undefined) {\n      return undefined;\n    }\n\n    if (!this.name) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Transaction has no name, falling back to `<unlabeled transaction>`.');\n      this.name = '<unlabeled transaction>';\n    }\n\n    // just sets the end timestamp\n    super.finish(endTimestamp);\n\n    if (this.sampled !== true) {\n      // At this point if `sampled !== true` we want to discard the transaction.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Discarding transaction because its trace was not chosen to be sampled.');\n\n      const client = this._hub.getClient();\n      if (client) {\n        client.recordDroppedEvent('sample_rate', 'transaction');\n      }\n\n      return undefined;\n    }\n\n    const finishedSpans = this.spanRecorder ? this.spanRecorder.spans.filter(s => s !== this && s.endTimestamp) : [];\n\n    if (this._trimEnd && finishedSpans.length > 0) {\n      this.endTimestamp = finishedSpans.reduce((prev, current) => {\n        if (prev.endTimestamp && current.endTimestamp) {\n          return prev.endTimestamp > current.endTimestamp ? prev : current;\n        }\n        return prev;\n      }).endTimestamp;\n    }\n\n    const metadata = this.metadata;\n\n    const transaction = {\n      contexts: {\n        ...this._contexts,\n        // We don't want to override trace context\n        trace: this.getTraceContext(),\n      },\n      spans: finishedSpans,\n      start_timestamp: this.startTimestamp,\n      tags: this.tags,\n      timestamp: this.endTimestamp,\n      transaction: this.name,\n      type: 'transaction',\n      sdkProcessingMetadata: {\n        ...metadata,\n        dynamicSamplingContext: this.getDynamicSamplingContext(),\n      },\n      ...(metadata.source && {\n        transaction_info: {\n          source: metadata.source,\n          changes: metadata.changes,\n          propagations: metadata.propagations,\n        },\n      }),\n    };\n\n    const hasMeasurements = Object.keys(this._measurements).length > 0;\n\n    if (hasMeasurements) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(\n          '[Measurements] Adding measurements to transaction',\n          JSON.stringify(this._measurements, undefined, 2),\n        );\n      transaction.measurements = this._measurements;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`);\n\n    return this._hub.captureEvent(transaction);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   toContext() {\n    const spanContext = super.toContext();\n\n    return dropUndefinedKeys({\n      ...spanContext,\n      name: this.name,\n      trimEnd: this._trimEnd,\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n   updateWithContext(transactionContext) {\n    super.updateWithContext(transactionContext);\n\n    this.name = _nullishCoalesce(transactionContext.name, () => ( ''));\n\n    this._trimEnd = transactionContext.trimEnd;\n\n    return this;\n  }\n\n  /**\n   * @inheritdoc\n   *\n   * @experimental\n   */\n   getDynamicSamplingContext() {\n    if (this._frozenDynamicSamplingContext) {\n      return this._frozenDynamicSamplingContext;\n    }\n\n    const hub = this._hub || getCurrentHub();\n    const client = hub && hub.getClient();\n\n    if (!client) return {};\n\n    const { environment, release } = client.getOptions() || {};\n    const { publicKey: public_key } = client.getDsn() || {};\n\n    const maybeSampleRate = this.metadata.sampleRate;\n    const sample_rate = maybeSampleRate !== undefined ? maybeSampleRate.toString() : undefined;\n\n    const scope = hub.getScope();\n    const { segment: user_segment } = (scope && scope.getUser()) || {};\n\n    const source = this.metadata.source;\n\n    // We don't want to have a transaction name in the DSC if the source is \"url\" because URLs might contain PII\n    const transaction = source && source !== 'url' ? this.name : undefined;\n\n    const dsc = dropUndefinedKeys({\n      environment,\n      release,\n      transaction,\n      user_segment,\n      public_key,\n      trace_id: this.traceId,\n      sample_rate,\n    });\n\n    // Uncomment if we want to make DSC immutable\n    // this._frozenDynamicSamplingContext = dsc;\n\n    return dsc;\n  }\n}\n\nexport { Transaction };\n//# sourceMappingURL=transaction.js.map\n","import { timestampWithMs, logger } from '@sentry/utils';\nimport { SpanRecorder } from './span.js';\nimport { Transaction } from './transaction.js';\n\nconst DEFAULT_IDLE_TIMEOUT = 1000;\nconst DEFAULT_FINAL_TIMEOUT = 30000;\nconst DEFAULT_HEARTBEAT_INTERVAL = 5000;\n\n/**\n * @inheritDoc\n */\nclass IdleTransactionSpanRecorder extends SpanRecorder {\n   constructor(\n      _pushActivity,\n      _popActivity,\n     transactionSpanId,\n    maxlen,\n  ) {\n    super(maxlen);this._pushActivity = _pushActivity;this._popActivity = _popActivity;this.transactionSpanId = transactionSpanId;;\n  }\n\n  /**\n   * @inheritDoc\n   */\n   add(span) {\n    // We should make sure we do not push and pop activities for\n    // the transaction that this span recorder belongs to.\n    if (span.spanId !== this.transactionSpanId) {\n      // We patch span.finish() to pop an activity after setting an endTimestamp.\n      span.finish = (endTimestamp) => {\n        span.endTimestamp = typeof endTimestamp === 'number' ? endTimestamp : timestampWithMs();\n        this._popActivity(span.spanId);\n      };\n\n      // We should only push new activities if the span does not have an end timestamp.\n      if (span.endTimestamp === undefined) {\n        this._pushActivity(span.spanId);\n      }\n    }\n\n    super.add(span);\n  }\n}\n\n/**\n * An IdleTransaction is a transaction that automatically finishes. It does this by tracking child spans as activities.\n * You can have multiple IdleTransactions active, but if the `onScope` option is specified, the idle transaction will\n * put itself on the scope on creation.\n */\nclass IdleTransaction extends Transaction {\n  // Activities store a list of active spans\n   __init() {this.activities = {};}\n\n  // Track state of activities in previous heartbeat\n\n  // Amount of times heartbeat has counted. Will cause transaction to finish after 3 beats.\n   __init2() {this._heartbeatCounter = 0;}\n\n  // We should not use heartbeat if we finished a transaction\n   __init3() {this._finished = false;}\n\n    __init4() {this._beforeFinishCallbacks = [];}\n\n  /**\n   * Timer that tracks Transaction idleTimeout\n   */\n\n   constructor(\n    transactionContext,\n      _idleHub,\n    /**\n     * The time to wait in ms until the idle transaction will be finished. This timer is started each time\n     * there are no active spans on this transaction.\n     */\n      _idleTimeout = DEFAULT_IDLE_TIMEOUT,\n    /**\n     * The final value in ms that a transaction cannot exceed\n     */\n      _finalTimeout = DEFAULT_FINAL_TIMEOUT,\n      _heartbeatInterval = DEFAULT_HEARTBEAT_INTERVAL,\n    // Whether or not the transaction should put itself on the scope when it starts and pop itself off when it ends\n      _onScope = false,\n  ) {\n    super(transactionContext, _idleHub);this._idleHub = _idleHub;this._idleTimeout = _idleTimeout;this._finalTimeout = _finalTimeout;this._heartbeatInterval = _heartbeatInterval;this._onScope = _onScope;IdleTransaction.prototype.__init.call(this);IdleTransaction.prototype.__init2.call(this);IdleTransaction.prototype.__init3.call(this);IdleTransaction.prototype.__init4.call(this);;\n\n    if (_onScope) {\n      // There should only be one active transaction on the scope\n      clearActiveTransaction(_idleHub);\n\n      // We set the transaction here on the scope so error events pick up the trace\n      // context and attach it to the error.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`);\n      _idleHub.configureScope(scope => scope.setSpan(this));\n    }\n\n    this._startIdleTimeout();\n    setTimeout(() => {\n      if (!this._finished) {\n        this.setStatus('deadline_exceeded');\n        this.finish();\n      }\n    }, this._finalTimeout);\n  }\n\n  /** {@inheritDoc} */\n   finish(endTimestamp = timestampWithMs()) {\n    this._finished = true;\n    this.activities = {};\n\n    if (this.spanRecorder) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log('[Tracing] finishing IdleTransaction', new Date(endTimestamp * 1000).toISOString(), this.op);\n\n      for (const callback of this._beforeFinishCallbacks) {\n        callback(this, endTimestamp);\n      }\n\n      this.spanRecorder.spans = this.spanRecorder.spans.filter((span) => {\n        // If we are dealing with the transaction itself, we just return it\n        if (span.spanId === this.spanId) {\n          return true;\n        }\n\n        // We cancel all pending spans with status \"cancelled\" to indicate the idle transaction was finished early\n        if (!span.endTimestamp) {\n          span.endTimestamp = endTimestamp;\n          span.setStatus('cancelled');\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n            logger.log('[Tracing] cancelling span since transaction ended early', JSON.stringify(span, undefined, 2));\n        }\n\n        const keepSpan = span.startTimestamp < endTimestamp;\n        if (!keepSpan) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n            logger.log(\n              '[Tracing] discarding Span since it happened after Transaction was finished',\n              JSON.stringify(span, undefined, 2),\n            );\n        }\n        return keepSpan;\n      });\n\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] flushing IdleTransaction');\n    } else {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] No active IdleTransaction');\n    }\n\n    // if `this._onScope` is `true`, the transaction put itself on the scope when it started\n    if (this._onScope) {\n      clearActiveTransaction(this._idleHub);\n    }\n\n    return super.finish(endTimestamp);\n  }\n\n  /**\n   * Register a callback function that gets excecuted before the transaction finishes.\n   * Useful for cleanup or if you want to add any additional spans based on current context.\n   *\n   * This is exposed because users have no other way of running something before an idle transaction\n   * finishes.\n   */\n   registerBeforeFinishCallback(callback) {\n    this._beforeFinishCallbacks.push(callback);\n  }\n\n  /**\n   * @inheritDoc\n   */\n   initSpanRecorder(maxlen) {\n    if (!this.spanRecorder) {\n      const pushActivity = (id) => {\n        if (this._finished) {\n          return;\n        }\n        this._pushActivity(id);\n      };\n      const popActivity = (id) => {\n        if (this._finished) {\n          return;\n        }\n        this._popActivity(id);\n      };\n\n      this.spanRecorder = new IdleTransactionSpanRecorder(pushActivity, popActivity, this.spanId, maxlen);\n\n      // Start heartbeat so that transactions do not run forever.\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('Starting heartbeat');\n      this._pingHeartbeat();\n    }\n    this.spanRecorder.add(this);\n  }\n\n  /**\n   * Cancels the existing idletimeout, if there is one\n   */\n   _cancelIdleTimeout() {\n    if (this._idleTimeoutID) {\n      clearTimeout(this._idleTimeoutID);\n      this._idleTimeoutID = undefined;\n    }\n  }\n\n  /**\n   * Creates an idletimeout\n   */\n   _startIdleTimeout(endTimestamp) {\n    this._cancelIdleTimeout();\n    this._idleTimeoutID = setTimeout(() => {\n      if (!this._finished && Object.keys(this.activities).length === 0) {\n        this.finish(endTimestamp);\n      }\n    }, this._idleTimeout);\n  }\n\n  /**\n   * Start tracking a specific activity.\n   * @param spanId The span id that represents the activity\n   */\n   _pushActivity(spanId) {\n    this._cancelIdleTimeout();\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] pushActivity: ${spanId}`);\n    this.activities[spanId] = true;\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] new activities count', Object.keys(this.activities).length);\n  }\n\n  /**\n   * Remove an activity from usage\n   * @param spanId The span id that represents the activity\n   */\n   _popActivity(spanId) {\n    if (this.activities[spanId]) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] popActivity ${spanId}`);\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete this.activities[spanId];\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] new activities count', Object.keys(this.activities).length);\n    }\n\n    if (Object.keys(this.activities).length === 0) {\n      // We need to add the timeout here to have the real endtimestamp of the transaction\n      // Remember timestampWithMs is in seconds, timeout is in ms\n      const endTimestamp = timestampWithMs() + this._idleTimeout / 1000;\n      this._startIdleTimeout(endTimestamp);\n    }\n  }\n\n  /**\n   * Checks when entries of this.activities are not changing for 3 beats.\n   * If this occurs we finish the transaction.\n   */\n   _beat() {\n    // We should not be running heartbeat if the idle transaction is finished.\n    if (this._finished) {\n      return;\n    }\n\n    const heartbeatString = Object.keys(this.activities).join('');\n\n    if (heartbeatString === this._prevHeartbeatString) {\n      this._heartbeatCounter++;\n    } else {\n      this._heartbeatCounter = 1;\n    }\n\n    this._prevHeartbeatString = heartbeatString;\n\n    if (this._heartbeatCounter >= 3) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Transaction finished because of no change for 3 heart beats');\n      this.setStatus('deadline_exceeded');\n      this.finish();\n    } else {\n      this._pingHeartbeat();\n    }\n  }\n\n  /**\n   * Pings the heartbeat\n   */\n   _pingHeartbeat() {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`);\n    setTimeout(() => {\n      this._beat();\n    }, this._heartbeatInterval);\n  }\n}\n\n/**\n * Reset transaction on scope to `undefined`\n */\nfunction clearActiveTransaction(hub) {\n  const scope = hub.getScope();\n  if (scope) {\n    const transaction = scope.getTransaction();\n    if (transaction) {\n      scope.setSpan(undefined);\n    }\n  }\n}\n\nexport { DEFAULT_FINAL_TIMEOUT, DEFAULT_HEARTBEAT_INTERVAL, DEFAULT_IDLE_TIMEOUT, IdleTransaction, IdleTransactionSpanRecorder };\n//# sourceMappingURL=idletransaction.js.map\n","import { getMainCarrier } from '@sentry/core';\nimport { logger, isNaN, dynamicRequire, loadModule, isNodeEnv } from '@sentry/utils';\nimport { registerErrorInstrumentation } from './errors.js';\nimport { IdleTransaction } from './idletransaction.js';\nimport { Transaction } from './transaction.js';\nimport { hasTracingEnabled } from './utils.js';\n\n/** Returns all trace headers that are currently on the top scope. */\nfunction traceHeaders() {\n  const scope = this.getScope();\n  if (scope) {\n    const span = scope.getSpan();\n    if (span) {\n      return {\n        'sentry-trace': span.toTraceparent(),\n      };\n    }\n  }\n  return {};\n}\n\n/**\n * Makes a sampling decision for the given transaction and stores it on the transaction.\n *\n * Called every time a transaction is created. Only transactions which emerge with a `sampled` value of `true` will be\n * sent to Sentry.\n *\n * @param transaction: The transaction needing a sampling decision\n * @param options: The current client's options, so we can access `tracesSampleRate` and/or `tracesSampler`\n * @param samplingContext: Default and user-provided data which may be used to help make the decision\n *\n * @returns The given transaction with its `sampled` value set\n */\nfunction sample(\n  transaction,\n  options,\n  samplingContext,\n) {\n  // nothing to do if tracing is not enabled\n  if (!hasTracingEnabled(options)) {\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // if the user has forced a sampling decision by passing a `sampled` value in their transaction context, go with that\n  if (transaction.sampled !== undefined) {\n    transaction.setMetadata({\n      sampleRate: Number(transaction.sampled),\n    });\n    return transaction;\n  }\n\n  // we would have bailed already if neither `tracesSampler` nor `tracesSampleRate` were defined, so one of these should\n  // work; prefer the hook if so\n  let sampleRate;\n  if (typeof options.tracesSampler === 'function') {\n    sampleRate = options.tracesSampler(samplingContext);\n    transaction.setMetadata({\n      sampleRate: Number(sampleRate),\n    });\n  } else if (samplingContext.parentSampled !== undefined) {\n    sampleRate = samplingContext.parentSampled;\n  } else {\n    sampleRate = options.tracesSampleRate;\n    transaction.setMetadata({\n      sampleRate: Number(sampleRate),\n    });\n  }\n\n  // Since this is coming from the user (or from a function provided by the user), who knows what we might get. (The\n  // only valid values are booleans or numbers between 0 and 1.)\n  if (!isValidSampleRate(sampleRate)) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('[Tracing] Discarding transaction because of invalid sample rate.');\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // if the function returned 0 (or false), or if `tracesSampleRate` is 0, it's a sign the transaction should be dropped\n  if (!sampleRate) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.log(\n        `[Tracing] Discarding transaction because ${\n          typeof options.tracesSampler === 'function'\n            ? 'tracesSampler returned 0 or false'\n            : 'a negative sampling decision was inherited or tracesSampleRate is set to 0'\n        }`,\n      );\n    transaction.sampled = false;\n    return transaction;\n  }\n\n  // Now we roll the dice. Math.random is inclusive of 0, but not of 1, so strict < is safe here. In case sampleRate is\n  // a boolean, the < comparison will cause it to be automatically cast to 1 if it's true and 0 if it's false.\n  transaction.sampled = Math.random() < (sampleRate );\n\n  // if we're not going to keep it, we're done\n  if (!transaction.sampled) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.log(\n        `[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(\n          sampleRate,\n        )})`,\n      );\n    return transaction;\n  }\n\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] starting ${transaction.op} transaction - ${transaction.name}`);\n  return transaction;\n}\n\n/**\n * Checks the given sample rate to make sure it is valid type and value (a boolean, or a number between 0 and 1).\n */\nfunction isValidSampleRate(rate) {\n  // we need to check NaN explicitly because it's of type 'number' and therefore wouldn't get caught by this typecheck\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  if (isNaN(rate) || !(typeof rate === 'number' || typeof rate === 'boolean')) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(\n        `[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(\n          rate,\n        )} of type ${JSON.stringify(typeof rate)}.`,\n      );\n    return false;\n  }\n\n  // in case sampleRate is a boolean, it will get automatically cast to 1 if it's true and 0 if it's false\n  if (rate < 0 || rate > 1) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${rate}.`);\n    return false;\n  }\n  return true;\n}\n\n/**\n * Creates a new transaction and adds a sampling decision if it doesn't yet have one.\n *\n * The Hub.startTransaction method delegates to this method to do its work, passing the Hub instance in as `this`, as if\n * it had been called on the hub directly. Exists as a separate function so that it can be injected into the class as an\n * \"extension method.\"\n *\n * @param this: The Hub starting the transaction\n * @param transactionContext: Data used to configure the transaction\n * @param CustomSamplingContext: Optional data to be provided to the `tracesSampler` function (if any)\n *\n * @returns The new transaction\n *\n * @see {@link Hub.startTransaction}\n */\nfunction _startTransaction(\n\n  transactionContext,\n  customSamplingContext,\n) {\n  const client = this.getClient();\n  const options = (client && client.getOptions()) || {};\n\n  const configInstrumenter = options.instrumenter || 'sentry';\n  const transactionInstrumenter = transactionContext.instrumenter || 'sentry';\n\n  if (configInstrumenter !== transactionInstrumenter) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.error(\n        `A transaction was started with instrumenter=\\`${transactionInstrumenter}\\`, but the SDK is configured with the \\`${configInstrumenter}\\` instrumenter.\nThe transaction will not be sampled. Please use the ${configInstrumenter} instrumentation to start transactions.`,\n      );\n\n    transactionContext.sampled = false;\n  }\n\n  let transaction = new Transaction(transactionContext, this);\n  transaction = sample(transaction, options, {\n    parentSampled: transactionContext.parentSampled,\n    transactionContext,\n    ...customSamplingContext,\n  });\n  if (transaction.sampled) {\n    transaction.initSpanRecorder(options._experiments && (options._experiments.maxSpans ));\n  }\n  return transaction;\n}\n\n/**\n * Create new idle transaction.\n */\nfunction startIdleTransaction(\n  hub,\n  transactionContext,\n  idleTimeout,\n  finalTimeout,\n  onScope,\n  customSamplingContext,\n  heartbeatInterval,\n) {\n  const client = hub.getClient();\n  const options = (client && client.getOptions()) || {};\n\n  let transaction = new IdleTransaction(transactionContext, hub, idleTimeout, finalTimeout, heartbeatInterval, onScope);\n  transaction = sample(transaction, options, {\n    parentSampled: transactionContext.parentSampled,\n    transactionContext,\n    ...customSamplingContext,\n  });\n  if (transaction.sampled) {\n    transaction.initSpanRecorder(options._experiments && (options._experiments.maxSpans ));\n  }\n  return transaction;\n}\n\n/**\n * @private\n */\nfunction _addTracingExtensions() {\n  const carrier = getMainCarrier();\n  if (!carrier.__SENTRY__) {\n    return;\n  }\n  carrier.__SENTRY__.extensions = carrier.__SENTRY__.extensions || {};\n  if (!carrier.__SENTRY__.extensions.startTransaction) {\n    carrier.__SENTRY__.extensions.startTransaction = _startTransaction;\n  }\n  if (!carrier.__SENTRY__.extensions.traceHeaders) {\n    carrier.__SENTRY__.extensions.traceHeaders = traceHeaders;\n  }\n}\n\n/**\n * @private\n */\nfunction _autoloadDatabaseIntegrations() {\n  const carrier = getMainCarrier();\n  if (!carrier.__SENTRY__) {\n    return;\n  }\n\n  const packageToIntegrationMapping = {\n    mongodb() {\n      const integration = dynamicRequire(module, './integrations/node/mongo')\n\n;\n      return new integration.Mongo();\n    },\n    mongoose() {\n      const integration = dynamicRequire(module, './integrations/node/mongo')\n\n;\n      return new integration.Mongo({ mongoose: true });\n    },\n    mysql() {\n      const integration = dynamicRequire(module, './integrations/node/mysql')\n\n;\n      return new integration.Mysql();\n    },\n    pg() {\n      const integration = dynamicRequire(module, './integrations/node/postgres')\n\n;\n      return new integration.Postgres();\n    },\n  };\n\n  const mappedPackages = Object.keys(packageToIntegrationMapping)\n    .filter(moduleName => !!loadModule(moduleName))\n    .map(pkg => {\n      try {\n        return packageToIntegrationMapping[pkg]();\n      } catch (e) {\n        return undefined;\n      }\n    })\n    .filter(p => p) ;\n\n  if (mappedPackages.length > 0) {\n    carrier.__SENTRY__.integrations = [...(carrier.__SENTRY__.integrations || []), ...mappedPackages];\n  }\n}\n\n/**\n * This patches the global object and injects the Tracing extensions methods\n */\nfunction addExtensionMethods() {\n  _addTracingExtensions();\n\n  // Detect and automatically load specified integrations.\n  if (isNodeEnv()) {\n    _autoloadDatabaseIntegrations();\n  }\n\n  // If an error happens globally, we should make sure transaction status is set to error.\n  registerErrorInstrumentation();\n}\n\nexport { _addTracingExtensions, addExtensionMethods, startIdleTransaction };\n//# sourceMappingURL=hubextensions.js.map\n","import { GLOBAL_OBJ } from '@sentry/utils';\n\nconst WINDOW = GLOBAL_OBJ ;\n\nexport { WINDOW };\n//# sourceMappingURL=types.js.map\n","import { logger } from '@sentry/utils';\nimport { getActiveTransaction } from '../utils.js';\nimport { WINDOW } from './types.js';\n\n/**\n * Add a listener that cancels and finishes a transaction when the global\n * document is hidden.\n */\nfunction registerBackgroundTabDetection() {\n  if (WINDOW && WINDOW.document) {\n    WINDOW.document.addEventListener('visibilitychange', () => {\n      const activeTransaction = getActiveTransaction() ;\n      if (WINDOW.document.hidden && activeTransaction) {\n        const statusType = 'cancelled';\n\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          logger.log(\n            `[Tracing] Transaction: ${statusType} -> since tab moved to the background, op: ${activeTransaction.op}`,\n          );\n        // We should not set status if it is already set, this prevent important statuses like\n        // error or data loss from being overwritten on transaction.\n        if (!activeTransaction.status) {\n          activeTransaction.setStatus(statusType);\n        }\n        activeTransaction.setTag('visibilitychange', 'document.hidden');\n        activeTransaction.finish();\n      }\n    });\n  } else {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n      logger.warn('[Tracing] Could not set up background tab detection due to lack of global document');\n  }\n}\n\nexport { registerBackgroundTabDetection };\n//# sourceMappingURL=backgroundtab.js.map\n","const bindReporter = (\n  callback,\n  metric,\n  reportAllChanges,\n) => {\n  let prevValue;\n  let delta;\n  return (forceReport) => {\n    if (metric.value >= 0) {\n      if (forceReport || reportAllChanges) {\n        delta = metric.value - (prevValue || 0);\n\n        // Report the metric if there's a non-zero delta or if no previous\n        // value exists (which can happen in the case of the document becoming\n        // hidden when the metric value is 0).\n        // See: https://github.com/GoogleChrome/web-vitals/issues/14\n        if (delta || prevValue === undefined) {\n          prevValue = metric.value;\n          metric.delta = delta;\n          callback(metric);\n        }\n      }\n    }\n  };\n};\n\nexport { bindReporter };\n//# sourceMappingURL=bindReporter.js.map\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Performantly generate a unique, 30-char string by combining a version\n * number, the current timestamp with a 13-digit number integer.\n * @return {string}\n */\nconst generateUniqueID = () => {\n  return `v3-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`;\n};\n\nexport { generateUniqueID };\n//# sourceMappingURL=generateUniqueID.js.map\n","import { WINDOW } from '../../types.js';\n\n/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst getNavigationEntryFromPerformanceTiming = () => {\n  // eslint-disable-next-line deprecation/deprecation\n  const timing = WINDOW.performance.timing;\n  // eslint-disable-next-line deprecation/deprecation\n  const type = WINDOW.performance.navigation.type;\n\n  const navigationEntry = {\n    entryType: 'navigation',\n    startTime: 0,\n    type: type == 2 ? 'back_forward' : type === 1 ? 'reload' : 'navigate',\n  };\n\n  for (const key in timing) {\n    if (key !== 'navigationStart' && key !== 'toJSON') {\n      navigationEntry[key] = Math.max((timing[key ] ) - timing.navigationStart, 0);\n    }\n  }\n  return navigationEntry ;\n};\n\nconst getNavigationEntry = () => {\n  if (WINDOW.__WEB_VITALS_POLYFILL__) {\n    return (\n      WINDOW.performance &&\n      ((performance.getEntriesByType && performance.getEntriesByType('navigation')[0]) ||\n        getNavigationEntryFromPerformanceTiming())\n    );\n  } else {\n    return WINDOW.performance && performance.getEntriesByType && performance.getEntriesByType('navigation')[0];\n  }\n};\n\nexport { getNavigationEntry };\n//# sourceMappingURL=getNavigationEntry.js.map\n","import { getNavigationEntry } from './getNavigationEntry.js';\n\n/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst getActivationStart = () => {\n  const navEntry = getNavigationEntry();\n  return (navEntry && navEntry.activationStart) || 0;\n};\n\nexport { getActivationStart };\n//# sourceMappingURL=getActivationStart.js.map\n","import { WINDOW } from '../../types.js';\nimport { generateUniqueID } from './generateUniqueID.js';\nimport { getActivationStart } from './getActivationStart.js';\nimport { getNavigationEntry } from './getNavigationEntry.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst initMetric = (name, value) => {\n  const navEntry = getNavigationEntry();\n  let navigationType = 'navigate';\n\n  if (navEntry) {\n    if (WINDOW.document.prerendering || getActivationStart() > 0) {\n      navigationType = 'prerender';\n    } else {\n      navigationType = navEntry.type.replace(/_/g, '-') ;\n    }\n  }\n\n  return {\n    name,\n    value: typeof value === 'undefined' ? -1 : value,\n    rating: 'good', // Will be updated if the value changes.\n    delta: 0,\n    entries: [],\n    id: generateUniqueID(),\n    navigationType,\n  };\n};\n\nexport { initMetric };\n//# sourceMappingURL=initMetric.js.map\n","/**\n * Takes a performance entry type and a callback function, and creates a\n * `PerformanceObserver` instance that will observe the specified entry type\n * with buffering enabled and call the callback _for each entry_.\n *\n * This function also feature-detects entry support and wraps the logic in a\n * try/catch to avoid errors in unsupporting browsers.\n */\nconst observe = (\n  type,\n  callback,\n  opts,\n) => {\n  try {\n    if (PerformanceObserver.supportedEntryTypes.includes(type)) {\n      const po = new PerformanceObserver(list => {\n        callback(list.getEntries() );\n      });\n      po.observe(\n        Object.assign(\n          {\n            type,\n            buffered: true,\n          },\n          opts || {},\n        ) ,\n      );\n      return po;\n    }\n  } catch (e) {\n    // Do nothing.\n  }\n  return;\n};\n\nexport { observe };\n//# sourceMappingURL=observe.js.map\n","import { WINDOW } from '../../types.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst onHidden = (cb, once) => {\n  const onHiddenOrPageHide = (event) => {\n    if (event.type === 'pagehide' || WINDOW.document.visibilityState === 'hidden') {\n      cb(event);\n      if (once) {\n        removeEventListener('visibilitychange', onHiddenOrPageHide, true);\n        removeEventListener('pagehide', onHiddenOrPageHide, true);\n      }\n    }\n  };\n  addEventListener('visibilitychange', onHiddenOrPageHide, true);\n  // Some browsers have buggy implementations of visibilitychange,\n  // so we use pagehide in addition, just to be safe.\n  addEventListener('pagehide', onHiddenOrPageHide, true);\n};\n\nexport { onHidden };\n//# sourceMappingURL=onHidden.js.map\n","import { bindReporter } from './lib/bindReporter.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onHidden } from './lib/onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Calculates the [CLS](https://web.dev/cls/) value for the current page and\n * calls the `callback` function once the value is ready to be reported, along\n * with all `layout-shift` performance entries that were used in the metric\n * value calculation. The reported value is a `double` (corresponding to a\n * [layout shift score](https://web.dev/cls/#layout-shift-score)).\n *\n * If the `reportAllChanges` configuration option is set to `true`, the\n * `callback` function will be called as soon as the value is initially\n * determined as well as any time the value changes throughout the page\n * lifespan.\n *\n * _**Important:** CLS should be continually monitored for changes throughout\n * the entire lifespan of a pageincluding if the user returns to the page after\n * it's been hidden/backgrounded. However, since browsers often [will not fire\n * additional callbacks once the user has backgrounded a\n * page](https://developer.chrome.com/blog/page-lifecycle-api/#advice-hidden),\n * `callback` is always called when the page's visibility state changes to\n * hidden. As a result, the `callback` function might be called multiple times\n * during the same page load._\n */\nconst onCLS = (onReport) => {\n  const metric = initMetric('CLS', 0);\n  let report;\n\n  let sessionValue = 0;\n  let sessionEntries = [];\n\n  // const handleEntries = (entries: Metric['entries']) => {\n  const handleEntries = (entries) => {\n    entries.forEach(entry => {\n      // Only count layout shifts without recent user input.\n      if (!entry.hadRecentInput) {\n        const firstSessionEntry = sessionEntries[0];\n        const lastSessionEntry = sessionEntries[sessionEntries.length - 1];\n\n        // If the entry occurred less than 1 second after the previous entry and\n        // less than 5 seconds after the first entry in the session, include the\n        // entry in the current session. Otherwise, start a new session.\n        if (\n          sessionValue &&\n          sessionEntries.length !== 0 &&\n          entry.startTime - lastSessionEntry.startTime < 1000 &&\n          entry.startTime - firstSessionEntry.startTime < 5000\n        ) {\n          sessionValue += entry.value;\n          sessionEntries.push(entry);\n        } else {\n          sessionValue = entry.value;\n          sessionEntries = [entry];\n        }\n\n        // If the current session value is larger than the current CLS value,\n        // update CLS and the entries contributing to it.\n        if (sessionValue > metric.value) {\n          metric.value = sessionValue;\n          metric.entries = sessionEntries;\n          if (report) {\n            report();\n          }\n        }\n      }\n    });\n  };\n\n  const po = observe('layout-shift', handleEntries);\n  if (po) {\n    report = bindReporter(onReport, metric);\n\n    onHidden(() => {\n      handleEntries(po.takeRecords() );\n      report(true);\n    });\n  }\n};\n\nexport { onCLS };\n//# sourceMappingURL=getCLS.js.map\n","import { WINDOW } from '../../types.js';\nimport { onHidden } from './onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet firstHiddenTime = -1;\n\nconst initHiddenTime = () => {\n  // If the document is hidden and not prerendering, assume it was always\n  // hidden and the page was loaded in the background.\n  return WINDOW.document.visibilityState === 'hidden' && !WINDOW.document.prerendering ? 0 : Infinity;\n};\n\nconst trackChanges = () => {\n  // Update the time if/when the document becomes hidden.\n  onHidden(({ timeStamp }) => {\n    firstHiddenTime = timeStamp;\n  }, true);\n};\n\nconst getVisibilityWatcher = (\n\n) => {\n  if (firstHiddenTime < 0) {\n    // If the document is hidden when this code runs, assume it was hidden\n    // since navigation start. This isn't a perfect heuristic, but it's the\n    // best we can do until an API is available to support querying past\n    // visibilityState.\n    firstHiddenTime = initHiddenTime();\n    trackChanges();\n  }\n  return {\n    get firstHiddenTime() {\n      return firstHiddenTime;\n    },\n  };\n};\n\nexport { getVisibilityWatcher };\n//# sourceMappingURL=getVisibilityWatcher.js.map\n","import { bindReporter } from './lib/bindReporter.js';\nimport { getVisibilityWatcher } from './lib/getVisibilityWatcher.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onHidden } from './lib/onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Calculates the [FID](https://web.dev/fid/) value for the current page and\n * calls the `callback` function once the value is ready, along with the\n * relevant `first-input` performance entry used to determine the value. The\n * reported value is a `DOMHighResTimeStamp`.\n *\n * _**Important:** since FID is only reported after the user interacts with the\n * page, it's possible that it will not be reported for some page loads._\n */\nconst onFID = (onReport) => {\n  const visibilityWatcher = getVisibilityWatcher();\n  const metric = initMetric('FID');\n  // eslint-disable-next-line prefer-const\n  let report;\n\n  const handleEntry = (entry) => {\n    // Only report if the page wasn't hidden prior to the first input.\n    if (entry.startTime < visibilityWatcher.firstHiddenTime) {\n      metric.value = entry.processingStart - entry.startTime;\n      metric.entries.push(entry);\n      report(true);\n    }\n  };\n\n  const handleEntries = (entries) => {\n    (entries ).forEach(handleEntry);\n  };\n\n  const po = observe('first-input', handleEntries);\n  report = bindReporter(onReport, metric);\n\n  if (po) {\n    onHidden(() => {\n      handleEntries(po.takeRecords() );\n      po.disconnect();\n    }, true);\n  }\n};\n\nexport { onFID };\n//# sourceMappingURL=getFID.js.map\n","import { bindReporter } from './lib/bindReporter.js';\nimport { getActivationStart } from './lib/getActivationStart.js';\nimport { getVisibilityWatcher } from './lib/getVisibilityWatcher.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onHidden } from './lib/onHidden.js';\n\n/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst reportedMetricIDs = {};\n\n/**\n * Calculates the [LCP](https://web.dev/lcp/) value for the current page and\n * calls the `callback` function once the value is ready (along with the\n * relevant `largest-contentful-paint` performance entry used to determine the\n * value). The reported value is a `DOMHighResTimeStamp`.\n */\nconst onLCP = (onReport) => {\n  const visibilityWatcher = getVisibilityWatcher();\n  const metric = initMetric('LCP');\n  let report;\n\n  const handleEntries = (entries) => {\n    const lastEntry = entries[entries.length - 1] ;\n    if (lastEntry) {\n      // The startTime attribute returns the value of the renderTime if it is\n      // not 0, and the value of the loadTime otherwise. The activationStart\n      // reference is used because LCP should be relative to page activation\n      // rather than navigation start if the page was prerendered.\n      const value = Math.max(lastEntry.startTime - getActivationStart(), 0);\n\n      // Only report if the page wasn't hidden prior to LCP.\n      if (value < visibilityWatcher.firstHiddenTime) {\n        metric.value = value;\n        metric.entries = [lastEntry];\n        report();\n      }\n    }\n  };\n\n  const po = observe('largest-contentful-paint', handleEntries);\n\n  if (po) {\n    report = bindReporter(onReport, metric);\n\n    const stopListening = () => {\n      if (!reportedMetricIDs[metric.id]) {\n        handleEntries(po.takeRecords() );\n        po.disconnect();\n        reportedMetricIDs[metric.id] = true;\n        report(true);\n      }\n    };\n\n    // Stop listening after input. Note: while scrolling is an input that\n    // stop LCP observation, it's unreliable since it can be programmatically\n    // generated. See: https://github.com/GoogleChrome/web-vitals/issues/75\n    ['keydown', 'click'].forEach(type => {\n      addEventListener(type, stopListening, { once: true, capture: true });\n    });\n\n    onHidden(stopListening, true);\n  }\n};\n\nexport { onLCP };\n//# sourceMappingURL=getLCP.js.map\n","/**\n * Checks if a given value is a valid measurement value.\n */\nfunction isMeasurementValue(value) {\n  return typeof value === 'number' && isFinite(value);\n}\n\n/**\n * Helper function to start child on transactions. This function will make sure that the transaction will\n * use the start timestamp of the created child span if it is earlier than the transactions actual\n * start timestamp.\n */\nfunction _startChild(transaction, { startTimestamp, ...ctx }) {\n  if (startTimestamp && transaction.startTimestamp > startTimestamp) {\n    transaction.startTimestamp = startTimestamp;\n  }\n\n  return transaction.startChild({\n    startTimestamp,\n    ...ctx,\n  });\n}\n\nexport { _startChild, isMeasurementValue };\n//# sourceMappingURL=utils.js.map\n","import { _nullishCoalesce } from '@sentry/utils/esm/buildPolyfills';\nimport { browserPerformanceTimeOrigin, logger, htmlTreeAsString } from '@sentry/utils';\nimport { getActiveTransaction, msToSec } from '../../utils.js';\nimport { WINDOW } from '../types.js';\nimport { onCLS } from '../web-vitals/getCLS.js';\nimport { onFID } from '../web-vitals/getFID.js';\nimport { onLCP } from '../web-vitals/getLCP.js';\nimport { getVisibilityWatcher } from '../web-vitals/lib/getVisibilityWatcher.js';\nimport { observe } from '../web-vitals/lib/observe.js';\nimport { _startChild, isMeasurementValue } from './utils.js';\n\nfunction getBrowserPerformanceAPI() {\n  return WINDOW && WINDOW.addEventListener && WINDOW.performance;\n}\n\nlet _performanceCursor = 0;\n\nlet _measurements = {};\nlet _lcpEntry;\nlet _clsEntry;\n\n/**\n * Start tracking web vitals\n */\nfunction startTrackingWebVitals() {\n  const performance = getBrowserPerformanceAPI();\n  if (performance && browserPerformanceTimeOrigin) {\n    if (performance.mark) {\n      WINDOW.performance.mark('sentry-tracing-init');\n    }\n    _trackCLS();\n    _trackLCP();\n    _trackFID();\n  }\n}\n\n/**\n * Start tracking long tasks.\n */\nfunction startTrackingLongTasks() {\n  const entryHandler = (entries) => {\n    for (const entry of entries) {\n      const transaction = getActiveTransaction() ;\n      if (!transaction) {\n        return;\n      }\n      const startTime = msToSec((browserPerformanceTimeOrigin ) + entry.startTime);\n      const duration = msToSec(entry.duration);\n\n      transaction.startChild({\n        description: 'Main UI thread blocked',\n        op: 'ui.long-task',\n        startTimestamp: startTime,\n        endTimestamp: startTime + duration,\n      });\n    }\n  };\n\n  observe('longtask', entryHandler);\n}\n\n/** Starts tracking the Cumulative Layout Shift on the current page. */\nfunction _trackCLS() {\n  // See:\n  // https://web.dev/evolving-cls/\n  // https://web.dev/cls-web-tooling/\n  onCLS(metric => {\n    const entry = metric.entries.pop();\n    if (!entry) {\n      return;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding CLS');\n    _measurements['cls'] = { value: metric.value, unit: '' };\n    _clsEntry = entry ;\n  });\n}\n\n/** Starts tracking the Largest Contentful Paint on the current page. */\nfunction _trackLCP() {\n  onLCP(metric => {\n    const entry = metric.entries.pop();\n    if (!entry) {\n      return;\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding LCP');\n    _measurements['lcp'] = { value: metric.value, unit: 'millisecond' };\n    _lcpEntry = entry ;\n  });\n}\n\n/** Starts tracking the First Input Delay on the current page. */\nfunction _trackFID() {\n  onFID(metric => {\n    const entry = metric.entries.pop();\n    if (!entry) {\n      return;\n    }\n\n    const timeOrigin = msToSec(browserPerformanceTimeOrigin );\n    const startTime = msToSec(entry.startTime);\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding FID');\n    _measurements['fid'] = { value: metric.value, unit: 'millisecond' };\n    _measurements['mark.fid'] = { value: timeOrigin + startTime, unit: 'second' };\n  });\n}\n\n/** Add performance related spans to a transaction */\nfunction addPerformanceEntries(transaction) {\n  const performance = getBrowserPerformanceAPI();\n  if (!performance || !WINDOW.performance.getEntries || !browserPerformanceTimeOrigin) {\n    // Gatekeeper if performance API not available\n    return;\n  }\n\n  (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Tracing] Adding & adjusting spans using Performance API');\n  const timeOrigin = msToSec(browserPerformanceTimeOrigin);\n\n  const performanceEntries = performance.getEntries();\n\n  let responseStartTimestamp;\n  let requestStartTimestamp;\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  performanceEntries.slice(_performanceCursor).forEach((entry) => {\n    const startTime = msToSec(entry.startTime);\n    const duration = msToSec(entry.duration);\n\n    if (transaction.op === 'navigation' && timeOrigin + startTime < transaction.startTimestamp) {\n      return;\n    }\n\n    switch (entry.entryType) {\n      case 'navigation': {\n        _addNavigationSpans(transaction, entry, timeOrigin);\n        responseStartTimestamp = timeOrigin + msToSec(entry.responseStart);\n        requestStartTimestamp = timeOrigin + msToSec(entry.requestStart);\n        break;\n      }\n      case 'mark':\n      case 'paint':\n      case 'measure': {\n        _addMeasureSpans(transaction, entry, startTime, duration, timeOrigin);\n\n        // capture web vitals\n        const firstHidden = getVisibilityWatcher();\n        // Only report if the page wasn't hidden prior to the web vital.\n        const shouldRecord = entry.startTime < firstHidden.firstHiddenTime;\n\n        if (entry.name === 'first-paint' && shouldRecord) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding FP');\n          _measurements['fp'] = { value: entry.startTime, unit: 'millisecond' };\n        }\n        if (entry.name === 'first-contentful-paint' && shouldRecord) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding FCP');\n          _measurements['fcp'] = { value: entry.startTime, unit: 'millisecond' };\n        }\n        break;\n      }\n      case 'resource': {\n        const resourceName = (entry.name ).replace(WINDOW.location.origin, '');\n        _addResourceSpans(transaction, entry, resourceName, startTime, duration, timeOrigin);\n        break;\n      }\n      default:\n      // Ignore other entry types.\n    }\n  });\n\n  _performanceCursor = Math.max(performanceEntries.length - 1, 0);\n\n  _trackNavigator(transaction);\n\n  // Measurements are only available for pageload transactions\n  if (transaction.op === 'pageload') {\n    // Generate TTFB (Time to First Byte), which measured as the time between the beginning of the transaction and the\n    // start of the response in milliseconds\n    if (typeof responseStartTimestamp === 'number') {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding TTFB');\n      _measurements['ttfb'] = {\n        value: (responseStartTimestamp - transaction.startTimestamp) * 1000,\n        unit: 'millisecond',\n      };\n\n      if (typeof requestStartTimestamp === 'number' && requestStartTimestamp <= responseStartTimestamp) {\n        // Capture the time spent making the request and receiving the first byte of the response.\n        // This is the time between the start of the request and the start of the response in milliseconds.\n        _measurements['ttfb.requestTime'] = {\n          value: (responseStartTimestamp - requestStartTimestamp) * 1000,\n          unit: 'millisecond',\n        };\n      }\n    }\n\n    ['fcp', 'fp', 'lcp'].forEach(name => {\n      if (!_measurements[name] || timeOrigin >= transaction.startTimestamp) {\n        return;\n      }\n      // The web vitals, fcp, fp, lcp, and ttfb, all measure relative to timeOrigin.\n      // Unfortunately, timeOrigin is not captured within the transaction span data, so these web vitals will need\n      // to be adjusted to be relative to transaction.startTimestamp.\n      const oldValue = _measurements[name].value;\n      const measurementTimestamp = timeOrigin + msToSec(oldValue);\n\n      // normalizedValue should be in milliseconds\n      const normalizedValue = Math.abs((measurementTimestamp - transaction.startTimestamp) * 1000);\n      const delta = normalizedValue - oldValue;\n\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(`[Measurements] Normalized ${name} from ${oldValue} to ${normalizedValue} (${delta})`);\n      _measurements[name].value = normalizedValue;\n    });\n\n    const fidMark = _measurements['mark.fid'];\n    if (fidMark && _measurements['fid']) {\n      // create span for FID\n      _startChild(transaction, {\n        description: 'first input delay',\n        endTimestamp: fidMark.value + msToSec(_measurements['fid'].value),\n        op: 'ui.action',\n        startTimestamp: fidMark.value,\n      });\n\n      // Delete mark.fid as we don't want it to be part of final payload\n      delete _measurements['mark.fid'];\n    }\n\n    // If FCP is not recorded we should not record the cls value\n    // according to the new definition of CLS.\n    if (!('fcp' in _measurements)) {\n      delete _measurements.cls;\n    }\n\n    Object.keys(_measurements).forEach(measurementName => {\n      transaction.setMeasurement(\n        measurementName,\n        _measurements[measurementName].value,\n        _measurements[measurementName].unit,\n      );\n    });\n\n    _tagMetricInfo(transaction);\n  }\n\n  _lcpEntry = undefined;\n  _clsEntry = undefined;\n  _measurements = {};\n}\n\n/** Create measure related spans */\nfunction _addMeasureSpans(\n  transaction,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  entry,\n  startTime,\n  duration,\n  timeOrigin,\n) {\n  const measureStartTimestamp = timeOrigin + startTime;\n  const measureEndTimestamp = measureStartTimestamp + duration;\n\n  _startChild(transaction, {\n    description: entry.name ,\n    endTimestamp: measureEndTimestamp,\n    op: entry.entryType ,\n    startTimestamp: measureStartTimestamp,\n  });\n\n  return measureStartTimestamp;\n}\n\n/** Instrument navigation entries */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _addNavigationSpans(transaction, entry, timeOrigin) {\n  ['unloadEvent', 'redirect', 'domContentLoadedEvent', 'loadEvent', 'connect'].forEach(event => {\n    _addPerformanceNavigationTiming(transaction, entry, event, timeOrigin);\n  });\n  _addPerformanceNavigationTiming(transaction, entry, 'secureConnection', timeOrigin, 'TLS/SSL', 'connectEnd');\n  _addPerformanceNavigationTiming(transaction, entry, 'fetch', timeOrigin, 'cache', 'domainLookupStart');\n  _addPerformanceNavigationTiming(transaction, entry, 'domainLookup', timeOrigin, 'DNS');\n  _addRequest(transaction, entry, timeOrigin);\n}\n\n/** Create performance navigation related spans */\nfunction _addPerformanceNavigationTiming(\n  transaction,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  entry,\n  event,\n  timeOrigin,\n  description,\n  eventEnd,\n) {\n  const end = eventEnd ? (entry[eventEnd] ) : (entry[`${event}End`] );\n  const start = entry[`${event}Start`] ;\n  if (!start || !end) {\n    return;\n  }\n  _startChild(transaction, {\n    op: 'browser',\n    description: _nullishCoalesce(description, () => ( event)),\n    startTimestamp: timeOrigin + msToSec(start),\n    endTimestamp: timeOrigin + msToSec(end),\n  });\n}\n\n/** Create request and response related spans */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _addRequest(transaction, entry, timeOrigin) {\n  _startChild(transaction, {\n    op: 'browser',\n    description: 'request',\n    startTimestamp: timeOrigin + msToSec(entry.requestStart ),\n    endTimestamp: timeOrigin + msToSec(entry.responseEnd ),\n  });\n\n  _startChild(transaction, {\n    op: 'browser',\n    description: 'response',\n    startTimestamp: timeOrigin + msToSec(entry.responseStart ),\n    endTimestamp: timeOrigin + msToSec(entry.responseEnd ),\n  });\n}\n\n/** Create resource-related spans */\nfunction _addResourceSpans(\n  transaction,\n  entry,\n  resourceName,\n  startTime,\n  duration,\n  timeOrigin,\n) {\n  // we already instrument based on fetch and xhr, so we don't need to\n  // duplicate spans here.\n  if (entry.initiatorType === 'xmlhttprequest' || entry.initiatorType === 'fetch') {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const data = {};\n  if ('transferSize' in entry) {\n    data['Transfer Size'] = entry.transferSize;\n  }\n  if ('encodedBodySize' in entry) {\n    data['Encoded Body Size'] = entry.encodedBodySize;\n  }\n  if ('decodedBodySize' in entry) {\n    data['Decoded Body Size'] = entry.decodedBodySize;\n  }\n\n  const startTimestamp = timeOrigin + startTime;\n  const endTimestamp = startTimestamp + duration;\n\n  _startChild(transaction, {\n    description: resourceName,\n    endTimestamp,\n    op: entry.initiatorType ? `resource.${entry.initiatorType}` : 'resource.other',\n    startTimestamp,\n    data,\n  });\n}\n\n/**\n * Capture the information of the user agent.\n */\nfunction _trackNavigator(transaction) {\n  const navigator = WINDOW.navigator ;\n  if (!navigator) {\n    return;\n  }\n\n  // track network connectivity\n  const connection = navigator.connection;\n  if (connection) {\n    if (connection.effectiveType) {\n      transaction.setTag('effectiveConnectionType', connection.effectiveType);\n    }\n\n    if (connection.type) {\n      transaction.setTag('connectionType', connection.type);\n    }\n\n    if (isMeasurementValue(connection.rtt)) {\n      _measurements['connection.rtt'] = { value: connection.rtt, unit: 'millisecond' };\n    }\n  }\n\n  if (isMeasurementValue(navigator.deviceMemory)) {\n    transaction.setTag('deviceMemory', `${navigator.deviceMemory} GB`);\n  }\n\n  if (isMeasurementValue(navigator.hardwareConcurrency)) {\n    transaction.setTag('hardwareConcurrency', String(navigator.hardwareConcurrency));\n  }\n}\n\n/** Add LCP / CLS data to transaction to allow debugging */\nfunction _tagMetricInfo(transaction) {\n  if (_lcpEntry) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding LCP Data');\n\n    // Capture Properties of the LCP element that contributes to the LCP.\n\n    if (_lcpEntry.element) {\n      transaction.setTag('lcp.element', htmlTreeAsString(_lcpEntry.element));\n    }\n\n    if (_lcpEntry.id) {\n      transaction.setTag('lcp.id', _lcpEntry.id);\n    }\n\n    if (_lcpEntry.url) {\n      // Trim URL to the first 200 characters.\n      transaction.setTag('lcp.url', _lcpEntry.url.trim().slice(0, 200));\n    }\n\n    transaction.setTag('lcp.size', _lcpEntry.size);\n  }\n\n  // See: https://developer.mozilla.org/en-US/docs/Web/API/LayoutShift\n  if (_clsEntry && _clsEntry.sources) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log('[Measurements] Adding CLS Data');\n    _clsEntry.sources.forEach((source, index) =>\n      transaction.setTag(`cls.source.${index + 1}`, htmlTreeAsString(source.node)),\n    );\n  }\n}\n\nexport { _addMeasureSpans, _addResourceSpans, addPerformanceEntries, startTrackingLongTasks, startTrackingWebVitals };\n//# sourceMappingURL=index.js.map\n","import { addInstrumentationHandler, stringMatchesSomePattern, dynamicSamplingContextToSentryBaggageHeader, isInstanceOf, BAGGAGE_HEADER_NAME } from '@sentry/utils';\nimport { hasTracingEnabled, getActiveTransaction } from '../utils.js';\n\nconst DEFAULT_TRACE_PROPAGATION_TARGETS = ['localhost', /^\\//];\n\n/** Options for Request Instrumentation */\n\nconst defaultRequestInstrumentationOptions = {\n  traceFetch: true,\n  traceXHR: true,\n  // TODO (v8): Remove this property\n  tracingOrigins: DEFAULT_TRACE_PROPAGATION_TARGETS,\n  tracePropagationTargets: DEFAULT_TRACE_PROPAGATION_TARGETS,\n};\n\n/** Registers span creators for xhr and fetch requests  */\nfunction instrumentOutgoingRequests(_options) {\n  // eslint-disable-next-line deprecation/deprecation\n  const { traceFetch, traceXHR, tracePropagationTargets, tracingOrigins, shouldCreateSpanForRequest } = {\n    traceFetch: defaultRequestInstrumentationOptions.traceFetch,\n    traceXHR: defaultRequestInstrumentationOptions.traceXHR,\n    ..._options,\n  };\n\n  const shouldCreateSpan =\n    typeof shouldCreateSpanForRequest === 'function' ? shouldCreateSpanForRequest : (_) => true;\n\n  // TODO(v8) Remove tracingOrigins here\n  // The only reason we're passing it in here is because this instrumentOutgoingRequests function is publicly exported\n  // and we don't want to break the API. We can remove it in v8.\n  const shouldAttachHeadersWithTargets = (url) =>\n    shouldAttachHeaders(url, tracePropagationTargets || tracingOrigins);\n\n  const spans = {};\n\n  if (traceFetch) {\n    addInstrumentationHandler('fetch', (handlerData) => {\n      fetchCallback(handlerData, shouldCreateSpan, shouldAttachHeadersWithTargets, spans);\n    });\n  }\n\n  if (traceXHR) {\n    addInstrumentationHandler('xhr', (handlerData) => {\n      xhrCallback(handlerData, shouldCreateSpan, shouldAttachHeadersWithTargets, spans);\n    });\n  }\n}\n\n/**\n * A function that determines whether to attach tracing headers to a request.\n * This was extracted from `instrumentOutgoingRequests` to make it easier to test shouldAttachHeaders.\n * We only export this fuction for testing purposes.\n */\nfunction shouldAttachHeaders(url, tracePropagationTargets) {\n  return stringMatchesSomePattern(url, tracePropagationTargets || DEFAULT_TRACE_PROPAGATION_TARGETS);\n}\n\n/**\n * Create and track fetch request spans\n */\nfunction fetchCallback(\n  handlerData,\n  shouldCreateSpan,\n  shouldAttachHeaders,\n  spans,\n) {\n  if (!hasTracingEnabled() || !(handlerData.fetchData && shouldCreateSpan(handlerData.fetchData.url))) {\n    return;\n  }\n\n  if (handlerData.endTimestamp) {\n    const spanId = handlerData.fetchData.__span;\n    if (!spanId) return;\n\n    const span = spans[spanId];\n    if (span) {\n      if (handlerData.response) {\n        // TODO (kmclb) remove this once types PR goes through\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        span.setHttpStatus(handlerData.response.status);\n      } else if (handlerData.error) {\n        span.setStatus('internal_error');\n      }\n      span.finish();\n\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete spans[spanId];\n    }\n    return;\n  }\n\n  const activeTransaction = getActiveTransaction();\n  if (activeTransaction) {\n    const span = activeTransaction.startChild({\n      data: {\n        ...handlerData.fetchData,\n        type: 'fetch',\n      },\n      description: `${handlerData.fetchData.method} ${handlerData.fetchData.url}`,\n      op: 'http.client',\n    });\n\n    handlerData.fetchData.__span = span.spanId;\n    spans[span.spanId] = span;\n\n    const request = handlerData.args[0];\n\n    // In case the user hasn't set the second argument of a fetch call we default it to `{}`.\n    handlerData.args[1] = handlerData.args[1] || {};\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const options = handlerData.args[1];\n\n    if (shouldAttachHeaders(handlerData.fetchData.url)) {\n      options.headers = addTracingHeadersToFetchRequest(\n        request,\n        activeTransaction.getDynamicSamplingContext(),\n        span,\n        options,\n      );\n\n      activeTransaction.metadata.propagations++;\n    }\n  }\n}\n\nfunction addTracingHeadersToFetchRequest(\n  request,\n  dynamicSamplingContext,\n  span,\n  options\n\n,\n) {\n  const sentryBaggageHeader = dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext);\n  const sentryTraceHeader = span.toTraceparent();\n\n  const headers =\n    typeof Request !== 'undefined' && isInstanceOf(request, Request) ? (request ).headers : options.headers;\n\n  if (!headers) {\n    return { 'sentry-trace': sentryTraceHeader, baggage: sentryBaggageHeader };\n  } else if (typeof Headers !== 'undefined' && isInstanceOf(headers, Headers)) {\n    const newHeaders = new Headers(headers );\n\n    newHeaders.append('sentry-trace', sentryTraceHeader);\n\n    if (sentryBaggageHeader) {\n      // If the same header is appended miultiple times the browser will merge the values into a single request header.\n      // Its therefore safe to simply push a \"baggage\" entry, even though there might already be another baggage header.\n      newHeaders.append(BAGGAGE_HEADER_NAME, sentryBaggageHeader);\n    }\n\n    return newHeaders ;\n  } else if (Array.isArray(headers)) {\n    const newHeaders = [...headers, ['sentry-trace', sentryTraceHeader]];\n\n    if (sentryBaggageHeader) {\n      // If there are multiple entries with the same key, the browser will merge the values into a single request header.\n      // Its therefore safe to simply push a \"baggage\" entry, even though there might already be another baggage header.\n      newHeaders.push([BAGGAGE_HEADER_NAME, sentryBaggageHeader]);\n    }\n\n    return newHeaders;\n  } else {\n    const existingBaggageHeader = 'baggage' in headers ? headers.baggage : undefined;\n    const newBaggageHeaders = [];\n\n    if (Array.isArray(existingBaggageHeader)) {\n      newBaggageHeaders.push(...existingBaggageHeader);\n    } else if (existingBaggageHeader) {\n      newBaggageHeaders.push(existingBaggageHeader);\n    }\n\n    if (sentryBaggageHeader) {\n      newBaggageHeaders.push(sentryBaggageHeader);\n    }\n\n    return {\n      ...(headers ),\n      'sentry-trace': sentryTraceHeader,\n      baggage: newBaggageHeaders.length > 0 ? newBaggageHeaders.join(',') : undefined,\n    };\n  }\n}\n\n/**\n * Create and track xhr request spans\n */\nfunction xhrCallback(\n  handlerData,\n  shouldCreateSpan,\n  shouldAttachHeaders,\n  spans,\n) {\n  if (\n    !hasTracingEnabled() ||\n    (handlerData.xhr && handlerData.xhr.__sentry_own_request__) ||\n    !(handlerData.xhr && handlerData.xhr.__sentry_xhr__ && shouldCreateSpan(handlerData.xhr.__sentry_xhr__.url))\n  ) {\n    return;\n  }\n\n  const xhr = handlerData.xhr.__sentry_xhr__;\n\n  // check first if the request has finished and is tracked by an existing span which should now end\n  if (handlerData.endTimestamp) {\n    const spanId = handlerData.xhr.__sentry_xhr_span_id__;\n    if (!spanId) return;\n\n    const span = spans[spanId];\n    if (span) {\n      span.setHttpStatus(xhr.status_code);\n      span.finish();\n\n      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n      delete spans[spanId];\n    }\n    return;\n  }\n\n  // if not, create a new span to track it\n  const activeTransaction = getActiveTransaction();\n  if (activeTransaction) {\n    const span = activeTransaction.startChild({\n      data: {\n        ...xhr.data,\n        type: 'xhr',\n        method: xhr.method,\n        url: xhr.url,\n      },\n      description: `${xhr.method} ${xhr.url}`,\n      op: 'http.client',\n    });\n\n    handlerData.xhr.__sentry_xhr_span_id__ = span.spanId;\n    spans[handlerData.xhr.__sentry_xhr_span_id__] = span;\n\n    if (handlerData.xhr.setRequestHeader && shouldAttachHeaders(handlerData.xhr.__sentry_xhr__.url)) {\n      try {\n        handlerData.xhr.setRequestHeader('sentry-trace', span.toTraceparent());\n\n        const dynamicSamplingContext = activeTransaction.getDynamicSamplingContext();\n        const sentryBaggageHeader = dynamicSamplingContextToSentryBaggageHeader(dynamicSamplingContext);\n\n        if (sentryBaggageHeader) {\n          // From MDN: \"If this method is called several times with the same header, the values are merged into one single request header.\"\n          // We can therefore simply set a baggage header without checking what was there before\n          // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/setRequestHeader\n          handlerData.xhr.setRequestHeader(BAGGAGE_HEADER_NAME, sentryBaggageHeader);\n        }\n\n        activeTransaction.metadata.propagations++;\n      } catch (_) {\n        // Error: InvalidStateError: Failed to execute 'setRequestHeader' on 'XMLHttpRequest': The object's state must be OPENED.\n      }\n    }\n  }\n}\n\nexport { DEFAULT_TRACE_PROPAGATION_TARGETS, defaultRequestInstrumentationOptions, fetchCallback, instrumentOutgoingRequests, shouldAttachHeaders, xhrCallback };\n//# sourceMappingURL=request.js.map\n","import { logger, addInstrumentationHandler } from '@sentry/utils';\nimport { WINDOW } from './types.js';\n\n/**\n * Default function implementing pageload and navigation transactions\n */\nfunction instrumentRoutingWithDefaults(\n  customStartTransaction,\n  startTransactionOnPageLoad = true,\n  startTransactionOnLocationChange = true,\n) {\n  if (!WINDOW || !WINDOW.location) {\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn('Could not initialize routing instrumentation due to invalid location');\n    return;\n  }\n\n  let startingUrl = WINDOW.location.href;\n\n  let activeTransaction;\n  if (startTransactionOnPageLoad) {\n    activeTransaction = customStartTransaction({\n      name: WINDOW.location.pathname,\n      op: 'pageload',\n      metadata: { source: 'url' },\n    });\n  }\n\n  if (startTransactionOnLocationChange) {\n    addInstrumentationHandler('history', ({ to, from }) => {\n      /**\n       * This early return is there to account for some cases where a navigation transaction starts right after\n       * long-running pageload. We make sure that if `from` is undefined and a valid `startingURL` exists, we don't\n       * create an uneccessary navigation transaction.\n       *\n       * This was hard to duplicate, but this behavior stopped as soon as this fix was applied. This issue might also\n       * only be caused in certain development environments where the usage of a hot module reloader is causing\n       * errors.\n       */\n      if (from === undefined && startingUrl && startingUrl.indexOf(to) !== -1) {\n        startingUrl = undefined;\n        return;\n      }\n\n      if (from !== to) {\n        startingUrl = undefined;\n        if (activeTransaction) {\n          (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Finishing current transaction with op: ${activeTransaction.op}`);\n          // If there's an open transaction on the scope, we need to finish it before creating an new one.\n          activeTransaction.finish();\n        }\n        activeTransaction = customStartTransaction({\n          name: WINDOW.location.pathname,\n          op: 'navigation',\n          metadata: { source: 'url' },\n        });\n      }\n    });\n  }\n}\n\nexport { instrumentRoutingWithDefaults };\n//# sourceMappingURL=router.js.map\n","import { _nullishCoalesce, _optionalChain } from '@sentry/utils/esm/buildPolyfills';\nimport { logger, extractTraceparentData, baggageHeaderToDynamicSamplingContext, getDomElement } from '@sentry/utils';\nimport { startIdleTransaction } from '../hubextensions.js';\nimport { DEFAULT_IDLE_TIMEOUT, DEFAULT_FINAL_TIMEOUT, DEFAULT_HEARTBEAT_INTERVAL } from '../idletransaction.js';\nimport '../utils.js';\nimport { registerBackgroundTabDetection } from './backgroundtab.js';\nimport { startTrackingWebVitals, startTrackingLongTasks, addPerformanceEntries } from './metrics/index.js';\nimport { defaultRequestInstrumentationOptions, instrumentOutgoingRequests } from './request.js';\nimport { instrumentRoutingWithDefaults } from './router.js';\nimport { WINDOW } from './types.js';\n\nconst BROWSER_TRACING_INTEGRATION_ID = 'BrowserTracing';\n\n/** Options for Browser Tracing integration */\n\nconst DEFAULT_BROWSER_TRACING_OPTIONS = {\n  idleTimeout: DEFAULT_IDLE_TIMEOUT,\n  finalTimeout: DEFAULT_FINAL_TIMEOUT,\n  heartbeatInterval: DEFAULT_HEARTBEAT_INTERVAL,\n  markBackgroundTransactions: true,\n  routingInstrumentation: instrumentRoutingWithDefaults,\n  startTransactionOnLocationChange: true,\n  startTransactionOnPageLoad: true,\n  _experiments: { enableLongTask: true, enableInteractions: false },\n  ...defaultRequestInstrumentationOptions,\n};\n\n/**\n * The Browser Tracing integration automatically instruments browser pageload/navigation\n * actions as transactions, and captures requests, metrics and errors as spans.\n *\n * The integration can be configured with a variety of options, and can be extended to use\n * any routing library. This integration uses {@see IdleTransaction} to create transactions.\n */\nclass BrowserTracing  {\n  // This class currently doesn't have a static `id` field like the other integration classes, because it prevented\n  // @sentry/tracing from being treeshaken. Tree shakers do not like static fields, because they behave like side effects.\n  // TODO: Come up with a better plan, than using static fields on integration classes, and use that plan on all\n  // integrations.\n\n  /** Browser Tracing integration options */\n\n  /**\n   * @inheritDoc\n   */\n   __init() {this.name = BROWSER_TRACING_INTEGRATION_ID;}\n\n   constructor(_options) {;BrowserTracing.prototype.__init.call(this);\n    this.options = {\n      ...DEFAULT_BROWSER_TRACING_OPTIONS,\n      ..._options,\n    };\n\n    // TODO (v8): remove this block after tracingOrigins is removed\n    // Set tracePropagationTargets to tracingOrigins if specified by the user\n    // In case both are specified, tracePropagationTargets takes precedence\n    // eslint-disable-next-line deprecation/deprecation\n    if (_options && !_options.tracePropagationTargets && _options.tracingOrigins) {\n      // eslint-disable-next-line deprecation/deprecation\n      this.options.tracePropagationTargets = _options.tracingOrigins;\n    }\n\n    startTrackingWebVitals();\n    if (_optionalChain([this, 'access', _2 => _2.options, 'access', _3 => _3._experiments, 'optionalAccess', _4 => _4.enableLongTask])) {\n      startTrackingLongTasks();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n   setupOnce(_, getCurrentHub) {\n    this._getCurrentHub = getCurrentHub;\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const {\n      routingInstrumentation: instrumentRouting,\n      startTransactionOnLocationChange,\n      startTransactionOnPageLoad,\n      markBackgroundTransactions,\n      traceFetch,\n      traceXHR,\n      tracePropagationTargets,\n      shouldCreateSpanForRequest,\n      _experiments,\n    } = this.options;\n\n    instrumentRouting(\n      (context) => this._createRouteTransaction(context),\n      startTransactionOnPageLoad,\n      startTransactionOnLocationChange,\n    );\n\n    if (markBackgroundTransactions) {\n      registerBackgroundTabDetection();\n    }\n\n    if (_optionalChain([_experiments, 'optionalAccess', _5 => _5.enableInteractions])) {\n      this._registerInteractionListener();\n    }\n\n    instrumentOutgoingRequests({\n      traceFetch,\n      traceXHR,\n      tracePropagationTargets,\n      shouldCreateSpanForRequest,\n    });\n  }\n\n  /** Create routing idle transaction. */\n   _createRouteTransaction(context) {\n    if (!this._getCurrentHub) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.warn(`[Tracing] Did not create ${context.op} transaction because _getCurrentHub is invalid.`);\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { beforeNavigate, idleTimeout, finalTimeout, heartbeatInterval } = this.options;\n\n    const isPageloadTransaction = context.op === 'pageload';\n\n    const sentryTraceMetaTagValue = isPageloadTransaction ? getMetaContent('sentry-trace') : null;\n    const baggageMetaTagValue = isPageloadTransaction ? getMetaContent('baggage') : null;\n\n    const traceParentData = sentryTraceMetaTagValue ? extractTraceparentData(sentryTraceMetaTagValue) : undefined;\n    const dynamicSamplingContext = baggageMetaTagValue\n      ? baggageHeaderToDynamicSamplingContext(baggageMetaTagValue)\n      : undefined;\n\n    const expandedContext = {\n      ...context,\n      ...traceParentData,\n      metadata: {\n        ...context.metadata,\n        dynamicSamplingContext: traceParentData && !dynamicSamplingContext ? {} : dynamicSamplingContext,\n      },\n      trimEnd: true,\n    };\n\n    const modifiedContext = typeof beforeNavigate === 'function' ? beforeNavigate(expandedContext) : expandedContext;\n\n    // For backwards compatibility reasons, beforeNavigate can return undefined to \"drop\" the transaction (prevent it\n    // from being sent to Sentry).\n    const finalContext = modifiedContext === undefined ? { ...expandedContext, sampled: false } : modifiedContext;\n\n    // If `beforeNavigate` set a custom name, record that fact\n    finalContext.metadata =\n      finalContext.name !== expandedContext.name\n        ? { ...finalContext.metadata, source: 'custom' }\n        : finalContext.metadata;\n\n    this._latestRouteName = finalContext.name;\n    this._latestRouteSource = _optionalChain([finalContext, 'access', _6 => _6.metadata, 'optionalAccess', _7 => _7.source]);\n\n    if (finalContext.sampled === false) {\n      (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n        logger.log(`[Tracing] Will not send ${finalContext.op} transaction because of beforeNavigate.`);\n    }\n\n    (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.log(`[Tracing] Starting ${finalContext.op} transaction on scope`);\n\n    const hub = this._getCurrentHub();\n    const { location } = WINDOW;\n\n    const idleTransaction = startIdleTransaction(\n      hub,\n      finalContext,\n      idleTimeout,\n      finalTimeout,\n      true,\n      { location }, // for use in the tracesSampler\n      heartbeatInterval,\n    );\n    idleTransaction.registerBeforeFinishCallback(transaction => {\n      addPerformanceEntries(transaction);\n    });\n\n    return idleTransaction ;\n  }\n\n  /** Start listener for interaction transactions */\n   _registerInteractionListener() {\n    let inflightInteractionTransaction;\n    const registerInteractionTransaction = () => {\n      const { idleTimeout, finalTimeout, heartbeatInterval } = this.options;\n\n      const op = 'ui.action.click';\n      if (inflightInteractionTransaction) {\n        inflightInteractionTransaction.finish();\n        inflightInteractionTransaction = undefined;\n      }\n\n      if (!this._getCurrentHub) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) && logger.warn(`[Tracing] Did not create ${op} transaction because _getCurrentHub is invalid.`);\n        return undefined;\n      }\n\n      if (!this._latestRouteName) {\n        (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__) &&\n          logger.warn(`[Tracing] Did not create ${op} transaction because _latestRouteName is missing.`);\n        return undefined;\n      }\n\n      const hub = this._getCurrentHub();\n      const { location } = WINDOW;\n\n      const context = {\n        name: this._latestRouteName,\n        op,\n        trimEnd: true,\n        metadata: {\n          source: _nullishCoalesce(this._latestRouteSource, () => ( 'url')),\n        },\n      };\n\n      inflightInteractionTransaction = startIdleTransaction(\n        hub,\n        context,\n        idleTimeout,\n        finalTimeout,\n        true,\n        { location }, // for use in the tracesSampler\n        heartbeatInterval,\n      );\n    };\n\n    ['click'].forEach(type => {\n      addEventListener(type, registerInteractionTransaction, { once: false, capture: true });\n    });\n  }\n}\n\n/** Returns the value of a meta tag */\nfunction getMetaContent(metaName) {\n  // Can't specify generic to `getDomElement` because tracing can be used\n  // in a variety of environments, have to disable `no-unsafe-member-access`\n  // as a result.\n  const metaTag = getDomElement(`meta[name=${metaName}]`);\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return metaTag ? metaTag.getAttribute('content') : null;\n}\n\nexport { BROWSER_TRACING_INTEGRATION_ID, BrowserTracing, getMetaContent };\n//# sourceMappingURL=browsertracing.js.map\n","import { addExtensionMethods } from './hubextensions.js';\nexport { addExtensionMethods, startIdleTransaction } from './hubextensions.js';\nimport * as index from './integrations/index.js';\nexport { index as Integrations };\nimport './browser/index.js';\nexport { Span, spanStatusfromHttpCode } from './span.js';\nexport { SpanStatus } from './spanstatus.js';\nexport { Transaction } from './transaction.js';\nexport { IdleTransaction } from './idletransaction.js';\nexport { getActiveTransaction, hasTracingEnabled } from './utils.js';\nexport { BROWSER_TRACING_INTEGRATION_ID, BrowserTracing } from './browser/browsertracing.js';\nexport { defaultRequestInstrumentationOptions, instrumentOutgoingRequests } from './browser/request.js';\nexport { TRACEPARENT_REGEXP, extractTraceparentData, stripUrlQueryAndFragment } from '@sentry/utils';\n\n;\n;\n\n// Treeshakable guard to remove all code related to tracing\n\n// Guard for tree\nif (typeof __SENTRY_TRACING__ === 'undefined' || __SENTRY_TRACING__) {\n  // We are patching the global object with our hub extension methods\n  addExtensionMethods();\n}\n//# sourceMappingURL=index.js.map\n","import * as React from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport { find as lFind } from \"lodash\";\n\nimport { getRoutesGeojson, getStopsGeoJson } from \"../utils\";\nimport {\n  BUS_DATA,\n  MAP_STYLE_HIGHLIGHTED_ROUTE,\n  MAP_STYPE_ROUTE,\n  MAP_STYPE_STOP,\n  MAPBOX_TOKEN,\n  STOPS_DATA,\n} from \"../utils/constants\";\nimport { withTranslation, Trans } from \"react-i18next\";\n\nmapboxgl.accessToken = MAPBOX_TOKEN;\n\nclass Map extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lat: STOPS_DATA.majestic.loc[0],\n      lng: STOPS_DATA.majestic.loc[1],\n      zoom: 11,\n      supported: mapboxgl.supported(),\n    };\n    this.mapContainer = React.createRef();\n  }\n\n  initMap = () => {\n    const { lng, lat, zoom } = this.state;\n    const map = new mapboxgl.Map({\n      container: this.mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [lng, lat],\n      zoom: zoom,\n      minZoom: 10,\n      maxZoom: 18,\n    });\n    map.dragRotate.disable();\n    map.touchZoomRotate.disableRotation();\n\n    map.on(\"move\", () => {\n      this.setState({\n        lng: map.getCenter().lng.toFixed(4),\n        lat: map.getCenter().lat.toFixed(4),\n        zoom: map.getZoom().toFixed(2),\n      });\n    });\n    this.map = map;\n  };\n\n  componentDidMount() {\n    if (this.state.supported) {\n      this.initMap();\n      this.map?.on(\"load\", () => {\n        this.renderMapData();\n        this.addMapEvents();\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const { userLocation, inputLocation, selectedBus, selectedTab } =\n      this.props;\n    const {\n      userLocation: prevUserLocation,\n      selectedBus: prevSelectedBus,\n      selectedTab: prevSelectedTab,\n      inputLocation: prevInputLocation,\n    } = prevProps;\n\n    if (!this.state.supported) {\n      return;\n    }\n\n    if (prevSelectedTab !== selectedTab) {\n      this.callFnIfMapLoaded(this.refreshMapData);\n    }\n\n    if (!this.userLocationMarker) {\n      this.initLocationMarkers();\n    }\n\n    if (userLocation && !prevUserLocation) {\n      const el = document.createElement(\"div\");\n      el.className = \"location-indicator\";\n\n      this.userLocationMarker.setLngLat(userLocation);\n    }\n\n    if (inputLocation && !prevInputLocation) {\n      const el = document.createElement(\"div\");\n      el.className = \"input-location-indicator\";\n\n      this.inputLocationMarker.setLngLat(inputLocation);\n      this.callFnIfMapLoaded(this.centerMapOnInput);\n    }\n\n    if (selectedBus !== prevSelectedBus) {\n      this.callFnIfMapLoaded(() => {\n        this.map.setFilter(\"routes-highlighted\", [\n          \"==\",\n          \"name\",\n          selectedBus || \"\",\n        ]);\n\n        // this.map.setFilter(\"highlighted-bus\", [\"==\", \"name\", selectedBus || \"\"]);\n\n        if (selectedBus && this.map.getLayer(\"stops\")) {\n          const busesList = selectedTab === \"ta\" ? BUS_DATA.to : BUS_DATA.from;\n          const busDetails = lFind(busesList, { name: selectedBus });\n          this.map.setFilter(\"stops\", [\n            \"==\",\n            \"name\",\n            selectedTab === \"ta\" ? busDetails.start.name : busDetails.end.name,\n          ]);\n        } else {\n          this.map.setFilter(\"stops\", true);\n        }\n      });\n    }\n  }\n\n  centerMapOnInput = () => {\n    const { inputLocation } = this.props;\n    this.map.flyTo({\n      center: [inputLocation.lng, inputLocation.lat],\n      zoom: 12,\n      pitch: 0,\n      bearing: 0,\n      duration: 500,\n      essential: true,\n    });\n  };\n\n  callFnIfMapLoaded = (fn) => {\n    if (this.map._loaded) {\n      fn();\n    } else {\n      this.map.on(\"load\", fn);\n    }\n  };\n\n  componentWillUnmount() {\n    this.map?.remove();\n  }\n\n  renderMapData = () => {\n    const { busData, selectedBus, selectedTab, userLocation, inputLocation } =\n      this.props;\n\n    this.map.addSource(\"routes\", getRoutesGeojson(busData));\n    this.map.addLayer({\n      id: \"routes\",\n      source: \"routes\",\n      ...MAP_STYPE_ROUTE,\n    });\n\n    this.map.addLayer({\n      id: \"routes-highlighted\",\n      source: \"routes\",\n      ...MAP_STYLE_HIGHLIGHTED_ROUTE,\n      filter: [\"==\", \"name\", selectedBus || \"\"],\n    });\n\n    // this.map.loadImage(IconBus, (error, image) => {\n    //   if (error) throw error;\n    //   this.map.addImage(\"route-bus\", image);\n    //\n    //   this.map.addLayer({\n    //     id: \"highlighted-bus\",\n    //     type: \"symbol\",\n    //     source: \"routes\",\n    //     layout: {\n    //       \"symbol-placement\": \"line-center\",\n    //       \"icon-image\": \"route-bus\",\n    //       \"icon-rotation-alignment\": \"map\",\n    //       \"icon-keep-upright\": true,\n    //       \"text-keep-upright\": true,\n    //       // \"text-font\": [\"IBM Plex Sans\"],\n    //       \"text-field\": `{name}`,\n    //       \"text-size\": 32,\n    //     },\n    //     paint: {},\n    //     // filter: [\"==\", \"name\", selectedBus || \"\"],\n    //   });\n    // });\n\n    this.map.addSource(\"stops\", getStopsGeoJson(busData, selectedTab));\n\n    this.map.addLayer({\n      id: \"stops\",\n      source: \"stops\",\n      ...MAP_STYPE_STOP,\n      filter: true,\n    });\n\n    this.initLocationMarkers();\n\n    if (userLocation) {\n      this.userLocationMarker.setLngLat(userLocation);\n    }\n\n    if (inputLocation) {\n      this.inputLocationMarker.setLngLat(inputLocation);\n      this.centerMapOnInput();\n    }\n  };\n\n  initLocationMarkers = () => {\n    // Show user location on the map\n    const el = document.createElement(\"div\");\n    el.className = \"user-location-indicator\";\n    this.userLocationMarker = new mapboxgl.Marker(el)\n      .setLngLat({ lat: 0, lng: 0 })\n      .addTo(this.map);\n\n    // Show input location on the map\n    const el2 = document.createElement(\"div\");\n    el2.className = \"input-location-indicator\";\n    this.inputLocationMarker = new mapboxgl.Marker(el2)\n      .setLngLat({ lat: 0, lng: 0 })\n      .addTo(this.map);\n  };\n\n  addMapEvents = () => {\n    const popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false,\n    });\n\n    // Show bus stop name on hovering on the circle\n    this.map.on(\"mouseenter\", \"stops\", (e) => {\n      this.map.getCanvas().style.cursor = \"pointer\";\n\n      const coordinates = e.features[0].geometry.coordinates.slice();\n      const description = e.features[0].properties.name;\n\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n      }\n      popup.setLngLat(coordinates).setHTML(description).addTo(this.map);\n    });\n\n    this.map.on(\"mouseleave\", \"stops\", () => {\n      this.map.getCanvas().style.cursor = \"\";\n      popup.remove();\n    });\n\n    // Show route as blue on hover\n    this.map.on(\"mouseenter\", \"routes\", (e) => {\n      const { selectedBus } = this.props;\n      this.map.getCanvas().style.cursor = \"pointer\";\n\n      const feature = e.features[0];\n\n      const { name } = feature.properties;\n      this.map.setFilter(\"routes-highlighted\", [\n        \"==\",\n        \"name\",\n        name || selectedBus || \"\",\n      ]);\n    });\n\n    this.map.on(\"click\", \"routes\", (e) => {\n      const { setSelectedBus } = this.props;\n      const feature = e.features[0];\n\n      const { name } = feature.properties;\n      setSelectedBus(name);\n    });\n\n    this.map.on(\"mouseleave\", \"routes\", () => {\n      const { selectedBus } = this.props;\n      this.map.getCanvas().style.cursor = \"\";\n      this.map.setFilter(\"routes-highlighted\", [\n        \"==\",\n        \"name\",\n        selectedBus || \"\",\n      ]);\n    });\n  };\n\n  refreshMapData = () => {\n    const { busData, selectedTab } = this.props;\n\n    const routeSource = this.map.getSource(\"routes\");\n    const stopsSource = this.map.getSource(\"stops\");\n    routeSource.setData(getRoutesGeojson(busData).data);\n    stopsSource.setData(getStopsGeoJson(busData, selectedTab).data);\n  };\n\n  render() {\n    const { t } = this.props;\n    const { supported } = this.state;\n    if (!supported) {\n      return (\n        <div className=\"center padding\" id=\"error-page\">\n          <Trans t={t} i18nKey=\"deviceMapSupport\" />\n          <br />\n          <Trans t={t} i18nKey=\"ensureUpToDate\" />\n        </div>\n      );\n    }\n    return <div id=\"map\" ref={this.mapContainer} className=\"map-container\" />;\n  }\n}\n\nexport default withTranslation()(Map);\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","export default \"__VITE_ASSET__bf86dcea__\"","export default \"__VITE_ASSET__62de2272__\"","import React from \"react\";\n\nconst IconBus = ({ selected }) => (\n  <svg width=\"10\" height=\"12\" viewBox=\"0 0 10 12\" className=\"route-item-icon\">\n    <path\n      fill={selected ? \"#ffffff\" : \"#000000\"}\n      d=\"M72.75,32h-7.5A1.268,1.268,0,0,0,64,33.286v8.571a1.3,1.3,0,0,0,.417.957V43.3a.687.687,0,0,0,.677.7h.729a.687.687,0,0,0,.677-.7v-.161h5V43.3a.687.687,0,0,0,.677.7h.729a.687.687,0,0,0,.677-.7v-.489A1.3,1.3,0,0,0,74,41.857V33.286A1.268,1.268,0,0,0,72.75,32Zm-6.576,9.852a.829.829,0,0,1-.842-.482.875.875,0,0,1,.162-.977.816.816,0,0,1,.949-.167.862.862,0,0,1,.468.866A.846.846,0,0,1,66.174,41.852Zm2.305-3H65.25a.423.423,0,0,1-.417-.429V35a.423.423,0,0,1,.417-.429h3.229a.106.106,0,0,1,.1.107V38.75A.106.106,0,0,1,68.479,38.857ZM69,33.714H65.262a.43.43,0,0,1-.428-.407.436.436,0,0,1,.114-.317.411.411,0,0,1,.3-.133h7.488a.43.43,0,0,1,.428.407.436.436,0,0,1-.114.317.411.411,0,0,1-.3.133Zm.521.857H72.75a.423.423,0,0,1,.417.429v3.429a.423.423,0,0,1-.417.429H69.521a.106.106,0,0,1-.1-.107V34.679A.106.106,0,0,1,69.521,34.571Zm1.567,6.522a.862.862,0,0,1,.468-.866.816.816,0,0,1,.949.167.875.875,0,0,1,.162.977.829.829,0,0,1-.842.482A.846.846,0,0,1,71.088,41.093Z\"\n      transform=\"translate(-64 -32)\"\n    />\n  </svg>\n);\n\nexport default IconBus;\n","export default \"__VITE_ASSET__387f1079__\"","import React from \"react\";\n\nconst timeTextDisplay = (number) => (number < 10 ? `0${number}` : number);\n\nconst BusItemTime = ({ msm, currentTime }) => {\n  const hours = Math.floor(msm / 60);\n  const minutes = msm - hours * 60;\n  return (\n    <div className={`route-item-time ${msm < currentTime ? \"disabled\" : \"\"}`}>\n      {timeTextDisplay(hours)}:{timeTextDisplay(minutes)}\n    </div>\n  );\n};\n\nexport default BusItemTime;\n","import React from \"react\";\nimport IconBus from \"../assets/icon-bus\";\nimport IconOpenLink from \"../assets/icon-open-link.svg\";\nimport { STOPS_DATA } from \"../utils/constants\";\nimport BusItemTime from \"./bus-item-time\";\nimport { withTranslation, Trans } from \"react-i18next\";\n\nconst BusItem = ({\n  busDetails,\n  selectedBus,\n  setSelectedBus,\n  toAirport,\n  currentTime,\n  t,\n}) => {\n  const { name, start, end, timings } = busDetails;\n  const busSelected = name === selectedBus;\n\n  const locationDetails = toAirport ? start : end;\n  return (\n    <div className={`route-item bus-${name} ${busSelected ? \"selected\" : \"\"}`}>\n      <div\n        className=\"route-item-header\"\n        onClick={() => setSelectedBus(busSelected ? null : name)}\n      >\n        <IconBus selected={busSelected} />\n        <div className=\"route-item-bus-name\">{name}</div>\n        <div className=\"route-item-bus-route\">\n          <span className=\"text-light\">\n            <Trans t={t} i18nKey=\"from\" />\n          </span>{\" \"}\n          <Trans\n            t={t}\n            i18nKey={toAirport ? start.name : STOPS_DATA.airport.name}\n          />\n          <br />\n          <span className=\"text-light\">\n            <Trans t={t} i18nKey=\"to\" />\n          </span>{\" \"}\n          <Trans\n            t={t}\n            i18nKey={toAirport ? STOPS_DATA.airport.name : end.name}\n          />\n        </div>\n      </div>\n      <div className=\"route-item-details\">\n        <h3 className=\"mb-2\">\n          <Trans t={t} i18nKey=\"Departure times\" />\n        </h3>\n        <div className=\"flex\">\n          {timings.map((time) => (\n            <BusItemTime msm={time} currentTime={currentTime} key={time} />\n          ))}\n        </div>\n        <h3>\n          <Trans t={t} i18nKey={toAirport ? \"Boarding point\" : \"Final stop\"} />\n        </h3>\n        <a\n          className=\"route-item-location\"\n          href={`https://www.google.com/maps/search/?api=1&query=${locationDetails.loc[0]},${locationDetails.loc[1]}`}\n          target=\"_blank\"\n        >\n          <Trans t={t} i18nKey={locationDetails.name} />\n          <img src={IconOpenLink} alt=\"Open\" />\n        </a>\n        {locationDetails.contact && (\n          <>\n            <h3>\n              <Trans t={t} i18nKey=\"Contact\" />\n            </h3>\n            <a className=\"link\" href={`tel:${locationDetails.contact}`}>\n              {locationDetails.contact}\n            </a>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default withTranslation()(BusItem);\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport _ from \"lodash\";\n\nimport IconTabArrow from \"../assets/icon-tab-arrow.svg\";\nimport IconCall from \"../assets/icon-call.svg\";\nimport { HELPLINE_NUMBER, LANGUAGES, TABS } from \"../utils/constants\";\nimport { getCurrentMsm } from \"../utils\";\nimport BusItem from \"./bus-item\";\nimport { Trans, withTranslation } from \"react-i18next\";\n\nconst COLLAPSED_HEIGHT = 55;\nconst FOOTER_HEIGHT = 90;\nconst MIDWAY_HEIGHT = 200;\n\nconst getCoordinatesFromEvent = (e) => {\n  let [x, y] = [0, 0];\n  if (e.clientX) {\n    x = e.clientX;\n    y = e.clientY;\n  } else if (e.touches) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  }\n  return [x, y];\n};\n\nclass Sidebar extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      x: null,\n      y: null,\n      move: 0,\n      currentTime: getCurrentMsm(),\n      resized: 0,\n      bodyHeight: null,\n    };\n    this.mouseTime = 0;\n    this.secondInterval = null;\n  }\n\n  componentDidMount() {\n    this.secondInterval = setInterval(() => {\n      this.setState({\n        currentTime: getCurrentMsm(),\n      });\n    }, 10000);\n    window.addEventListener(\"mousemove\", this.onPointerMove, { passive: true });\n    window.addEventListener(\"touchmove\", this.onPointerMove, { passive: true });\n    window.addEventListener(\"mouseup\", this.onPointerUp, { passive: true });\n    window.addEventListener(\"touchend\", this.onPointerUp, { passive: true });\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.secondInterval);\n    window.removeEventListener(\"mousemove\", this.onPointerMove, {\n      passive: true,\n    });\n    window.removeEventListener(\"touchmove\", this.onPointerMove, {\n      passive: true,\n    });\n    window.removeEventListener(\"mouseup\", this.onPointerUp, { passive: true });\n    window.removeEventListener(\"touchend\", this.onPointerUp, { passive: true });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const { selectedBus, bodyHeight: newBodyHeight } = this.props;\n    const { selectedBus: prevSelectedBus, bodyHeight } = prevProps;\n    const { move } = this.state;\n\n    // Handle resize for bottom tray sizing\n    const delta = bodyHeight ? newBodyHeight - bodyHeight : 0;\n    this.setState({\n      move: move < -(MIDWAY_HEIGHT + 200) ? move - delta : move,\n    });\n\n    // Handle change in selected buses to show and hide tray\n    if (selectedBus && selectedBus !== prevSelectedBus) {\n      const sidebarItem = document.querySelector(`.bus-${selectedBus}`);\n      const bounds = sidebarItem.getBoundingClientRect();\n      if (\n        bounds.top >= window.innerHeight + move &&\n        bounds.top <= window.innerHeight - 100\n      ) {\n        // Already in the sidebar view\n        // We don't scroll it if it's already in view since it might cause unintentional shift in layout\n      } else {\n        sidebarItem.scrollIntoView({\n          behavior: \"smooth\",\n        });\n      }\n    }\n    if (selectedBus !== prevSelectedBus && move !== -MIDWAY_HEIGHT) {\n      this.setState({\n        move: -MIDWAY_HEIGHT,\n      });\n    }\n  }\n\n  onPointerDown = (e) => {\n    if (window.innerWidth > 999) {\n      return;\n    }\n    const [x, y] = getCoordinatesFromEvent(e);\n    this.mouseTime = performance.now();\n    this.setState({ x, y });\n  };\n\n  onPointerMove = (e) => {\n    e.stopPropagation();\n    if (this.state.x === null) {\n      return;\n    }\n    const [x, y] = getCoordinatesFromEvent(e);\n    this.setState(({ move }) => ({\n      move: Math.max(\n        move + y - this.state.y,\n        -window.innerHeight + COLLAPSED_HEIGHT,\n      ),\n      y,\n    }));\n  };\n\n  onPointerUp = () => {\n    if (this.state.x === null) {\n      return;\n    }\n    this.setState({\n      x: null,\n      y: null,\n    });\n    const timeDiff = performance.now() - this.mouseTime;\n    if (timeDiff < 150 && this.state.move === 0) {\n      // Short tap on the tray when it's closed\n      this.setState({\n        move: -MIDWAY_HEIGHT,\n      });\n      return;\n    }\n    if (this.state.move < -MIDWAY_HEIGHT - 100) {\n      // Touch moved up by a significant value above the midway height\n      this.setState({\n        move: -window.innerHeight + COLLAPSED_HEIGHT,\n      });\n    } else if (this.state.move < -(MIDWAY_HEIGHT * 0.5)) {\n      // Touch moved up by a significant value\n      this.setState({\n        move: -MIDWAY_HEIGHT,\n      });\n    } else {\n      // Touch moved up but not significant\n      this.setState({\n        move: 0,\n      });\n    }\n  };\n  render() {\n    const {\n      bodyHeight,\n      selectedTab,\n      setSelectedTab,\n      sortedTabData,\n      selectedBus,\n      setSelectedBus,\n      suggestedBus,\n      suggestedBusDetails,\n      t,\n    } = this.props;\n    const { currentTime, move } = this.state;\n    return (\n      <div\n        id=\"sidebar\"\n        style={{\n          top: `${bodyHeight - COLLAPSED_HEIGHT + move}px`,\n          height: `${\n            move < -(MIDWAY_HEIGHT + 200)\n              ? -move + COLLAPSED_HEIGHT\n              : -move + COLLAPSED_HEIGHT + FOOTER_HEIGHT\n          }px`,\n        }}\n        className={classNames({\n          \"sharp-corners\": move < -MIDWAY_HEIGHT,\n        })}\n      >\n        <div id=\"sidebar-drag-indicator\" />\n        <div\n          id=\"sidebar-header\"\n          className=\"padding\"\n          onMouseDown={this.onPointerDown}\n          onTouchStart={this.onPointerDown}\n        >\n          <div id=\"logo-banner\">\n            <Trans t={t} i18nKey=\"BENGALURU AIRPORT BUS\" />\n            <div\n              id=\"tab-selection\"\n              onMouseDown={(e) => {\n                e.stopPropagation();\n              }}\n              onClick={(e) => {\n                e.stopPropagation();\n                setSelectedTab(selectedTab === \"ta\" ? \"fa\" : \"ta\");\n              }}\n            >\n              <img\n                src={IconTabArrow}\n                id=\"tab-arrow\"\n                className={selectedTab}\n                alt=\"\"\n              />\n              <Trans t={t} i18nKey={_.find(TABS, { id: selectedTab }).text} />\n            </div>\n          </div>\n        </div>\n        <div id=\"sidebar-content\" className=\"padding\">\n          {suggestedBus && (\n            <>\n              <h4 className=\"mb-4\">\n                <Trans t={t} i18nKey=\"Suggested bus\" />\n              </h4>\n              <BusItem\n                busDetails={suggestedBusDetails}\n                selectedBus={selectedBus}\n                setSelectedBus={setSelectedBus}\n                toAirport={selectedTab === \"ta\"}\n                currentTime={currentTime}\n              />\n            </>\n          )}\n          <h4 className=\"mb-4\">\n            <Trans\n              t={t}\n              i18nKey={suggestedBus ? \"Other Buses\" : \"Routes and Schedules\"}\n            />\n          </h4>\n          {sortedTabData.map((bus) =>\n            bus.name === suggestedBus ? null : (\n              <BusItem\n                key={bus.name}\n                busDetails={bus}\n                selectedBus={selectedBus}\n                setSelectedBus={setSelectedBus}\n                toAirport={selectedTab === \"ta\"}\n                currentTime={currentTime}\n              />\n            ),\n          )}\n        </div>\n        <div className=\"padding text\">\n          <h4 className=\"mb-2\">\n            <Trans t={t} i18nKey=\"BMTC Vayu Vajra Helpline\" />\n          </h4>\n          <a href={`tel:${HELPLINE_NUMBER}`} id=\"sidebar-tel\">\n            <img src={IconCall} alt=\"\" />\n            {HELPLINE_NUMBER}\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withTranslation()(Sidebar);\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { APP_SCREENS } from \"../utils/constants\";\nimport { withTranslation } from \"react-i18next\";\n\nconst MapLocationInput = ({\n  inputLocation,\n  setCurrentScreen,\n  inputLocationMetadata,\n  t,\n}) => (\n  <div id=\"li-wrapper\">\n    <input\n      id=\"li-input\"\n      className={classNames({\n        empty: !inputLocation,\n      })}\n      placeholder={\n        inputLocation\n          ? inputLocationMetadata.name ||\n            `${inputLocation.lat}, ${inputLocation.lng}`\n          : t(\"Select a starting point\")\n      }\n      onClick={() => setCurrentScreen(APP_SCREENS.LOCATION_TEXT)}\n    />\n  </div>\n);\n\nexport default withTranslation()(MapLocationInput);\n","import * as React from \"react\";\nimport Map from \"../components/map\";\nimport _ from \"lodash\";\nimport { useEffect, useState } from \"react\";\n\nimport { BUS_DATA } from \"../utils/constants\";\nimport Sidebar from \"../components/sidebar\";\nimport MapLocationInput from \"../components/map-location-input\";\nimport { getSuggestedBus } from \"../utils\";\nimport SideMenu from \"../components/side-menu\";\n\nconst InitialScreen = ({\n  selectedTab,\n  setSelectedTab,\n  userLocation,\n  inputLocation,\n  setCurrentScreen,\n  inputLocationMetadata,\n  setLang,\n  bodyHeight,\n}) => {\n  const [selectedBus, setSelectedBus] = useState(null);\n  const selectedTabData = selectedTab === \"ta\" ? BUS_DATA.to : BUS_DATA.from;\n\n  const suggestedBus = getSuggestedBus(selectedTabData, inputLocation);\n  const suggestedBusDetails = _.find(selectedTabData, { name: suggestedBus });\n\n  useEffect(() => {\n    if (suggestedBus) {\n      setSelectedBus(suggestedBus);\n    }\n  }, [suggestedBus, inputLocation]);\n\n  return (\n    <>\n      <Sidebar\n        suggestedBusDetails={suggestedBusDetails}\n        selectedTab={selectedTab}\n        setSelectedTab={setSelectedTab}\n        selectedBus={selectedBus}\n        setSelectedBus={setSelectedBus}\n        suggestedBus={suggestedBus}\n        sortedTabData={selectedTabData}\n        bodyHeight={bodyHeight}\n      />\n      <Map\n        inputLocation={inputLocation}\n        busData={selectedTabData}\n        userLocation={userLocation}\n        selectedBus={selectedBus}\n        setSelectedBus={setSelectedBus}\n        selectedTab={selectedTab}\n      />\n      <MapLocationInput\n        setCurrentScreen={setCurrentScreen}\n        inputLocation={inputLocation}\n        inputLocationMetadata={inputLocationMetadata}\n      />\n      <SideMenu setLang={setLang} />\n    </>\n  );\n};\n\nexport default InitialScreen;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GOOGLE_MAP_SCRIPT_BASE_URL = void 0;\nvar GOOGLE_MAP_SCRIPT_BASE_URL = \"https://maps.googleapis.com/maps/api/js\";\nexports.GOOGLE_MAP_SCRIPT_BASE_URL = GOOGLE_MAP_SCRIPT_BASE_URL;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = usePlacesAutocompleteService;\n\nvar _react = require(\"react\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash.debounce\"));\n\nvar _utils = require(\"./utils\");\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction usePlacesAutocompleteService(_ref) {\n  var apiKey = _ref.apiKey,\n      _ref$libraries = _ref.libraries,\n      libraries = _ref$libraries === void 0 ? \"places\" : _ref$libraries,\n      _ref$googleMapsScript = _ref.googleMapsScriptBaseUrl,\n      googleMapsScriptBaseUrl = _ref$googleMapsScript === void 0 ? _constants.GOOGLE_MAP_SCRIPT_BASE_URL : _ref$googleMapsScript,\n      _ref$debounce = _ref.debounce,\n      debounce = _ref$debounce === void 0 ? 300 : _ref$debounce,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options,\n      sessionToken = _ref.sessionToken,\n      language = _ref.language;\n  var languageQueryParam = language ? \"&language=\".concat(language) : \"\";\n  var googleMapsScriptUrl = \"\".concat(googleMapsScriptBaseUrl, \"?key=\").concat(apiKey, \"&libraries=\").concat(libraries).concat(languageQueryParam);\n\n  var _useState = (0, _react.useState)([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      placePredictions = _useState2[0],\n      setPlacePredictions = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isPlacePredsLoading = _useState4[0],\n      setIsPlacePredsLoading = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      placeInputValue = _useState6[0],\n      setPlaceInputValue = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isQueryPredsLoading = _useState8[0],\n      setIsQueryPredsLoading = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      queryInputValue = _useState10[0],\n      setQueryInputValue = _useState10[1];\n\n  var _useState11 = (0, _react.useState)([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      queryPredictions = _useState12[0],\n      setQueryPredictions = _useState12[1];\n\n  var placesAutocompleteService = (0, _react.useRef)(null);\n  var placesService = (0, _react.useRef)(null);\n  var autocompleteSession = (0, _react.useRef)(null);\n  var handleLoadScript = (0, _react.useCallback)(function () {\n    return (0, _utils.loadGoogleMapScript)(googleMapsScriptBaseUrl, googleMapsScriptUrl);\n  }, [googleMapsScriptBaseUrl, googleMapsScriptUrl]);\n  var debouncedPlacePredictions = (0, _react.useCallback)((0, _lodash.default)(function (optionsArg) {\n    if (placesAutocompleteService.current && optionsArg.input) placesAutocompleteService.current.getPlacePredictions(_objectSpread(_objectSpread(_objectSpread({}, sessionToken && autocompleteSession.current ? {\n      sessionToken: autocompleteSession.current\n    } : {}), options), optionsArg), function (r) {\n      setIsPlacePredsLoading(false);\n      setPlacePredictions(r || []);\n    });\n  }, debounce), [debounce]);\n  var debouncedQueryPredictions = (0, _react.useCallback)((0, _lodash.default)(function (optionsArg) {\n    if (placesAutocompleteService.current && optionsArg.input) placesAutocompleteService.current.getQueryPredictions(_objectSpread(_objectSpread(_objectSpread({}, sessionToken && autocompleteSession.current ? {\n      sessionToken: autocompleteSession.current\n    } : {}), options), optionsArg), function (r) {\n      setIsQueryPredsLoading(false);\n      setQueryPredictions(r || []);\n    });\n  }, debounce), [debounce]);\n  (0, _react.useEffect)(function () {\n    if (!_utils.isBrowser) return;\n\n    var buildService = function buildService() {\n      // eslint-disable-next-line no-undef\n      if (!google) return console.error(\"Google has not been found. Make sure your provide apiKey prop.\"); // eslint-disable-next-line no-undef\n\n      placesAutocompleteService.current = new google.maps.places.AutocompleteService(); // eslint-disable-next-line no-undef\n\n      placesService.current = new google.maps.places.PlacesService(document.createElement(\"div\"));\n      if (sessionToken) autocompleteSession.current = new google.maps.places.AutocompleteSessionToken();\n    };\n\n    if (apiKey) {\n      handleLoadScript().then(function () {\n        return buildService();\n      });\n    } else {\n      buildService();\n    }\n  }, []);\n  return {\n    placesService: placesService.current,\n    autocompleteSessionToken: autocompleteSession.current,\n    placesAutocompleteService: placesAutocompleteService.current,\n    placePredictions: placeInputValue ? placePredictions : [],\n    isPlacePredictionsLoading: isPlacePredsLoading,\n    getPlacePredictions: function getPlacePredictions(opt) {\n      if (opt.input) {\n        setPlaceInputValue(opt.input);\n        setIsPlacePredsLoading(true);\n        debouncedPlacePredictions(opt);\n        return;\n      }\n\n      setPlacePredictions([]);\n      setPlaceInputValue(null);\n      debouncedPlacePredictions(opt);\n      setIsPlacePredsLoading(false);\n    },\n    queryPredictions: queryInputValue ? queryPredictions : [],\n    isQueryPredictionsLoading: isQueryPredsLoading,\n    getQueryPredictions: function getQueryPredictions(opt) {\n      if (opt.input) {\n        setQueryInputValue(opt.input);\n        setIsQueryPredsLoading(true);\n        debouncedQueryPredictions(opt);\n        return;\n      }\n\n      setQueryPredictions([]);\n      setQueryInputValue(null);\n      debouncedQueryPredictions(opt);\n      setIsQueryPredsLoading(false);\n    },\n    refreshSessionToken: function refreshSessionToken() {\n      autocompleteSession.current = new google.maps.places.AutocompleteSessionToken();\n    }\n  };\n}","export default \"__VITE_ASSET__45521716__\"","export default \"__VITE_ASSET__1d92296a__\"","export default \"__VITE_ASSET__db6d1f1b__\"","export default \"__VITE_ASSET__a33a47a2__\"","import React, { useEffect, useState } from \"react\";\nimport usePlacesService from \"react-google-autocomplete/lib/usePlacesAutocompleteService\";\nimport { Trans, withTranslation } from \"react-i18next\";\nimport {\n  reverse as lReverse,\n  sortBy as lSortBy,\n  takeRight as lTakeRight,\n} from \"lodash\";\n\nimport IconBack from \"../assets/icon-back.svg\";\nimport IconCross from \"../assets/icon-cross.svg\";\nimport IconGreyPin from \"../assets/icon-grey-pin.svg\";\nimport LogoGoogle from \"../assets/logo-google.svg\";\n\nimport { APP_SCREENS, GOOGLE_API_KEY, STOPS_DATA } from \"../utils/constants\";\nimport { saveLocationMetadata } from \"../utils\";\n\nconst RECENT_LOCATION_COUNT = 5;\n\nconst SearchText = ({\n  selectedTab,\n  setCurrentScreen,\n  setInputLocation,\n  t,\n  bodyHeight,\n}) => {\n  const [input, setInput] = useState(\"\");\n  const [recentLocations, setRecentLocations] = useState([]);\n\n  const {\n    placesService,\n    placePredictions,\n    getPlacePredictions,\n    isPlacePredictionsLoading,\n  } = usePlacesService({\n    apiKey: GOOGLE_API_KEY,\n    debounce: 1000,\n    options: {\n      location: new window.google.maps.LatLng(...STOPS_DATA.majestic.loc),\n      radius: 60000,\n      componentRestrictions: {\n        country: \"in\",\n      },\n    },\n    language: \"&callback=dummyFunction\", // Ugly hack. Library doesn't handle a callback param directly\n  });\n\n  useEffect(() => {\n    const locations = lTakeRight(\n      lSortBy(\n        JSON.parse(localStorage.getItem(\"locations\") || \"[]\"),\n        (l) => l.time || 0,\n      ),\n      RECENT_LOCATION_COUNT,\n    );\n    lReverse(locations); // Reverse mutates the array\n    setRecentLocations(locations);\n  }, []);\n\n  useEffect(() => {\n    // TODO: Memoize for input text. Reduced network requests on input change\n    //  even for accidental typing and slow type that doesn't take advantage of\n    //  debounce functionality\n    getPlacePredictions({ input });\n  }, [input]);\n\n  const onPlaceSelect = (placeId) => {\n    placesService?.getDetails(\n      {\n        placeId,\n      },\n      (placeDetails) => {\n        const {\n          geometry: {\n            location: { lat, lng },\n          },\n          name,\n          place_id: placeId,\n        } = placeDetails;\n        saveLocationMetadata(placeId, name, [lat(), lng()]);\n        setInputLocation({\n          lat: lat(),\n          lng: lng(),\n        });\n        setCurrentScreen(APP_SCREENS.LOCATION_MAP);\n      },\n    );\n  };\n\n  return (\n    <div id=\"search-page\" style={{ height: `${bodyHeight}px` }}>\n      <div id=\"search-heading\">\n        <button\n          id=\"search-back\"\n          onClick={() => setCurrentScreen(APP_SCREENS.INITIAL)}\n        >\n          <img src={IconBack} alt=\"Back\" />\n        </button>\n        <h3 id=\"search-heading-text\">\n          <Trans\n            t={t}\n            i18nKey={\n              selectedTab === \"ta\"\n                ? \"Enter starting point\"\n                : \"Enter destination\"\n            }\n          />\n        </h3>\n      </div>\n      <div id=\"search-input-wrapper\">\n        <input\n          id=\"search-input\"\n          placeholder={`${t(\"Search\")}...`}\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          autoFocus\n        />\n        {input.length > 0 && (\n          <button id=\"search-clear\" onClick={() => setInput(\"\")}>\n            <img src={IconCross} alt=\"Cancel\" />\n          </button>\n        )}\n      </div>\n      <div id=\"search-results\">\n        {!input && recentLocations.length > 0 && (\n          <div>\n            <h4 className=\"mb-2 plr mt-2\">\n              <Trans t={t} i18nKey=\"Recent locations\" />\n            </h4>\n            {recentLocations.map((r) => (\n              <div\n                key={r.placeId}\n                className=\"search-result-item\"\n                onClick={() => {\n                  setInputLocation({\n                    lat: r.location[0],\n                    lng: r.location[1],\n                  });\n                  setCurrentScreen(APP_SCREENS.INITIAL);\n                }}\n              >\n                <p className=\"search-result-main-text\">{r.name}</p>\n              </div>\n            ))}\n          </div>\n        )}\n        {isPlacePredictionsLoading && (\n          <div id=\"search-loading\">\n            <div className=\"spin\" />\n            <Trans t={t} i18nKey=\"Loading\" />\n            ...\n          </div>\n        )}\n        {!isPlacePredictionsLoading &&\n          placePredictions.map((item) => (\n            <div\n              className=\"search-result-item\"\n              key={item.place_id}\n              onClick={() => onPlaceSelect(item.place_id)}\n            >\n              <p className=\"search-result-main-text\">\n                {item.structured_formatting.main_text}\n              </p>\n              <p className=\"search-result-secondary-text\">\n                {item.structured_formatting.secondary_text}\n              </p>\n            </div>\n          ))}\n        {!isPlacePredictionsLoading && input && placePredictions.length < 1 && (\n          <div>\n            <Trans t={t} i18nKey=\"No results found\" />\n          </div>\n        )}\n      </div>\n\n      <div id=\"search-powered-by\">\n        Powered by&nbsp;\n        <img src={LogoGoogle} alt=\"Google\" />\n      </div>\n      <div id=\"search-footer\">\n        <button\n          className=\"search-footer-item\"\n          onClick={() => setCurrentScreen(APP_SCREENS.LOCATION_MAP)}\n        >\n          <img src={IconGreyPin} alt=\"\" />\n          <Trans t={t} i18nKey=\"Locate on map\" />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default withTranslation()(SearchText);\n","export default \"__VITE_ASSET__d8fd9f00__\"","import React, { useEffect, useRef, useState } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\n\nimport { APP_SCREENS, STOPS_DATA } from \"../utils/constants\";\n\nimport IconMarker from \"../assets/icon-marker.svg\";\nimport IconBack from \"../assets/icon-back.svg\";\nimport { Trans, withTranslation } from \"react-i18next\";\n\nconst SearchMap = ({\n  selectedTab,\n  inputLocation,\n  setCurrentScreen,\n  setInputLocation,\n  t,\n  bodyHeight,\n}) => {\n  const mapContainer = useRef(null);\n  const map = useRef(null);\n  const [zoom, setZoom] = useState(16);\n\n  // Location currently at the center of the map\n  const [tempLocation, setTempLocation] = useState(\n    inputLocation || {\n      lat: STOPS_DATA.majestic.loc[0],\n      lng: STOPS_DATA.majestic.loc[1],\n    },\n  );\n\n  useEffect(() => {\n    if (map.current) return; // initialize map only once\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v12\",\n      center: [tempLocation.lng, tempLocation.lat],\n      zoom: zoom,\n    });\n  });\n\n  const onConfirm = () => {\n    const { lat, lng } = map.current.getCenter();\n    setInputLocation({ lat, lng });\n    setCurrentScreen(APP_SCREENS.INITIAL);\n  };\n\n  return (\n    <div id=\"search-page\" style={{ height: `${bodyHeight}px` }}>\n      <div id=\"search-heading\">\n        <button\n          id=\"search-back\"\n          onClick={() => setCurrentScreen(APP_SCREENS.LOCATION_TEXT)}\n        >\n          <img src={IconBack} alt=\"Back\" />\n        </button>\n        <h3 id=\"search-heading-text\">\n          <Trans\n            t={t}\n            i18nKey={\n              selectedTab === \"ta\"\n                ? \"Adjust start location\"\n                : \"Adjust destination location\"\n            }\n          />\n        </h3>\n      </div>\n      <div id=\"search-map\" ref={mapContainer}>\n        <div id=\"search-marker\">\n          <img src={IconMarker} alt=\"\" />\n        </div>\n      </div>\n      <button id=\"search-confirm-button\" onClick={onConfirm}>\n        <Trans t={t} i18nKey=\"Confirm\" />\n      </button>\n    </div>\n  );\n};\n\nexport default withTranslation()(SearchMap);\n","export default \"__VITE_ASSET__c197964d__\"","import React from \"react\";\nimport IllustrationError from \"../assets/illustration-error.svg\";\n\nconst PageCrashError = () => {\n  return (\n    <div className=\"center padding\" id=\"error-page\">\n      <img src={IllustrationError} alt=\"\" />\n      <p>\n        We've been notified of the bug.\n        <br />\n        Please give us sometime and we'll fix the issue\n      </p>\n      <button className=\"btn primary\" onClick={() => window.location.reload()}>\n        Reload page\n      </button>\n    </div>\n  );\n};\n\nexport default PageCrashError;\n","import * as React from \"react\";\nimport { sortBy as lSortBy, map as lMap } from \"lodash\";\nimport { createRoot } from \"react-dom/client\";\nimport { useEffect, useState } from \"react\";\nimport getDistance from \"geolib/es/getDistance\";\nimport { loadGoogleMapScript } from \"react-google-autocomplete/lib/utils\";\nimport i18n from \"i18next\";\nimport * as Sentry from \"@sentry/react\";\nimport { BrowserTracing } from \"@sentry/tracing\";\n\nimport InitialScreen from \"./pages/initial\";\nimport {\n  APP_SCREENS,\n  GOOGLE_API_KEY,\n  LANGUAGES,\n  LOCATION_STATES,\n  SENTRY_DSN,\n  STOPS_DATA,\n  TABS,\n} from \"./utils/constants\";\nimport SearchText from \"./pages/search_text\";\nimport SearchMap from \"./pages/search_map\";\nimport { saveLocationMetadata } from \"./utils\";\nimport \"./utils/i18n\";\nimport usePlacesService from \"react-google-autocomplete/lib/usePlacesAutocompleteService\";\nimport PageCrashError from \"./components/page-crash-error\";\n\nif (SENTRY_DSN) {\n  Sentry.init({\n    dsn: SENTRY_DSN,\n    integrations: [new BrowserTracing()],\n    tracesSampleRate: 0.5,\n  });\n}\n\nconst Container = () => {\n  const [currentScreen, setCurrentScreen] = useState(APP_SCREENS.INITIAL);\n  const [bodyHeight, setBodyHeight] = useState(null);\n  const [selectedTab, setSelectedTab] = useState(TABS[0].id);\n  const [inputLocation, setInputLocation] = useState(null);\n  const [lang, setLang] = useState(\n    localStorage.getItem(\"lang\") || LANGUAGES[0].code,\n  );\n  const [inputLocationMetadata, setInputLocationMetadata] = useState({\n    name: \"\",\n    placeId: \"\",\n    location: [0, 0],\n  });\n  const [userLocationState, setUserLocationState] = useState(\n    LOCATION_STATES.PENDING,\n  );\n  const [userLocation, setUserLocation] = useState(null);\n\n  // Adds Google maps script tag if haven't already. Required before the user clicks on search since it uses the library\n  usePlacesService({\n    apiKey: GOOGLE_API_KEY,\n    language: \"&callback=dummyFunction\", // Ugly hack. Library doesn't handle a callback param directly\n  });\n\n  const getUserLocation = () => {\n    // TODO: The location is only retrieved once on load and never again.\n    //  This works fine as of now since the app is not expected to be used while the user is in motion\n    //  Later, the current position must be polled to update frequently\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const { latitude: lat, longitude: lng } = position.coords;\n        const distanceToAirport = getDistance(\n          { latitude: lat, longitude: lng },\n          {\n            latitude: STOPS_DATA.airport.loc[0],\n            longitude: STOPS_DATA.airport.loc[1],\n          },\n        );\n        if (distanceToAirport < 1000) {\n          // If user is near the airport, we set the current location but not input location\n          // User has to manually enter the destination in the input box\n          setSelectedTab(TABS[1].id);\n        } else {\n          setInputLocation({ lat, lng });\n        }\n        setUserLocation({ lat, lng });\n        setUserLocationState(LOCATION_STATES.APPROVED);\n      },\n      (error) => {\n        if (error.code === 1) {\n          setUserLocationState(LOCATION_STATES.DENIED);\n        } else {\n          console.log(error);\n        }\n      },\n    );\n  };\n\n  const onResize = () => {\n    setBodyHeight(window.visualViewport?.height || window.innerHeight);\n  };\n\n  useEffect(() => {\n    // Fallback for older devices that don't support visualViewport API.\n    // visualViewport is still preferred because it gives the size excluding other UI elements like soft keyboards and\n    // works well for embeds/split screens\n    (window.visualViewport || window).addEventListener(\"resize\", onResize);\n    onResize();\n    return () => {\n      (window.visualViewport || window).removeEventListener(\"resize\", onResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"lang\", lang);\n    document.documentElement.setAttribute(\"lang\", lang);\n    i18n.changeLanguage(lang);\n  }, [lang]);\n\n  useEffect(() => {\n    // When the app opens, try to get user's location\n    if (\"geolocation\" in navigator) {\n      // TODO: Rename. Doesn't actually \"get\", rather sets the user location state and input location\n      getUserLocation();\n    } else {\n      setUserLocationState(LOCATION_STATES.UNAVAILABLE);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!inputLocation) {\n      return;\n    }\n    const locations = JSON.parse(localStorage.getItem(\"locations\") || \"[]\");\n    const sortedLocations = lSortBy(\n      lMap(locations, (l) => ({\n        ...l,\n        distance: getDistance(\n          { latitude: inputLocation.lat, longitude: inputLocation.lng },\n          { latitude: l.location[0], longitude: l.location[1] },\n        ),\n      })),\n      \"distance\",\n    );\n    const closestLocation = sortedLocations[0];\n\n    if (closestLocation && closestLocation.distance < 50) {\n      // There's a location in the past list within 50m of the current location input\n      setInputLocationMetadata(closestLocation);\n    } else {\n      // Get the name of place from input location.\n      // This happens if the user selects a lat,lng on the map and adjusts it farther from previously input text or\n      // if the user cleared local storage\n      const geocodeInput = async () => {\n        await loadGoogleMapScript(\n          \"https://maps.googleapis.com/maps/api/js\",\n          `https://maps.googleapis.com/maps/api/js?libraries=places&key=${GOOGLE_API_KEY}&callback=dummyFunction`,\n        );\n        const geocoder = new google.maps.Geocoder();\n        geocoder\n          .geocode({ location: inputLocation })\n          .then(({ results }) => {\n            const { formatted_address, place_id } = results[0] || {};\n            saveLocationMetadata(place_id, formatted_address, [\n              inputLocation.lat,\n              inputLocation.lng,\n            ]);\n            setInputLocationMetadata({\n              placeId: place_id,\n              name: formatted_address,\n              location: [inputLocation.lat, inputLocation.lng],\n            });\n          })\n          .catch((e) => {\n            // Ignore the error than notify user. It might not matter much to the user when location lat lng is shown instead\n            // of text but would be an unnecessary information overload/distraction if the user is notified of the background api call failing\n            // which doesn't affect the core functionality.\n            console.log(\"Error\");\n            console.log(e);\n          });\n      };\n      geocodeInput();\n    }\n  }, [inputLocation]);\n\n  return (\n    <Sentry.ErrorBoundary fallback={<PageCrashError />}>\n      <div id=\"app-container\">\n        {currentScreen === APP_SCREENS.INITIAL && (\n          <InitialScreen\n            userLocation={userLocation}\n            selectedTab={selectedTab}\n            setSelectedTab={setSelectedTab}\n            inputLocation={inputLocation}\n            setCurrentScreen={setCurrentScreen}\n            inputLocationMetadata={inputLocationMetadata}\n            lang={lang}\n            setLang={setLang}\n            bodyHeight={bodyHeight}\n          />\n        )}\n        {currentScreen === APP_SCREENS.LOCATION_TEXT && (\n          <SearchText\n            selectedTab={selectedTab}\n            setCurrentScreen={setCurrentScreen}\n            setInputLocation={setInputLocation}\n            bodyHeight={bodyHeight}\n          />\n        )}\n        {currentScreen === APP_SCREENS.LOCATION_MAP && (\n          <SearchMap\n            selectedTab={selectedTab}\n            inputLocation={inputLocation}\n            setInputLocation={setInputLocation}\n            setCurrentScreen={setCurrentScreen}\n            bodyHeight={bodyHeight}\n          />\n        )}\n      </div>\n    </Sentry.ErrorBoundary>\n  );\n};\n\nconst root = createRoot(document.getElementById(\"root\"));\nroot.render(<Container />);\n"],"names":["utils","loadGoogleMapScript_1","isBrowser","loadGoogleMapScript","googleMapsScriptBaseUrl","googleMapsScriptUrl","scriptElements","resolve","el","objectToString","isError","wat","isInstanceOf","isBuiltin","className","isErrorEvent","isDOMError","isDOMException","isString","isPrimitive","isPlainObject","isEvent","isElement","isRegExp","isThenable","isSyntheticEvent","isNaN","base","isGlobalObj","obj","GLOBAL_OBJ","getGlobalObject","getGlobalSingleton","name","creator","gbl","__SENTRY__","WINDOW","DEFAULT_MAX_STRING_LENGTH","htmlTreeAsString","elem","options","currentElem","MAX_TRAVERSE_HEIGHT","out","height","len","separator","sepLength","nextStr","keyAttrs","maxStringLength","_htmlElementAsString","classes","key","attr","i","keyAttrPairs","keyAttr","keyAttrPair","allowedAttrs","getLocationHref","getDomElement","selector","SentryError","message","logLevel","DSN_REGEX","isValidProtocol","protocol","dsnToString","dsn","withPassword","host","path","pass","port","projectId","publicKey","dsnFromString","str","match","lastPath","split","projectMatch","dsnFromComponents","components","validateDsn","component","makeDsn","from","PREFIX","CONSOLE_LEVELS","consoleSandbox","callback","originalConsole","wrappedLevels","level","originalWrappedFunc","makeLogger","enabled","logger","args","truncate","max","safeJoin","input","delimiter","output","value","isMatchingPattern","pattern","requireExactStringMatch","stringMatchesSomePattern","testString","patterns","fill","source","replacementFactory","original","wrapped","markFunctionWrapped","addNonEnumerableProperty","proto","getOriginalFunction","func","urlEncode","object","convertToPlainObject","getOwnProperties","newObj","serializeEventTarget","target","extractedProps","property","extractExceptionKeysForMessage","exception","maxLength","keys","includedKeys","serialized","dropUndefinedKeys","inputValue","_dropUndefinedKeys","memoizationMap","memoVal","returnValue","item","_nullishCoalesce","lhs","rhsFn","_optionalChain","ops","lastAccessLHS","op","fn","STACKTRACE_LIMIT","createStackParser","parsers","sortedParsers","a","b","p","stack","skipFirst","frames","line","cleanedLine","parser","frame","stripSentryFramesAndReverse","stackParserFromStackParserOptions","stackParser","localStack","firstFrameFunction","lastFrameFunction","defaultFunctionName","getFunctionName","supportsFetch","isNativeFetch","supportsNativeFetch","result","doc","sandbox","err","supportsHistory","chrome","isChromePackagedApp","hasHistoryApi","handlers","instrumented","instrument","type","instrumentConsole","instrumentDOM","instrumentXHR","instrumentFetch","instrumentHistory","instrumentError","instrumentUnhandledRejection","addInstrumentationHandler","triggerHandlers","data","handler","e","originalConsoleMethod","originalFetch","handlerData","getFetchMethod","getFetchUrl","response","error","fetchArgs","xhrproto","originalOpen","xhr","url","xhrInfo","onreadystatechangeHandler","readyStateArgs","originalSend","lastHref","oldOnPopState","to","historyReplacementFunction","originalHistoryFunction","debounceDuration","debounceTimerID","lastCapturedEvent","shouldShortcircuitPreviousDebounce","previous","current","shouldSkipDOMEvent","event","makeDOMEventHandler","globalListener","triggerDOMHandler","globalDOMEventHandler","originalAddEventListener","listener","handlerForType","originalRemoveEventListener","_oldOnErrorHandler","msg","column","_oldOnUnhandledRejectionHandler","memoBuilder","hasWeakSet","inner","memoize","unmemoize","uuid4","crypto","getRandomByte","c","getFirstException","getEventDescription","eventId","firstException","addExceptionTypeValue","values","addExceptionMechanism","newMechanism","defaultMechanism","currentMechanism","mergedData","checkOrSetAlreadyCaught","arrayify","maybeArray","isBrowserBundle","isNodeEnv","dynamicRequire","mod","request","loadModule","moduleName","module","cwd","normalize","depth","maxProperties","visit","normalizeToSize","maxSize","normalized","jsonSize","memo","stringified","stringifyValue","valueWithToJSON","jsonValue","numAdded","visitable","visitKey","visitValue","utf8Length","States","RESOLVED","REJECTED","resolvedSyncPromise","SyncPromise","rejectedSyncPromise","reason","_","reject","executor","onfulfilled","onrejected","val","onfinally","isRejected","state","cachedHandlers","makePromiseBuffer","limit","buffer","isReady","remove","task","add","taskProducer","drain","timeout","counter","capturedSetTimeout","parseUrl","query","fragment","validSeverityLevels","severityLevelFromString","dateTimestampSource","getBrowserPerformance","performance","timeOrigin","getNodePerformance","platformPerformance","timestampSource","dateTimestampInSeconds","timestampInSeconds","timestampWithMs","browserPerformanceTimeOrigin","threshold","performanceNow","dateNow","timeOriginDelta","timeOriginIsReliable","navigationStart","navigationStartDelta","navigationStartIsReliable","TRACEPARENT_REGEXP","extractTraceparentData","traceparent","matches","parentSampled","createEnvelope","headers","items","addItemToEnvelope","envelope","newItem","forEachEnvelopeItem","envelopeItem","envelopeItemType","encodeUTF8","textEncoder","serializeEnvelope","envHeaders","parts","append","next","itemHeaders","payload","stringifiedPayload","concatBuffers","buffers","totalLength","acc","buf","merged","offset","createAttachmentEnvelopeItem","attachment","ITEM_TYPE_TO_DATA_CATEGORY_MAP","envelopeItemTypeToDataCategory","getSdkMetadataForEnvelopeHeader","metadataOrEvent","version","createEventEnvelopeHeaders","sdkInfo","tunnel","dynamicSamplingContext","createClientReportEnvelope","discarded_events","timestamp","clientReportItem","DEFAULT_RETRY_AFTER","parseRetryAfterHeader","header","now","headerDelay","headerDate","disabledUntil","limits","category","isRateLimited","updateRateLimits","statusCode","updatedRateLimits","rateLimitHeader","retryAfterHeader","retryAfter","categories","delay","BAGGAGE_HEADER_NAME","SENTRY_BAGGAGE_KEY_PREFIX","SENTRY_BAGGAGE_KEY_PREFIX_REGEX","MAX_BAGGAGE_STRING_LENGTH","baggageHeaderToDynamicSamplingContext","baggageHeader","baggageObject","curr","currBaggageObject","baggageHeaderToObject","nonPrefixedKey","dynamicSamplingContextToSentryBaggageHeader","sentryPrefixedDSC","dscKey","dscValue","objectToBaggageHeader","baggageEntry","keyOrValue","objectKey","objectValue","currentIndex","newBaggageHeader","makeSession","context","startingTime","session","sessionToJSON","updateSession","duration","closeSession","status","DEFAULT_MAX_BREADCRUMBS","Scope","scope","newScope","user","requestSession","tags","extras","extra","fingerprint","span","captureContext","updatedScope","breadcrumb","maxBreadcrumbs","maxCrumbs","mergedBreadcrumb","hint","transactionName","getGlobalEventProcessors","newData","processors","index","processor","final","addGlobalEventProcessor","API_VERSION","DEFAULT_BREADCRUMBS","Hub","client","_version","top","syntheticException","beforeBreadcrumb","finalBreadcrumb","oldHub","makeMain","integration","customSamplingContext","endSession","layer","release","environment","userAgent","currentSession","method","sentry","getMainCarrier","hub","registry","getHubFromCarrier","setHubOnCarrier","getCurrentHub","hasHubOnCarrier","getHubFromActiveDomain","activeDomain","registryHubTopStack","carrier","captureException","withScope","SENTRY_API_VERSION","getBaseApiEndpoint","_getIngestEndpoint","_encodedAuth","getEnvelopeEndpointWithUrlEncodedAuth","tunnelOrOptions","getReportDialogEndpoint","dsnLike","dialogOptions","endpoint","encodedOptions","enhanceEventWithSdkInfo","createSessionEnvelope","metadata","envelopeHeaders","createEventEnvelope","eventType","installedIntegrations","filterDuplicates","integrations","integrationsByName","currentInstance","existingInstance","getIntegrationsToSetup","defaultIntegrations","userIntegrations","finalIntegrations","debugIndex","debugInstance","setupIntegrations","integrationIndex","prepareEvent","normalizeDepth","normalizeMaxBreadth","prepared","applyClientOptions","applyIntegrationsMetadata","finalScope","attachments","evt","normalizeEvent","dist","maxValueLength","integrationNames","maxBreadth","ALREADY_SEEN_ERROR","BaseClient","promisedEvent","transport","clientFinished","transportFlushed","integrationId","env","_event","crashed","errored","exceptions","ex","mechanism","sessionNonTerminal","ticked","tick","interval","finalEvent","sentryError","sampleRate","isTransaction","isTransactionEvent","beforeSendLabel","processBeforeSend","_validateBeforeSendResult","processedEvent","transactionInfo","promise","outcomes","beforeSendResult","invalidValueError","beforeSend","beforeSendTransaction","initAndBind","clientClass","DEFAULT_TRANSPORT_BUFFER_SIZE","createTransport","makeRequest","rateLimits","flush","send","filteredEnvelopeItems","envelopeItemDataCategory","getEventForEnvelopeItem","filteredEnvelope","recordEnvelopeLoss","requestTask","SDK_VERSION","originalFunctionToString","FunctionToString","DEFAULT_IGNORE_ERRORS","InboundFilters","_options","eventProcess","self","clientOptions","_mergeOptions","_shouldDropEvent","internalOptions","_isSentryError","_isIgnoredError","_isDeniedUrl","_getEventFilterUrl","_isAllowedUrl","ignoreErrors","_getPossibleEventMessages","denyUrls","allowUrls","_getLastValidUrl","ignoreOnError","shouldIgnoreOnError","ignoreNextOnError","wrap","before","wrapper","sentryWrapped","wrappedArguments","arg","exceptionFromError","parseStackFrames","extractMessage","eventFromPlainObject","isUnhandledRejection","eventFromError","stacktrace","popSize","getPopSize","reactMinifiedRegexp","eventFromException","attachStacktrace","eventFromUnknownInput","eventFromMessage","eventFromString","domException","MAX_ALLOWED_STRING_LENGTH","BREADCRUMB_INTEGRATION_ID","Breadcrumbs","_consoleBreadcrumb","_domBreadcrumb","_xhrBreadcrumb","_fetchBreadcrumb","_historyBreadcrumb","dom","_innerDomBreadcrumb","status_code","body","parsedLoc","parsedFrom","parsedTo","BrowserClient","breadcrumbIntegration","_2","cachedFetchImpl","getNativeFetchImplementation","document","fetchImpl","contentWindow","clearCachedFetchImplementation","makeFetchTransport","nativeFetch","requestOptions","XHR_READYSTATE_DONE","makeXHRTransport","UNKNOWN_FUNCTION","CHROME_PRIORITY","WINJS_PRIORITY","GECKO_PRIORITY","createFrame","filename","lineno","colno","chromeRegex","chromeEvalRegex","subMatch","extractSafariExtensionDetails","chromeStackLineParser","geckoREgex","geckoEvalRegex","gecko","geckoStackLineParser","winjsRegex","winjs","winjsStackLineParser","defaultStackLineParsers","defaultStackParser","isSafariExtension","isSafariWebExtension","GlobalHandlers","_installGlobalOnErrorHandler","_installGlobalOnUnhandledRejectionHandler","installFunc","globalHandlerLog","getHubAndOptions","_eventFromIncompleteOnError","_enhanceEventWithInitialFrame","addMechanismAndCapture","_eventFromRejectionWithPrimitive","ERROR_TYPES_RE","groups","ev","ev0","ev0s","ev0sf","DEFAULT_EVENT_TARGET","TryCatch","_wrapTimeFunction","_wrapRAF","_wrapXHR","eventTargetOption","_wrapEventTarget","originalCallback","prop","wrapOptions","originalFunction","globalObject","eventName","wrappedEventHandler","originalEventHandler","DEFAULT_KEY","DEFAULT_LIMIT","LinkedErrors","_handler","linkedErrors","_walkErrorTree","HttpContext","referrer","Dedupe","eventProcessor","currentEvent","previousEvent","_isSameMessageEvent","_isSameExceptionEvent","currentMessage","previousMessage","_isSameFingerprint","_isSameStacktrace","previousException","_getExceptionFromEvent","currentException","currentFrames","_getFramesFromEvent","previousFrames","frameA","frameB","currentFingerprint","previousFingerprint","Integrations.InboundFilters","Integrations.FunctionToString","init","startSessionTracking","showReportDialog","script","injectionPoint","startSessionOnHub","init$1","d","f","g","h","k","l","m","n","q","r","t","v","w","x","y","z","u","A","reactIs_production_min","require$$0","reactIs","FORWARD_REF_STATICS","MEMO_STATICS","TYPE_STATICS","isAtLeastReact17","major","INITIAL_STATE","ErrorBoundary","React.Component","componentStack","beforeCapture","onError","showDialog","React.version","errorBoundaryError","onMount","onUnmount","onReset","fallback","children","element","React.isValidElement","hasTracingEnabled","maybeOptions","getActiveTransaction","maybeHub","msToSec","time","registerErrorInstrumentation","errorCallback","activeTransaction","SpanRecorder","maxlen","Span","spanContext","childSpan","opStr","nameStr","idStr","logMessage","httpStatus","spanStatus","spanStatusfromHttpCode","endTimestamp","sampledString","Transaction","transactionContext","incomingDynamicSamplingContext","newName","unit","newMetadata","finishedSpans","s","prev","transaction","public_key","maybeSampleRate","sample_rate","user_segment","DEFAULT_IDLE_TIMEOUT","DEFAULT_FINAL_TIMEOUT","DEFAULT_HEARTBEAT_INTERVAL","IdleTransactionSpanRecorder","_pushActivity","_popActivity","transactionSpanId","IdleTransaction","_idleHub","_idleTimeout","_finalTimeout","_heartbeatInterval","_onScope","clearActiveTransaction","keepSpan","pushActivity","id","popActivity","spanId","heartbeatString","traceHeaders","sample","samplingContext","isValidSampleRate","rate","_startTransaction","configInstrumenter","transactionInstrumenter","startIdleTransaction","idleTimeout","finalTimeout","onScope","heartbeatInterval","_addTracingExtensions","_autoloadDatabaseIntegrations","packageToIntegrationMapping","mappedPackages","pkg","addExtensionMethods","registerBackgroundTabDetection","statusType","bindReporter","metric","reportAllChanges","prevValue","delta","forceReport","generateUniqueID","getNavigationEntryFromPerformanceTiming","timing","navigationEntry","getNavigationEntry","getActivationStart","navEntry","initMetric","navigationType","observe","opts","po","list","onHidden","cb","once","onHiddenOrPageHide","onCLS","onReport","report","sessionValue","sessionEntries","handleEntries","entries","entry","firstSessionEntry","lastSessionEntry","firstHiddenTime","initHiddenTime","trackChanges","timeStamp","getVisibilityWatcher","onFID","visibilityWatcher","handleEntry","reportedMetricIDs","onLCP","lastEntry","stopListening","isMeasurementValue","_startChild","startTimestamp","ctx","getBrowserPerformanceAPI","_performanceCursor","_measurements","_lcpEntry","_clsEntry","startTrackingWebVitals","_trackCLS","_trackLCP","_trackFID","startTrackingLongTasks","startTime","addPerformanceEntries","performanceEntries","responseStartTimestamp","requestStartTimestamp","_addNavigationSpans","_addMeasureSpans","firstHidden","shouldRecord","resourceName","_addResourceSpans","_trackNavigator","oldValue","measurementTimestamp","normalizedValue","fidMark","measurementName","_tagMetricInfo","measureStartTimestamp","measureEndTimestamp","_addPerformanceNavigationTiming","_addRequest","description","eventEnd","end","start","navigator","connection","DEFAULT_TRACE_PROPAGATION_TARGETS","defaultRequestInstrumentationOptions","instrumentOutgoingRequests","traceFetch","traceXHR","tracePropagationTargets","tracingOrigins","shouldCreateSpanForRequest","shouldCreateSpan","shouldAttachHeadersWithTargets","shouldAttachHeaders","spans","fetchCallback","xhrCallback","addTracingHeadersToFetchRequest","sentryBaggageHeader","sentryTraceHeader","newHeaders","existingBaggageHeader","newBaggageHeaders","instrumentRoutingWithDefaults","customStartTransaction","startTransactionOnPageLoad","startTransactionOnLocationChange","startingUrl","BROWSER_TRACING_INTEGRATION_ID","DEFAULT_BROWSER_TRACING_OPTIONS","BrowserTracing","_3","_4","instrumentRouting","markBackgroundTransactions","_experiments","_5","beforeNavigate","isPageloadTransaction","sentryTraceMetaTagValue","getMetaContent","baggageMetaTagValue","traceParentData","expandedContext","modifiedContext","finalContext","_6","_7","location","idleTransaction","inflightInteractionTransaction","registerInteractionTransaction","metaName","metaTag","mapboxgl","MAPBOX_TOKEN","Map","React.PureComponent","props","__publicField","lng","lat","zoom","map","inputLocation","busData","selectedBus","selectedTab","userLocation","getRoutesGeojson","MAP_STYPE_ROUTE","MAP_STYLE_HIGHLIGHTED_ROUTE","getStopsGeoJson","MAP_STYPE_STOP","el2","popup","coordinates","feature","setSelectedBus","routeSource","stopsSource","STOPS_DATA","React.createRef","_a","prevProps","prevState","snapshot","prevUserLocation","prevSelectedBus","prevSelectedTab","prevInputLocation","busesList","BUS_DATA","busDetails","lFind","supported","React.createElement","Trans","Map$2","withTranslation","hasOwn","classNames","argType","IconTabArrow","IconCall","IconBus","selected","React","IconOpenLink","timeTextDisplay","number","BusItemTime","msm","currentTime","hours","minutes","BusItem","toAirport","timings","busSelected","locationDetails","BusItem$1","COLLAPSED_HEIGHT","FOOTER_HEIGHT","MIDWAY_HEIGHT","getCoordinatesFromEvent","Sidebar","move","getCurrentMsm","newBodyHeight","bodyHeight","sidebarItem","bounds","setSelectedTab","sortedTabData","suggestedBus","suggestedBusDetails","TABS","bus","HELPLINE_NUMBER","Sidebar$1","MapLocationInput","setCurrentScreen","inputLocationMetadata","APP_SCREENS","MapLocationInput$1","InitialScreen","setLang","useState","selectedTabData","getSuggestedBus","useEffect","React.Fragment","SideMenu","FUNC_ERROR_TEXT","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","freeGlobal","global","freeSelf","root","objectProto","nativeMax","nativeMin","debounce","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","toNumber","isObject","invokeFunc","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","shouldInvoke","trailingEdge","cancel","debounced","isInvoking","isObjectLike","isSymbol","other","isBinary","lodash_debounce","constants","GOOGLE_MAP_SCRIPT_BASE_URL","usePlacesAutocompleteService_1","_default","usePlacesAutocompleteService","_react","_lodash","_interopRequireDefault","require$$1","_utils","require$$2","_constants","require$$3","ownKeys","enumerableOnly","symbols","sym","_objectSpread","_defineProperty","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","arr2","_i","_arr","_n","_d","_s","_e","_ref","apiKey","_ref$libraries","libraries","_ref$googleMapsScript","_ref$debounce","_ref$options","sessionToken","language","languageQueryParam","_useState","_useState2","placePredictions","setPlacePredictions","_useState3","_useState4","isPlacePredsLoading","setIsPlacePredsLoading","_useState5","_useState6","placeInputValue","setPlaceInputValue","_useState7","_useState8","isQueryPredsLoading","setIsQueryPredsLoading","_useState9","_useState10","queryInputValue","setQueryInputValue","_useState11","_useState12","queryPredictions","setQueryPredictions","placesAutocompleteService","placesService","autocompleteSession","handleLoadScript","debouncedPlacePredictions","optionsArg","debouncedQueryPredictions","buildService","opt","IconBack","IconCross","IconGreyPin","LogoGoogle","RECENT_LOCATION_COUNT","SearchText","setInputLocation","setInput","recentLocations","setRecentLocations","getPlacePredictions","isPlacePredictionsLoading","usePlacesService","GOOGLE_API_KEY","locations","lTakeRight","lSortBy","lReverse","onPlaceSelect","placeId","placeDetails","saveLocationMetadata","SearchText$1","IconMarker","SearchMap","mapContainer","useRef","setZoom","tempLocation","setTempLocation","onConfirm","SearchMap$1","IllustrationError","PageCrashError","Sentry.init","SENTRY_DSN","Container","currentScreen","setBodyHeight","lang","LANGUAGES","setInputLocationMetadata","userLocationState","setUserLocationState","LOCATION_STATES","setUserLocation","getUserLocation","position","getDistance","onResize","i18n","closestLocation","lMap","results","formatted_address","place_id","Sentry.ErrorBoundary","createRoot"],"mappings":"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"}